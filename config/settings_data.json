{"current":{"heading_color":"#11387f","text_color":"#11387f","accent_color":"#11387f","link_color":"#999999","border_color":"#efefef","background":"#efefef","secondary_background":"#ffffff","error_color":"#ff0000","success_color":"#00aa00","primary_button_background":"#11387f","primary_button_text_color":"#ffffff","secondary_button_background":"#11387f","secondary_button_text_color":"#ffffff","header_background":"#11387f","header_text_color":"#ffffff","header_light_text_color":"#ffffff","header_accent_color":"#999999","footer_background_color":"#ffffff","footer_heading_text_color":"#1f233b","footer_body_text_color":"#11387f","footer_accent_color":"#11387f","product_on_sale_accent":"#1e2d7d","product_in_stock_color":"#008a00","product_low_stock_color":"#ee0000","product_sold_out_color":"#8a9297","product_label_1_background":"#008a00","product_label_2_background":"#00a500","product_star_color":"#ffbd00","base_text_font_size":16,"heading_font":"din_next_n5","text_font":"din_next_n4","underline_links":true,"currency_code_enabled":true,"animation_image_zoom":true,"search_mode":"product,page","search_unavailable_products":"show","show_vendor":false,"show_secondary_image":true,"show_reviews_badge":false,"show_discount":false,"discount_mode":"saving","product_price_position":"after_title","product_image_size":"square","show_color_swatch":false,"show_inventory_quantity":true,"low_inventory_threshold":0,"cart_type":"message","cart_empty_button_link":"shopify:\/\/collections\/all","cart_show_checkout_button":false,"cart_show_free_shipping_threshold":false,"cart_free_shipping_threshold":"50","social_facebook":"#","social_twitter":"","social_pinterest":"#","social_instagram":"#","social_vimeo":"","social_tumblr":"","social_youtube":"#","social_linkedin":"#","social_snapchat":"","social_fancy":"","favicon":"","checkout_logo_image":"shopify:\/\/shop_images\/LKFlow_Logo_CMYK_e6833f84-02f4-444d-939f-b2a121a8f584.png","checkout_logo_position":"center","checkout_logo_size":"large","checkout_body_background_image":"","checkout_body_background_color":"#efefef","checkout_input_background_color_mode":"white","checkout_sidebar_background_image":"","checkout_sidebar_background_color":"#fafafa","checkout_heading_font":"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'","checkout_body_font":"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'","checkout_accent_color":"#222d5d","checkout_button_color":"#999999","checkout_error_color":"#ff0000","share_image":"","sections":{"header":{"type":"header","blocks":{"204b790b-82c6-4776-9ef6-db8d93e21e89":{"type":"mega_menu","settings":{"menu_item":"All Products","image_1_heading":"Heading","image_1_text":"Text","image_1_link":"https:\/\/partner-webshop.myshopify.com\/collections\/all","image_2_heading":"Your image","image_2_text":"Tell your story","image_2_link":""}},"ec780465-821e-4d84-b6d2-65be2d47d890":{"type":"expand_menu","settings":{"menu_expanded":"Sensing and control","get_menu":"sm-sensing-and-control"}},"80264aa3-08c4-4e2b-824f-48663f0fe7bb":{"type":"expand_menu","settings":{"menu_expanded":"Hygienic fittings","get_menu":"sm-hygienic-fittings"}},"3b6a3aee-d3e2-412c-b270-92c84a076cab":{"type":"expand_menu","settings":{"menu_expanded":"Hygienic tubes","get_menu":"sm-hygienic-tubes"}},"9de510e8-885b-49ec-905b-7f9ad74718ab":{"type":"expand_menu","settings":{"menu_expanded":"Installation accessories","get_menu":"sm-installation-accessories"}},"f9aea791-bfe6-413a-b52a-ee3d89126bf6":{"type":"expand_menu","settings":{"menu_expanded":"Other fittings","get_menu":"sm-other-fittings"}},"11115fe9-7a09-48a2-b195-93830f2a24a4":{"type":"expand_menu","settings":{"menu_expanded":"UltraPure fittings","get_menu":"sm-ultrapure-fittings"}},"88d7ad97-cb47-48eb-9bbe-a29fba9e5e8b":{"type":"expand_menu","settings":{"menu_expanded":"UltraPure tubes","get_menu":"sm-ultrapure-tubes"}},"c0fc7b5a-6bac-4607-89e6-34fb0a240c7e":{"type":"expand_menu","disabled":true,"settings":{"menu_expanded":"Agitators","get_menu":"sm-agitators"}},"25b14ede-7136-4c59-9bf5-8d52202aa92f":{"type":"expand_menu","disabled":true,"settings":{"menu_expanded":"Tank mixers","get_menu":"sm-tank-mixers"}},"5a6e2613-4c8a-4743-8938-f73042a2165d":{"type":"expand_menu","disabled":true,"settings":{"menu_expanded":"Powder mixers","get_menu":"sm-powder-mixers"}},"d34dc018-7b8c-4c71-83b0-f3e6f1ded95f":{"type":"expand_menu","settings":{"menu_expanded":"Centrifugal pumps","get_menu":"sub-menu-pumps"}},"22403b7d-66d2-492b-9965-a69619b4e4d1":{"type":"expand_menu","settings":{"menu_expanded":"Rotary spray heads","get_menu":"sm-rotary-jet-heads-1"}},"275ddccc-a4d2-4b91-9002-a0eebfd7f435":{"type":"expand_menu","settings":{"menu_expanded":"Rotary jet heads","get_menu":"sm-rotary-jet-heads"}},"b6a35bb4-7ba5-41e0-95ba-35ca9b8ff329":{"type":"expand_menu","disabled":true,"settings":{"menu_expanded":"Static spray balls","get_menu":"sm-static-spray-balls"}},"2c502a2f-6777-4a34-9ea1-2ada19f39e68":{"type":"expand_menu","settings":{"menu_expanded":"Butterfly valves","get_menu":"sm-butterfly-valves"}}},"block_order":["204b790b-82c6-4776-9ef6-db8d93e21e89","ec780465-821e-4d84-b6d2-65be2d47d890","80264aa3-08c4-4e2b-824f-48663f0fe7bb","3b6a3aee-d3e2-412c-b270-92c84a076cab","9de510e8-885b-49ec-905b-7f9ad74718ab","f9aea791-bfe6-413a-b52a-ee3d89126bf6","11115fe9-7a09-48a2-b195-93830f2a24a4","88d7ad97-cb47-48eb-9bbe-a29fba9e5e8b","c0fc7b5a-6bac-4607-89e6-34fb0a240c7e","25b14ede-7136-4c59-9bf5-8d52202aa92f","5a6e2613-4c8a-4743-8938-f73042a2165d","d34dc018-7b8c-4c71-83b0-f3e6f1ded95f","22403b7d-66d2-492b-9965-a69619b4e4d1","275ddccc-a4d2-4b91-9002-a0eebfd7f435","b6a35bb4-7ba5-41e0-95ba-35ca9b8ff329","2c502a2f-6777-4a34-9ea1-2ada19f39e68"],"settings":{"enable_sticky_header":true,"logo":"shopify:\/\/shop_images\/PartnerWebshopLogo_PNG.png","logo_max_width":250,"mobile_logo_max_width":130,"show_locale_selector":true,"show_country_selector":false,"navigation_menu":"main-menu","navigation_mobile_menu":"main-menu","desktop_navigation_layout":"inline","desktop_navigation_open_trigger":"hover","show_navigation_social_media":false,"navigation_phone_number":"","navigation_email":"","show_condensed_search":true,"show_search_filter":false,"search_menu":"","show_search_menu_title":false}},"footer":{"type":"footer","blocks":{"footer-1":{"type":"links","settings":{"menu":""}},"f46027d5-52df-4d5f-9509-bf45440be222":{"type":"text","settings":{"title":"","content":"<p><\/p><h4>Alfa Laval Partner Webshop<\/h4><p>Albuen 31<br\/>6000 Kolding<\/p><p>Telefon: +45 79 32 22 00<br\/><\/p>"}},"f458831b-a6b1-4f6c-8383-43e2f25900a7":{"type":"links","settings":{"menu":""}}},"block_order":["footer-1","f46027d5-52df-4d5f-9509-bf45440be222","f458831b-a6b1-4f6c-8383-43e2f25900a7"],"custom_css":[],"settings":{"show_social_media":false,"show_payment_icons":false,"show_locale_selector":false,"show_country_selector":true,"show_cookie_bar":false,"text":"<p>Who does not like cookies?..<\/p>","accept_button":"Accept"}},"announcement-bar":{"type":"announcement-bar","settings":{"show_announcement":true,"background":"#999999","text_color":"#ffffff","text":"We are working on improvements and will be adding more products over time - look forward to much more!","text_position":"center","link":"","show_newsletter":false,"newsletter_button":"Subscribe & Save","newsletter_title":"Newsletter","newsletter_content":"<p>A short sentence describing what someone will receive by subscribing<\/p>"}},"popups":{"type":"popups","settings":{}},"static-text-with-icons":{"type":"static-text-with-icons","blocks":{"81d35909-eef7-484f-9dc1-19d632a4ea4f":{"type":"item","disabled":true,"settings":{"icon":"bi-customer-support","title":"Heading","content":"<p>Short content about your store<\/p>"}}},"block_order":["81d35909-eef7-484f-9dc1-19d632a4ea4f"],"settings":{"show_section":false,"stack_mobile":true}},"gift-card-template":{"type":"gift-card-template","settings":{"logo_max_width":240,"mobile_logo_max_width":100}}},"content_for_index":[],"blocks":{"18209738915288330680":{"type":"shopify:\/\/apps\/wholesale-all-in-one\/blocks\/wholesale-all-in-one\/5a3d95fb-5647-47d5-8445-d5858f91ff9d","disabled":false,"settings":{"wsaio_app_access_token":"warehouse_wsaiouvh6qz","wsaio_main_js_file":"\/**\n * Version: 0.3.6\n * Updated: 1 June, 2022\n * Compatible With: 2.3.8\n **\/\n\n\n WSAIO.init = function ($) {\n\twindow.$wsj = $;\n\ttry{\n\t\tif( window.location.href.indexOf('\/account\/login') && $('[name=\"checkout_url\"]').length > 0){\n\t\t\t$('[name=\"checkout_url\"]').val(Shopify.routes.root+'cart');\n\t\t  }\n\t}catch(e){}\n\tif(!WSAIO.main_liquid_file_included){\n\t  if(!WSAIO.no_logs){\n\t\tconsole.error(\"%cError 404 -- 'wholesale-all-in-one-main.liquid' file not found.\", \"font-size: 20px\");\n\t  }\n\t  WSAIO_is_disabled = true;\n\t  return false;\n\t}\n\t\n\tvar $ws = this;\n\tWSAIO.httpRequest = new XMLHttpRequest();\n\tWSAIO.DiscountCode = {};\n\tlocalStorage.removeItem(\"ws-applied-coupon\");\n\tWSAIO.all_discount_tags = [];\n\t$ws.applied_tag = \"all\";\n\t$ws.applied_tag_array = [];\n\tWSAIO.product_collections = [];\n\ttry{\n\t\tjQuery.map(WSAIO.products_with_collections, function(val) {\n\t\t\tdelete val.product_variants;\n\t\t\tWSAIO.product_collections.push(val)\n\t\t}); \n\t}catch(e){}\n \n\tif ('undefined' === typeof WSAIO.Currency) {\n\t  WSAIO.Currency = {};\n\t}\n\ttry{\n\t\tif(typeof WSAIO.customer != 'undefined' && WSAIO.customer.tax_exempt == true){\n\t\t\tWSAIO.exclude_VAT = 0;\n\t\t}\n        if(typeof WSAIO.exclude_VAT != 'undefined' && WSAIO.exclude_VAT != 0){\n            if(typeof WSAIO.auto_vat_enable != 'undefined'){\n              WSAIO.auto_vat_enable = false;\n            }\n\t\t}\n\t}catch(e){}\n\tif (!Array.prototype.findIndex) {\n\t  Object.defineProperty(Array.prototype, \"findIndex\", {\n\t\tvalue: function (c, d) {\n\t\t  if (null == this) throw new TypeError('\"this\" is null or not defined');\n\t\t  var b = Object(this),\n\t\t\t  e = b.length >>> 0;\n\t\t  if (\"function\" !== typeof c) throw new TypeError(\"predicate must be a function\");\n\t\t  for (var a = 0; a < e;) {\n\t\t\tif (c.call(d, b[a], a, b)) return a;\n\t\t\ta++\n\t\t  }\n\t\t  return -1\n\t\t},\n\t\tconfigurable: !0,\n\t\twritable: !0\n\t  });\n\t}\n\tif (!Array.prototype.indexOf) {\n\t  Array.prototype.indexOf = function (d, e) {\n\t\tif (null == this) throw new TypeError('\"this\" is null or not defined');\n\t\tvar c = Object(this),\n\t\t\tb = c.length >>> 0;\n\t\tif (0 === b) return -1;\n\t\tvar a = e | 0;\n\t\tif (a >= b) return -1;\n\t\tfor (a = Math.max(0 <= a ? a : b - Math.abs(a), 0); a < b; a++)\n\t\t  if (a in c && c[a] === d) return a;\n\t\treturn -1\n\t  };\n\t}\n\tif (!Array.prototype.find) {\n\t  Object.defineProperty(Array.prototype, \"find\", {\n\t\tvalue: function (c, e) {\n\t\t  if (null == this) throw TypeError('\"this\" is null or not defined');\n\t\t  var b = Object(this),\n\t\t\t  f = b.length >>> 0;\n\t\t  if (\"function\" !== typeof c) throw TypeError(\"predicate must be a function\");\n\t\t  for (var a = 0; a < f;) {\n\t\t\tvar d = b[a];\n\t\t\tif (c.call(e, d, a, b)) return d;\n\t\t\ta++\n\t\t  }\n\t\t},\n\t\tconfigurable: !0,\n\t\twritable: !0\n\t  });\n\t}  \n\tfunction log(a) {\n\t  if (!WSAIO.no_logs && [\"log\", \"info\", \"error\", \"warn\", \"Log\", \"Info\", \"Error\", \"Warn\"].indexOf($ws.log) > -1) {\n\t\ttry {\n\t\t  console[$ws.log.toLowerCase()](\"WSAIO \" + $ws.log.toUpperCase(), a);\n\t\t} catch (e) {}\n\t  }\n\t}\n  \n\tfunction isError(a) {\n\t  if (!WSAIO.no_logs && [\"log\", \"info\", \"error\", \"warn\", \"Log\", \"Info\", \"Error\", \"Warn\"].indexOf($ws.errorLog) > -1) {\n\t\ttry {\n\t\t  console[$ws.errorLog](\"WSAIO ERROR\", a);\n\t\t} catch (e) {}\n\t  }\n\t}\n  \n\tWSAIO.mF = function (a) {\n\t  if (isNaN(a) || null == a) return 0;\n\t  a = a.toString();\n\t  if (\"string\" == typeof a && -1 < a.indexOf(\".\")) return 2 > a.split(\".\")[1].length ? Number(a).toFixed(2).toString() : a.toString();\n\t  a = (Number(a) \/ 100).toFixed(2);\n\t  return a.toString()\n\t};\n  \n\tWSAIO.formatMoney = function (t, g) {\n\t\tif(t == null){\n\t\t\t return '';\n\t\t }\n\t\t var a = parseFloat(t);\n\t\t if(typeof QOF_page !== 'undefined' && QOF_page && (typeof WSAIO.QOF_version == 'undefined' || WSAIO.QOF_version == 1)){\n\t\t\t a= a\/100;\n\t\t }\n \n\t\t \"string\" === typeof a && (a = a.replace(\".\", \"\"));\n        var c = \"\",\n            e = \/\\{\\{\\s*(\\w+)\\s*\\}\\}\/,\n            f = g || $ws.shopInfo.money_format || WSAIO.shop_money_format;\n            Number.prototype.format_pricing = function(n, x, s, c) {\n              var re = '\\\\d(?=(\\\\d{' + (x || 3) + '})+' + (n > 0 ? '\\\\D' : '$') + ')',\n                  num = this.toFixed(Math.max(0, ~~n));\n              return (c ? num.replace('.', c) : num).replace(new RegExp(re, 'g'), '$&' + (s || ','));\n          };\n        switch (f.match(e)[1]) {\n          case \"amount\":\n              a = parseFloat(a);\n              return f.replace(e, a.format_pricing(2));\n            break;\n          case \"amount_no_decimals\":\n              a = parseFloat(a);\n              return f.replace(e, a.format_pricing(0));\n            break;\n          case \"amount_with_comma_separator\":\n              a = parseFloat(a);\n              return f.replace(e, a.format_pricing(2, 3, '.', ','));\n            break;\n          case \"amount_no_decimals_with_comma_separator\":\n              a = parseFloat(a);\n              return f.replace(e, a.format_pricing(2, 0, '.').replace('.00',''));\n            break;\n          case \"amount_no_decimals_with_space_separator\":\n           a = parseFloat(a);\n           return f.replace(e, a.format_pricing(2, 3, ' ').replace('.00',''));\n            break;\n          case \"  \":\n              a = parseFloat(a);\n              return f.replace(e, a.format_pricing(2, 3, \"'\"));\n        }\n        return f.replace(e, c)\n      };\n  \n    WSAIO.calculate_tax_price_adjustments = function(price){\n        \/\/  if prices are tax-inclusive, need to make price adjustments\n        price = Number(price);\n        if(isNaN(price)) return price;\n        \/*  COND:\n            if prices are tax-inclusive\n                1) if customer is international: WSAIO.tax_settings.customer_is_local == false\n                    :Exclude tax from price \n        *\/\n        if(typeof WSAIO.tax_settings !== \"undefined\" && WSAIO.tax_settings && typeof WSAIO.tax_settings.taxes_included !== \"undefined\" && WSAIO.tax_settings.taxes_included === true && typeof WSAIO.tax_settings.auto_configure_tax_inclusivity != 'undefined' && WSAIO.tax_settings.auto_configure_tax_inclusivity && typeof WSAIO.selected_variant_taxable != 'undefined' && WSAIO.selected_variant_taxable && typeof WSAIO.auto_vat_enable != 'undefined' &&  WSAIO.auto_vat_enable){\n            if(WSAIO.tax_settings.customer_is_local === false || WSAIO.customer.tax_exempt){\n                \/\/  Exclude TAX:\n                \/\/      calulcating tax using formula provided by shopify\n                \/\/      https:\/\/help.shopify.com\/en\/manual\/taxes\/location#include-taxes-in-product-prices\n\n              \n                var primary_tax = 0;\n                if(WSAIO.tax_settings.primary){\n                    primary_tax = Number((WSAIO.tax_settings.primary.tax * price) \/ (1 + WSAIO.tax_settings.primary.tax));\n                }\n                \/\/ First, exclude primary tax from price\n                price -= Number(primary_tax);\n\t\t\t\tif(typeof WSAIO.product_parent_grid_selector != 'undefined' && typeof WSAIO.tax_include_label_selector != 'undefined'){\n\t\t\t\t\t$(WSAIO.product_parent_grid_selector).find(WSAIO.tax_include_label_selector).text('Tax Excluded.')\n\t\t\t\t }\n                \/\/ Then, add presentment tax to price\n                if(WSAIO.tax_settings.presentment && (WSAIO.customer.id == null || WSAIO.customer.tax_exempt == false)){\n                    \/\/ this tax will be 0 if tax need to be excluded\n                    price = Number((price * (1 + WSAIO.tax_settings.presentment.tax)));\n                }\n                \n            }\n        }\n\n        return price.toFixed(2);\n    }\n  \n\tWSAIO.displayTable = function (a, b) {\n\t  if (\"undefined\" === typeof b) return isError(\"Volume discount table selector for product page was not defined.\");\n\t  if (-1 < b.indexOf(\":\")) {\n\t\tvar d = b.split(\":\")[1];\n\t\tvar c = b.split(\":\")[0];\n\t\tswitch (d) {\n\t\t  case \"append\":\n\t\t\t$(c).append(a);\n\t\t\tbreak;\n\t\t  case \"prepend\":\n\t\t\t$(c).prepend(a);\n\t\t\tbreak;\n\t\t  case \"before\":\n\t\t\t$(a).insertBefore(c);\n\t\t\tbreak;\n\t\t  case \"after\":\n\t\t\t$(a).insertAfter(c);\n\t\t\tbreak;\n\t\t  default:\n\t\t\t$(c).html(a)\n\t\t}\n\t  } else $(b).html(a)\n\t\t};\n  \n\tWSAIO.alterHTML = function (a, b) {\n\t  if (\"undefined\" === typeof b) return isError(\"Selector was not defined.\");\n\t  if (-1 < b.indexOf(\":\")) {\n\t\tvar d = b.split(\":\")[1];\n\t\tvar c = b.split(\":\")[0];\n\t\tswitch (d) {\n\t\t  case \"append\":\n\t\t\t$(c).append(a);\n\t\t\tbreak;\n\t\t  case \"prepend\":\n\t\t\t$(c).prepend(a);\n\t\t\tbreak;\n\t\t  case \"before\":\n\t\t\t$(a).insertBefore(c);\n\t\t\tbreak;\n\t\t  case \"after\":\n\t\t\t$(a).insertAfter(c);\n\t\t\tbreak;\n\t\t  default:\n\t\t\t$(c).html(a)\n\t\t}\n\t  } else $(b).html(a)\n\t\t};\n\tWSAIO.DiscountCode.addForm = function (html, selector) {\n\t\tif(typeof WSAIO.net_disable_default_checkout == 'undefined' || !WSAIO.net_disable_default_checkout){\n\t  if($(\".wsaio_coupon_box\").length > 0){\n\t\t$(\".wsaio_coupon_box\").remove();\n\t  }\n\t  if($(\".wsaio_coupon_link\").length > 0){\n\t\t$(\".wsaio_coupon_link\").remove();\n\t  }\n\n\t  if(typeof selector == 'undefined' && $ws.discount_code_field_selector == ''){\n\t\t$ws.alterHTML(html || $ws.discount_code_form_html,WSAIO.subtotal_selector.split(':')[0]+':after');\n\t  }else{\n\t\t$ws.alterHTML(html || $ws.discount_code_form_html, selector || $ws.discount_code_field_selector);\n\t\tif(typeof WSAIO.show_drawer_coupon != 'undefined' && WSAIO.show_drawer_coupon){\n            $ws.alterHTML(html || $ws.discount_code_form_html,$ws.discount_code_link_selector+':after');\n\t\t}else{\n\t\t\t$ws.alterHTML(WSAIO.coupon_code_link_html,$ws.discount_code_link_selector+':after');\n\t\t}\n\t  }\n\t}\n\t}\n  \n\tWSAIO.DiscountCode.toggle = function (state) {\n\t  if ('undefined' === typeof state) var state = 'show';\n\t  if ($ws.discount_code_field_selector.indexOf(':') > -1) {\n\t\t(state === 'show' ? ($($ws.discount_code_field_selector.split(\":\")[0]).show()) : ($($ws.discount_code_field_selector.split(\":\")[0]).hide()));\n\t  } else {\n\t\t(state === 'show' ? ($($ws.discount_code_field_selector).show()) : ($($ws.discount_code_field_selector).hide()));\n\t  }\n\t}\n  \n\tWSAIO.checkCustomer = function (type, tags, excluded) {\n\t  if (WSAIO.debugger) debugger;\n\t  switch (type) {\n\t\tcase 'has_tag':\n\t\t  if ($ws.customer.id) {\n\t\t\tvar isTag_all = tags.indexOf(\"all\");\n\t\t\tvar isTag_has_account = tags.indexOf(\"has_account\");\n\t\t\tvar isTag = [];\n\t\t\ttry {\n\t\t\t  isTag = tags.map(function (tag) {\n\t\t\t\treturn $ws.customer.tags.findIndex(function (tag2) {\n\t\t\t\t  return tag.toLowerCase() === tag2\n\t\t\t\t}) > -1\n\t\t\t  });\n\t\t\t} catch (error) {}\n\t\t\tif (isTag.indexOf(true) > -1) {\n\t\t\t  $ws.applied_tag = tags[isTag.indexOf(true)];\n\t\t\t  $ws.applied_tag_array.push(tags[isTag.indexOf(true)]);\n\t\t\t  return isTag.indexOf(true) > -1\n\t\t\t} else if (isTag_all > -1) {\n\t\t\t\t$ws.applied_tag_array.push('all');\n\t\t\t  return true;\n\t\t\t} else if (isTag_has_account > -1) {\n\t\t\t\t$ws.applied_tag_array.push('has_account');\n\t\t\t  $ws.applied_tag = 'has_account';\n\t\t\t  return true;\n\t\t\t} else {\n\t\t\t  return isTag.indexOf(true) > -1\n\t\t\t}\n\t\t  } else {\n\t\t\tvar isTag_all = tags.indexOf(\"all\");\n\t\t\tvar isTag_no_account = tags.indexOf(\"no_account\");\n\t\t\tif (isTag_no_account > -1) {\n\t\t\t  $ws.applied_tag = 'no_account';\n\t\t\t  $ws.applied_tag_array.push('no_account');\n\t\t\t  return true;\n\t\t\t} else if (isTag_all > -1) {\n\t\t\t\t$ws.applied_tag_array.push('all');\n\t\t\t  return true;\n\t\t\t} else {\n\t\t\t  return false;\n\t\t\t}\n\t\t  }\n\t\t  \n\t\t  break;\n\t\tcase 'has_account':\n\t\t  $ws.applied_tag = \"has_account\";\n\t\t  $ws.applied_tag_array.push(\"has_account\");\n\t\t  if ($ws.customer.id) {\n\t\t\tvar isTag = [];\n\t\t\ttry {\n\t\t\t  isTag = excluded.map(function (tag) {\n\t\t\t\treturn $ws.customer.tags.findIndex(function (tag2) {\n\t\t\t\t  return tag.toLowerCase() === tag2\n\t\t\t\t}) > -1\n\t\t\t  });\n\t\t\t} catch (error) {}\n\t\t\tif (isTag.indexOf(true) > -1) {\n\t\t\t  $ws.excluded_tag = excluded[isTag.indexOf(true)];\n\t\t\t}\n\t\t\treturn isTag.indexOf(true) === -1\n\t\t  } else return false;\n\t\t  break;\n\t\tcase 'no_account':\n\t\t  $ws.applied_tag = \"no_account\";\n\t\t  $ws.applied_tag_array.push(\"no_account\");\n\t\t  return $ws.customer.id ? false : true;\n\t\t  break;\n\t\tcase 'all':\n\t\t  if ($ws.customer.id) {\n\t\t\tvar isTag = [];\n\t\t\ttry {\n\t\t\t  isTag = excluded.map(function (tag) {\n\t\t\t\treturn $ws.customer.tags.findIndex(function (tag2) {\n\t\t\t\t  return tag.toLowerCase() === tag2\n\t\t\t\t}) > -1\n\t\t\t  });\n\t\t\t} catch (error) {}\n\t\t\tif (isTag.indexOf(true) > -1) {\n\t\t\t  $ws.excluded_tag = excluded[isTag.indexOf(true)];\n\t\t\t}\n\t\t\treturn isTag.indexOf(true) === -1\n\t\t  } else return true;\n\t\t  break;\n\t\tdefault:\n\t\t  if ($ws.customer.id) {\n\t\t\tvar isTag = [];\n\t\t\ttry {\n\t\t\t  isTag = excluded.map(function (tag) {\n\t\t\t\treturn $ws.customer.tags.findIndex(function (tag2) {\n\t\t\t\t  return tag.toLowerCase() === tag2\n\t\t\t\t}) > -1\n\t\t\t  });\n\t\t\t} catch (error) {}\n\t\t\tif (isTag.indexOf(true) > -1) {\n\t\t\t  $ws.excluded_tag = excluded[isTag.indexOf(true)];\n\t\t\t}\n\t\t\treturn isTag.indexOf(true) === -1\n\t\t  } else return true;\n\t\t  break;\n\t  }\n\t};\n  \n    WSAIO.remove_comparePrice = function(html){\n        try{\n            var jqWrapped = $('<div>'+html+'<\/div>');\n            jqWrapped.find('.money').filter((i, x)=>\/%compare_at_price%\/gi.test(x.innerText) ).removeClass('money');\n            return jqWrapped.html();\n        }catch(e){\n            console.log(e);\n            return html;\n        }\n    }\n  \n\tWSAIO.checkAppliesTo = function (params) {\n\t  if (WSAIO.debugger) debugger;\n\t  switch (params.type) {\n\t\tcase \"products\":\n\t\t  params.rule[\"priority\"] = 1;\n\t\t  applies_to_products();\n\t\t  break;\n\t\tcase \"collections\":\n\t\t  params.rule[\"priority\"] = 2;\n\t\t  applies_to_collections();\n\t\t  break;\n\t\tcase \"entire_store\":\n\t\t  var excluded = false;\n\t\t  if (params.rule.exclude_products && params.rule.exclude_products.findIndex(function (x) {\n\t\t\treturn x.handle == $ws.selected_product.handle\n\t\t  }) > -1) {\n\t\t\texcluded = true;\n\t\t  }\n\t\t  if (params.rule.exclude_collections && params.rule.exclude_collections.length > 0) {\n\t\t\tfor (var xzy = 0; xzy < $ws.product_in_collects.length; xzy++) {\n\t\t\t  var item = $ws.product_in_collects[xzy];\n\t\t\t  if (-1 < params.rule.exclude_collections.findIndex(function (x) {\n\t\t\t\treturn x.id == item.collection_id\n\t\t\t  })) {\n\t\t\t\tif ($ws.selected_product.id == item.product_id) {\n\t\t\t\t  excluded = true;\n\t\t\t\t}\n\t\t\t  }\n\t\t\t}\n\t\t  }\n\t\t  if (!excluded) {\n\t\t\tparams.rule[\"priority\"] = 3;\n\t\t\tif (params.module === \"regular_discount\") {\n\t\t\t  $ws.productRd.push(params.rule);\n\t\t\t} else {\n\t\t\t  $ws.productVd.push(params.rule);\n\t\t\t}\n\t\t  }\n\t\t  break;\n\t\tdefault:\n\t\t  params.rule[\"priority\"] = 3;\n\t\t  if (params.module === \"regular_discount\") {\n\t\t\t$ws.productRd.push(params.rule);\n\t\t  } else {\n\t\t\t$ws.productVd.push(params.rule);\n\t\t  }\n\t\t  break;\n\t  }\n  \n\t  function applies_to_products() {\n\t\tif (WSAIO.debugger) debugger;\n\t\t\/\/ Apply only if selected_product_id was defined.\n\t\tif ('undefined' !== typeof $ws.selected_product.handle || 'undefined' !== typeof $ws.selected_product.id) {\n\t\t  var isFound = params.rule.products.findIndex(function (x) {\n\t\t\treturn (x.handle === $ws.selected_product.handle || x.id == $ws.selected_product.id)\n\t\t  })\n\t\t  if (isFound > -1) {\n\t\t\tif (params.module === \"regular_discount\") {\n\t\t\t  if (params.rule.products[isFound].variant_level === true) {\n\t\t\t\t$ws.productRd = [];\n\t\t\t  }\n\t\t\t  $ws.productRd.push(params.rule);\n\t\t\t} else {\n\t\t\t  if (params.rule.products[isFound].variant_level === true) {\n\t\t\t\t$ws.productVd = [];\n\t\t\t  }\n\t\t\t  $ws.productVd.push(params.rule);\n\t\t\t}\n\t\t  }\n\t\t} else {\n\t\t  isError(\"Selected product handle is not defined.\");\n\t\t}\n\t  }\n  \n\t  function applies_to_collections() {\n\t\tif (WSAIO.debugger) debugger;\n\t\tvar isFound = [false];\n\t\t\/\/ if selected_product_id is defined\n\t\tif ($ws.selected_product.handle) {\n\t\t  var excluded = false;\n\t\t  if (params.rule.exclude_products && params.rule.exclude_products.findIndex(function (x) {\n\t\t\treturn x.handle == $ws.selected_product.handle\n\t\t  }) > -1) {\n\t\t\texcluded = true;\n\t\t  }\n\t\t  if (!excluded) {\n\t\t\tisFound = params.rule.collections.map(function (collection, i) {\n\t\t\t  return -1 < ($ws.product_in_collects.findIndex(function (x) {\n\t\t\t\treturn (x.product_handle == $ws.selected_product.handle || x.product_id == $ws.selected_product.id) && x.collection_id == collection.id\n\t\t\t  }))\n\t\t\t});\n\t\t\tif (isFound.indexOf(true) > -1) {\n\t\t\t  if (params.module === \"regular_discount\") {\n\t\t\t\t$ws.productRd.push(params.rule);\n\t\t\t  } else {\n\t\t\t\t$ws.productVd.push(params.rule);\n\t\t\t  }\n\t\t\t}\n\t\t  }\n\t\t}\n\t\t\/\/ if only selected_collection.id is defined.\n\t\telse if ($ws.template === \"collection\" && $ws.selected_collection.id) {\n\t\t  \/\/ $ws.selected_collection.id (if template is collection then this id contains current collection id, otherwise null). for other case\n\t\t  isFound = params.rule.collections.map(function (collection, i) {\n\t\t\treturn collection.id == $ws.selected_collection.id;\n\t\t  });\n\t\t  if (isFound.indexOf(true) > -1) {\n\t\t\tif (params.module === \"regular_discount\") {\n\t\t\t  $ws.productRd.push(params.rule);\n\t\t\t} else {\n\t\t\t  $ws.productVd.push(params.rule);\n\t\t\t}\n\t\t  }\n\t\t} else {\n\t\t  isError(\"Missing either product's id or collection's id or template is not set for collections\");\n\t\t}\n\t  }\n\t  if (params.module === \"regular_discount\") {\n\t\tif ($ws.productRd && $ws.productRd.length > 1) {\n\t\t  if (-1 < $ws.productRd.findIndex(function (z) {\n\t\t\treturn z.individual_product === true\n\t\t  })) {\n\t\t\t$ws.productRd = $ws.productRd.filter(function (x) {\n\t\t\t  return x.individual_product === true\n\t\t\t});\n\t\t  } else if (-1 < $ws.productRd.findIndex(function (z) {\n\t\t\treturn z.customer_group === 'has_tag'\n\t\t  })) {\n\t\t\t$ws.productRd = $ws.productRd.filter(function (x) {\n\t\t\t  return x.customer_group === 'has_tag'\n\t\t\t});\n\t\t  } else if (-1 < $ws.productRd.findIndex(function (z) {\n\t\t\treturn z.customer_group === 'has_tag'\n\t\t  })) {\n\t\t\t$ws.productRd = $ws.productRd.filter(function (x) {\n\t\t\t  return x.customer_group === 'has_tag'\n\t\t\t});\n\t\t  } else if (-1 < $ws.productRd.findIndex(function (z) {\n\t\t\treturn z.customer_group === 'has_account'\n\t\t  })) {\n\t\t\t$ws.productRd = $ws.productRd.filter(function (x) {\n\t\t\t  return x.customer_group === 'has_account'\n\t\t\t});\n\t\t  } else if (-1 < $ws.productRd.findIndex(function (z) {\n\t\t\treturn z.customer_group === 'no_account'\n\t\t  })) {\n\t\t\t$ws.productRd = $ws.productRd.filter(function (x) {\n\t\t\t  return x.customer_group === 'no_account'\n\t\t\t});\n\t\t  }\n\t\t}\n\t  } else {\n\t\tif ($ws.productVd && $ws.productVd.length > 1) {\n\t\t  if (-1 < $ws.productVd.findIndex(function (z) {\n\t\t\treturn z.individual_product === true\n\t\t  })) {\n\t\t\t$ws.productVd = $ws.productVd.filter(function (x) {\n\t\t\t  return x.individual_product === true\n\t\t\t});\n\t\t  } else if (-1 < $ws.productVd.findIndex(function (z) {\n\t\t\treturn z.customer_group === 'has_tag'\n\t\t  })) {\n\t\t\t$ws.productVd = $ws.productVd.filter(function (x) {\n\t\t\t  return x.customer_group === 'has_tag'\n\t\t\t});\n\t\t  } else if (-1 < $ws.productVd.findIndex(function (z) {\n\t\t\treturn z.customer_group === 'has_account'\n\t\t  })) {\n\t\t\t$ws.productVd = $ws.productVd.filter(function (x) {\n\t\t\t  return x.customer_group === 'has_account'\n\t\t\t});\n\t\t  } else if (-1 < $ws.productVd.findIndex(function (z) {\n\t\t\treturn z.customer_group === 'no_account'\n\t\t  })) {\n\t\t\t$ws.productVd = $ws.productVd.filter(function (x) {\n\t\t\t  return x.customer_group === 'no_account'\n\t\t\t});\n\t\t  }\n\t\t}\n\t  }\n\t};\n  \n\t  WSAIO.price_with_unit = function(price){\n\t\t  if(typeof WSAIO.country_currency_code != 'undefined' && typeof WSAIO.customer.default_address.country_code != 'undefined'){\n\t\t\t\tprice = price+' '+WSAIO.country_currency_code[WSAIO.customer.default_address.country_code].split('_')[0];\n\t\t  }else{\n\t\t\tprice = price+' '+Shopify.currency.active;\n\t\t  }\n\t\t  return price;\n\t   };\n\t  WSAIO.change_currency_sign = function(price){\n\t\t\t  if(typeof WSAIO.country_currency_code != 'undefined' && typeof WSAIO.customer.default_address.country_code != 'undefined' && typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1 && typeof WSAIO.market_selected != 'undefined' && typeof WSAIO.customer.default_address.country_code != 'undefined' && (WSAIO.market_selected != WSAIO.customer.default_address.country_code)){\n\t\t\t\t   var character = null;\n\t\t\t  price = price.toString();\n\t\t\t\t   character= price.replace( \/(<([^>]+)>)\/ig, '');\n\t\t\t\t\tcharacter= character.replace(\/\\d.+\/g, '');\n\t\t\t\t\tcharacter= character.replace(\/\\d,+\/g, '')\n\t\t\t\t  price = price.replace(character,WSAIO.country_currency_code[WSAIO.customer.default_address.country_code].split('_')[1])\n\t\t  }\n\t\t  return price;\n\t   }\n\t\n\tWSAIO.volumeDiscount = function (params, callback) {\n\t  if (WSAIO.debugger) debugger;\n\t  if (typeof params === 'function') callback = params;\n\t  if(!params){\n\t\tisError(\"No params provided for volume discount\");\n\t\treturn false;\n\t  }\n\t  if(!params.item_price_selector){\n\t\tisError(\"Item price selector is undefined\");\n\t\treturn false;\n\t  }\n\t  if (WSAIO.isWholesaleCustomer() === false) {\n\t\tif (typeof callback === \"function\") {\n\t\t  return callback({\n\t\t\terror: \"Invalid customer\"\n\t\t  });\n\t\t} else {\n\t\t  return \"Invalid customer\";\n\t\t}\n\t  }\n      var WSAIO_variant_sku_are_same = true;\n\n\t  if($(params.item_price_selector).attr('class') != undefined){\n\t\tif($(params.item_price_selector).attr('class').indexOf('wsaio_') == -1){\n\t\t  $(params.item_price_selector).addClass('wsaio_'+params.product_id)\n\t\t}\n\t  }\n\n\t  if (typeof params.template !== 'undefined' && typeof WSAIO.auto_vat_enable != 'undefined' &&  WSAIO.auto_vat_enable){\n\t\tvar _id = params.product_id;\n\t\tif(WSAIO.template != 'cart' && typeof WSAIO.product_in_collects != 'undefined' && WSAIO.product_in_collects.length != 0){\n\t\t\t var _indx = WSAIO.product_in_collects.findIndex(function(e,r){\n\t\t\t\t return e.product_id == _id;\n\t\t\t });\n\t\t\t if(typeof WSAIO.product_in_collects[_indx] != 'undefined' && typeof WSAIO.product_in_collects[_indx].product_variants != 'undefined'){\n\t\t\t\t var  current_product_variant = WSAIO.product_in_collects[_indx].product_variants;\n\t\t\t\t var _indx_of_variant = current_product_variant.findIndex(function(d,t){\n\t\t\t\t\t return d.id == params.variant_id;\n\t\t\t\t })\n\t\t\t\t WSAIO.selected_variant_taxable = current_product_variant[_indx_of_variant].taxable;\n\t\t\t\t \/\/ if Price set in price adjustment, then no tax include function run\n\t\t\t\t if(typeof WSAIO.tax_settings != 'undefined' && WSAIO.tax_settings.presentment != null && WSAIO.tax_settings.presentment.price_adjustments != null && WSAIO.tax_settings.presentment.price_adjustments.fixed_variant_ids.length && WSAIO.tax_settings.presentment.price_adjustments.fixed_variant_ids.indexOf(current_product_variant[_indx_of_variant].id) > -1){\n\t\t\t\t\tWSAIO.selected_variant_taxable = false;\n\t\t\t\t}\n\t\t\t }\n\t\t }else if(typeof WSAIO.products_with_collections != 'undefined' && WSAIO.products_with_collections.length != 0){\n\t\t\t var _indx = WSAIO.products_with_collections.findIndex(function(e,r){\n\t\t\t\t return e.product_id == _id;\n\t\t\t });\n\t\t\t if(typeof WSAIO.products_with_collections[_indx] != 'undefined' && typeof WSAIO.products_with_collections[_indx].product_variants != 'undefined'){\n\t\t\t\t var  current_product_variant = WSAIO.products_with_collections[_indx].product_variants;\n\t\t\t\t var _indx_of_variant = current_product_variant.findIndex(function(d,t){\n\t\t\t\t\t return d.id == params.variant_id;\n\t\t\t\t })\n\t\t\t\t WSAIO.selected_variant_taxable = current_product_variant[_indx_of_variant].taxable;\n\t\t\t\t \/\/ if Fixed Price set in price adjustment, then no tax include function run\n\t\t\t\t if(typeof WSAIO.tax_settings != 'undefined' && WSAIO.tax_settings.presentment != null && WSAIO.tax_settings.presentment.price_adjustments != null && WSAIO.tax_settings.presentment.price_adjustments.fixed_variant_ids.length && WSAIO.tax_settings.presentment.price_adjustments.fixed_variant_ids.indexOf(current_product_variant[_indx_of_variant].id) > -1){\n\t\t\t\t\tWSAIO.selected_variant_taxable = false;\n\t\t\t\t}\n\t\t\t }\n\t\t }\n   }\n\t  $ws.output = true;\n\t  $ws.remove_duplicate_table = false;\n\t  $ws.selected_variant = JSON.parse(JSON.stringify($ws.current_variant)); \/\/ current variant obj should not change\n\t  $ws.selected_product = JSON.parse(JSON.stringify($ws.current_product)); \/\/ current product obj should not change\n\t  $ws.selected_collection = JSON.parse(JSON.stringify($ws.current_collection)); \/\/ current collection obj should not change\n\t  if (typeof params === 'object') {\n\t\tif (typeof params.product_id !== 'undefined' && params.product_id !== \"default\") $ws.selected_product.id = params.product_id;\n\t\tif (typeof params.product_handle !== 'undefined' && params.product_handle !== \"default\") $ws.selected_product.handle = params.product_handle;\n\t\tif (typeof params.variant_id !== 'undefined' && params.variant_id !== \"default\") $ws.selected_variant.id = params.variant_id;\n\t\tif (typeof params.variant_sku !== 'undefined' && params.variant_sku !== \"default\") $ws.selected_variant.sku = params.variant_sku;\n\t\tif (typeof params.variant_price !== 'undefined' && params.variant_price !== \"default\") $ws.selected_variant.price = params.variant_price;\n\t\tif (typeof params.variant_compare_at_price !== 'undefined' && params.variant_compare_at_price !== \"default\") $ws.selected_variant.compare_at_price = params.variant_compare_at_price;\n\t\tif (typeof params.collection_id !== 'undefined' && params.collection_id !== \"default\") $ws.selected_collection.id = params.collection_id;\n\t\tif (typeof params.output !== 'undefined' && params.output !== \"default\") $ws.output = params.output;\n\t\tif (typeof params.product_parent_grid_selector !== 'undefined' && params.product_parent_grid_selector !== \"default\") $ws.product_qb_table_selector = params.qb_table_selector;\n\t\tif (typeof params.remove_duplicate_table !== 'undefined' && params.remove_duplicate_table !== \"default\") $ws.remove_duplicate_table = params.remove_duplicate_table;\n\t\tif (typeof params.template !== 'undefined' && params.template !== \"default\") $ws.landingTemplate = params.template;\n\t  }\n\t  if ($ws.selected_variant && typeof $ws.selected_variant.price === \"string\" && $ws.selected_variant.price.indexOf(\".\") > -1) {\n\t\t$ws.selected_variant.price = $ws.selected_variant.price.replace('.', '');\n\t  }\n\t  if ($ws.selected_variant && typeof $ws.selected_variant.compare_at_price === \"string\" && $ws.selected_variant.compare_at_price.indexOf(\".\") > -1) {\n\t\t$ws.selected_variant.compare_at_price = $ws.selected_variant.compare_at_price.replace('.', '');\n\t  }\n\t  $ws.productVd = [];\n\n      var hasImportRule = $ws.volume_discounts.some(function(item){\n\t\treturn item.applies_to == \"products\" && item.products.length && item.products[0].id == item.products[0].handle;\n      });\n\n      if(hasImportRule){\n        $ws.volume_discounts.sort(function (a, b) {\n            \/\/ Shifting import rule to end\n            if(b.applies_to == \"products\" || a.applies_to == \"products\"){\n                if(a.products.length && (a.products[0].id == a.products[0].handle)){\n                    return 1;\n                }\n                if(b.products.length && (b.products[0].id == b.products[0].handle)){\n                    return -1;\n                }\n            }\n            return 0;\n        });\n      }\n\t  $ws.applied_tag_array = [];\n\t  \/\/ for loop\n\t  for (var i = 0, len_i = $ws.volume_discounts.length; i < len_i; i++) {\n\t\tvar volume_discount = $ws.volume_discounts[i];\n\t\tif (volume_discount.state !== 'published') continue;\n\t\tif ($ws.checkCustomer(volume_discount.customer_group, volume_discount.tags, volume_discount.tags_excluded) === false) continue;\n\t\tif (volume_discount.schedule_active) {\n\t\t  var _schedule = $ws.getSchedule(volume_discount.schedule);\n\t\t  log(\"_schedule\", _schedule);\n\t\t  if (_schedule.ends_in) {\n\t\t\tif (\n\t\t\t  Number(_schedule.ends_in.years) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.months) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.days) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.hours) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.minutes) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.seconds) <= 0\n\t\t\t) {\n\t\t\t  log(\"This rule was expired\", _schedule);\n\t\t\t  continue;\n\t\t\t}\n\t\t\tif (\n\t\t\t  Number(_schedule.started.years) >= 0 &&\n\t\t\t  Number(_schedule.started.months) >= 0 &&\n\t\t\t  Number(_schedule.started.days) >= 0 &&\n\t\t\t  Number(_schedule.started.hours) >= 0 &&\n\t\t\t  Number(_schedule.started.minutes) >= 0 &&\n\t\t\t  Number(_schedule.started.seconds) >= 0\n\t\t\t) {\n\t\t\t  log(\"This rule was schedules and will be started in\", _schedule);\n\t\t\t  continue;\n\t\t\t}\n\t\t  }\n\t\t}\n\t\t$ws.checkAppliesTo({\n\t\t  \"type\": volume_discount.applies_to,\n\t\t  \"rule\": volume_discount,\n\t\t  \"module\": \"volume_discount\"\n\t\t});\n\t  } \/\/ end for loop\n\t  if ($ws.productVd.length > 0) {\n\t\t\/\/ sort array by priority\n\t\t$ws.productVd.sort(function (a, b) {\n\t\t  return Number(a.priority) - Number(b.priority)\n\t\t});\n\t\t\/\/ if this array contains multiple applies to, then filter by products or by collection, to exclude extra rules.\n\t\tif (-1 < $ws.productVd.findIndex(function (x) {\n\t\t  return x.applies_to == \"products\"\n\t\t})) {\n\t\t  $ws.productVd = $ws.productVd.filter(function (x) {\n\t\t\treturn x.applies_to === \"products\"\n\t\t  });\n\t\t} else if (-1 < $ws.productVd.findIndex(function (x) {\n\t\t  return x.applies_to == \"collections\"\n\t\t})) {\n\t\t  $ws.productVd = $ws.productVd.filter(function (y) {\n\t\t\treturn y.applies_to === \"collections\"\n\t\t  });\n\t\t}\n\t  }\n\t  $ws.product_qb = [];\n\t  $ws.product_volume_discount = {};\n\t  $ws.vd_has_discount = false; \/\/ assume this has\n\t  if ($ws.productVd && $ws.productVd.length > 1) {\n         var rule_date_found = $ws.productVd.some(function(e,r){ return typeof e.created_at !== \"undefined\"});\n        if(rule_date_found){\n          var update_sorted_rule = JSON.parse(JSON.stringify($ws.productVd));\n          try{\n            update_sorted_rule.sort(function(a,b){\n                if(typeof a.created_at === 'undefined' || typeof b.created_at === 'undefined'){\n                  return 0;\n                }else{\n                    if(new Date(a.created_at) > new Date(b.created_at)){\n                       return -1;\n                    }else{\n                        return 1;\n                    }\n                }\n            });\n          } catch(e){ update_sorted_rule = []; }\n  \n          if(update_sorted_rule.length > 0){\n            $ws.productVd = JSON.parse(JSON.stringify(update_sorted_rule));\n          }\n          \n        }\n\t\t$ws.productVd = [$ws.productVd[0]];\n\t  }\n\n      var hasImported_Rule = $ws.productVd.some(function(item){\n        return item.applies_to == \"products\" && item.products.length && item.products[0].id == item.products[0].handle;\n      });\n\t  if(hasImported_Rule || WSAIO.variant_sku_are_same == false){\n\t\tWSAIO_variant_sku_are_same = false;\n\t  }\n\n\t  \/\/ Checking priority of volume discount. \n\t  $ws.volumeDiscountPriority();\n\t  if ($ws.productVd && $ws.productVd.length > 0) {\n\t\t$ws.vd_has_discount = true;\n\t\t\/\/ for loop\n\t\tfor (var j = 0, len_j = $ws.productVd.length; j < len_j; j++) {\n\t\t  var vd_rule = $ws.productVd[j];\n\t\t  if (\"products\" === vd_rule.applies_to && vd_rule.individual_product === true) {\n\t\t\tfor (var kk = 0; kk < vd_rule.products.length; kk++) {\n\t\t\t  var product = vd_rule.products[kk],\n\t\t\t\t  pIndex = kk;\n\t\t\t  if (product.handle === $ws.selected_product.handle || product.id == $ws.selected_product.id) {\n\t\t\t\tif ($ws.product_volume_discount.handle !== product.handle) {\n\t\t\t\t  $ws.product_volume_discount = JSON.parse(JSON.stringify(vd_rule));\n\t\t\t\t  $ws.product_volume_discount[\"product\"] = product;\n\t\t\t\t}\n\t\t\t\tif (product.variant_level) {\n\t\t\t\t  for (var ll = 0; ll < product.variants.length; ll++) {\n\t\t\t\t\tvar variant = product.variants[ll],\n\t\t\t\t\t\tvIndex = ll;\n\t\t\t\t\tvar check_tag = false;\n\t\t\t\t\tvar vIn = variant.tag_options.findIndex(function (apt) {\n\t\t\t\t\t\t$ws.applied_tag_array.findIndex(function (single_tag){\n\t\t\t\t\t\t\tif(apt.name.toString().toLowerCase() == single_tag.toString().toLowerCase())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcheck_tag = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif(check_tag){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (vIn > -1 && (variant.id == $ws.selected_variant.id) || (variant.sku == $ws.selected_variant.sku && !WSAIO_variant_sku_are_same)) {\n\t\t\t\t\t  var v_tag_option = variant.tag_options[vIn];\n\t\t\t\t\t  $ws.product_qb.push({\n\t\t\t\t\t\tname: v_tag_option.name,\n\t\t\t\t\t\tvalue: v_tag_option.value,\n\t\t\t\t\t\ttype: v_tag_option.type,\n\t\t\t\t\t\tqty: variant.quantity\n\t\t\t\t\t  });\n\t\t\t\t\t}\n\t\t\t\t  }\n\t\t\t\t} else {\n\t\t\t\t\tvar check_tag = false;\n\t\t\t\t\tvar pIn = product.tag_options.findIndex(function (apt) {\n\t\t\t\t\t  $ws.applied_tag_array.findIndex(function (single_tag){\n\t\t\t\t\t\t  if(apt.name.toString().toLowerCase() == single_tag.toString().toLowerCase())\n\t\t\t\t\t\t  {\n\t\t\t\t\t\t\t  check_tag = true;\n\t\t\t\t\t\t  }\n\t\t\t\t\t  })\n\t\t\t\t\t  if(check_tag){\n\t\t\t\t\t\t  return true;\n\t\t\t\t\t  }\n\t\t\t\t\t});\n\t\t\t\t  if (pIn > -1) {\n\t\t\t\t\tvar tag_option = product.tag_options[pIn];\n\t\t\t\t\t$ws.product_qb.push({\n\t\t\t\t\t  name: tag_option.name,\n\t\t\t\t\t  value: tag_option.value,\n\t\t\t\t\t  type: tag_option.type,\n\t\t\t\t\t  qty: product.quantity\n\t\t\t\t\t});\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t  }\n\t\t\t}\n\t\t  } else {\n\t\t\tfor (var pp = 0; pp < vd_rule.volume_discount.length; pp++) {\n\t\t\t  var vd = vd_rule.volume_discount[pp],\n\t\t\t\t  vdIndex = pp;\n\t\t\t  $ws.product_qb.push({\n\t\t\t\tname: vd_rule.applies_to,\n\t\t\t\tvalue: vd.value,\n\t\t\t\ttype: vd_rule.discount_type,\n\t\t\t\tqty: vd.qty\n\t\t\t  });\n  \n\t\t\t}\n\t\t\t$ws.product_volume_discount = JSON.parse(JSON.stringify(vd_rule));\n\t\t\tif (vd_rule.applies_to === \"collections\") {\n\t\t\t  $ws.product_volume_discount[\"collections\"] = $ws.product_volume_discount.collections.filter(function (c) {\n\t\t\t\treturn c.id == $ws.selected_collection.id\n\t\t\t  });\n\t\t\t}\n\t\t  }\n\t\t}\n\t  }\n\t  $ws.product_volume_discount[\"volume_discount\"] = JSON.parse(JSON.stringify($ws.product_qb));\n\t  \/\/ if TRUE, app will alter prices. our app will output price and compare at price\n\t  if ($ws.output && $ws.vd_has_discount && (typeof $ws.product_volume_discount.display_option != 'undefined' && $ws.product_volume_discount.display_option != 'no_volume_table')) {\n\t\tif ($ws.landingTemplate === \"product\" || (window.location.href.indexOf('\/pages\/') > -1 && $ws.landingTemplate === \"collection\")) {\n\t\t  \/\/ Remove the table, also check for the quick view\n\t\t  if ($ws.remove_duplicate_table) {\n\t\t\t$(\".wholesale-table\").remove();\n\t\t  }\n\t\t  if (typeof $ws.product_volume_discount === 'undefined') isError(\"Volume discount table could not created. Because the rule is empty or not defined. Reference variable is WSAIO.product_volume_discount.\");\n\t\t  switch ($ws.product_volume_discount.display_option) {\n\t\t\tcase \"detailed_grid\":\n\t\t\t  $ws.detailed_grid_table($ws.product_volume_discount, params);\n\t\t\t  break;\n\t\t\tcase \"basic_grid\":\n\t\t\t  $ws.basic_grid_table($ws.product_volume_discount, params);\n\t\t\t  break;\n\t\t\tcase \"grid_range\":\n\t\t\t  $ws.grid_range_table($ws.product_volume_discount, params);\n\t\t\t  break;\n\t\t\tcase \"detailed_grid_percent\":\n\t\t\t  $ws.detailed_grid_percent_table($ws.product_volume_discount, params);\n\t\t\t  break;\n\t\t\tcase \"percent_grid\":\n\t\t\t  $ws.percent_grid_table($ws.product_volume_discount, params);\n\t\t\t  break;\n\t\t\tcase \"grid_range_alternate\":\n\t\t\t  $ws.grid_range_alternate_table($ws.product_volume_discount, params);\n\t\t\t  break;\n\t\t\tdefault:\n\t\t\t  $ws.grid_range_alternate_table($ws.product_volume_discount, params);\n\t\t\t  break;\n\t\t  }\n\t\t} else {\n\t\t  \/\/ This is used for collection listing page\n\t\t  var value_range = [];\n\t\t  for (var ee = 0; ee < $ws.product_volume_discount.volume_discount.length; ee++) {\n\t\t\tvar v = $ws.product_volume_discount.volume_discount[ee];\n\t\t\tvalue_range.push(Number(v.value));\n\t\t  }\n\t\t  var min = Math.min.apply(null, value_range);\n\t\t  var max = Math.max.apply(null, value_range);\n\t\t  log(\"Min discount: \" + min);\n\t\t  log(\"Max discount: \" + max);\n\t\t  var max_discount_index = $ws.product_volume_discount.volume_discount.findIndex(function (b) {\n\t\t\treturn b.value == max\n\t\t  });\n\t\t  if (max_discount_index > -1) {\n\t\t\tvar max_discount = $ws.product_volume_discount.volume_discount[max_discount_index];\n\t\t\tvar price = Number($ws.mF($ws.selected_variant.price));\n\t\t\tvar discount = $ws.get_discount(price, max_discount.type, max_discount.value);\n\t\t\tif (Number(discount) == 0 || (Number(price) == 0)) {\n\t\t\t  $ws.vd_has_discount = false;\n\t\t\t}\n\t\t\tif ($ws.vd_has_discount) {\n\t\t\t  var compare_at_price = Number($ws.mF($ws.selected_variant.price));\n\t\t\t  if ($ws.general_settings.show_compare_at_price) {\n\t\t\t\tcompare_at_price = Number($ws.mF($ws.selected_variant.compare_at_price));\n\t\t\t  }\n\t\t\t  if (isNaN($ws.selected_variant.compare_at_price) || (Number($ws.selected_variant.compare_at_price) <= Number($ws.selected_variant.price))) {\n\t\t\t\tcompare_at_price = 0;\n\t\t\t\tif ((Number(price) - Number(discount)) < Number(price)) {\n\t\t\t\t  compare_at_price = Number(price).toFixed(2);\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  var regular_price = (Number(price) - Number(discount)).toFixed(2);\n\t\t\t  compare_at_price = Number(compare_at_price).toFixed(2);\n        console.log(regular_price,compare_at_price)\n\t\t\t  if (Number(compare_at_price) < 1) {\n\t\t\t\tcompare_at_price = \"\";\n\t\t\t  }\n\t\t\t  if (!$ws.general_settings.compare_at_price) {\n\t\t\t\tcompare_at_price = \"\";\n\t\t\t  }\n\t\t\t  var html = '';\n\t\t\t  if ($ws.template === 'product') {\n\t\t\t\thtml = $ws.product_price_html;\n\t\t\t  } else {\n\t\t\t\thtml = $ws.hcsr_qb_price_html;\n\t\t\t  }\n              if (!$ws.general_settings.compare_at_price) {\n\t\t\t\tcompare_at_price = \"\";\n\t\t\t\thtml = WSAIO.remove_comparePrice(html);\n\t\t\t  }\n\t\t\t  try {\n\t\t\t\tcompare_at_price = compare_at_price.replace(\"$\", \"$@\");\n\t\t\t\tregular_price = regular_price.replace(\"$\", \"$@\");\n\t\t\t  } catch (e) {\n\t\t\t\tlog(e)\n\t\t\t  }\n\t\t\t  html = html\n\t\t\t  .replace(new RegExp(\"%regular_price%\", \"gi\"), $ws.Lang.from + \" \" + regular_price)\n\t\t\t  .replace(new RegExp(\"%compare_at_price%\", \"gi\"), compare_at_price);\n\t\t\t  try {\n\t\t\t\thtml = html.replace(\/@\/g, '');\n\t\t\t  } catch (e) {\n\t\t\t\tlog(e);\n\t\t\t  }\n\t\t\t  if (params.item_price_selector && $ws.selected_product.id) {\n\t\t\t\t$(params.item_price_selector).html(html)\n\t\t\t  } else {\n\t\t\t\tisError(\"Item price selector is undefined\");\n\t\t\t  }\t\t\t  \n\t\t\t}\n\t\t  }\n\t\t}\n\t\t$ws.saleClock($ws.product_volume_discount, $ws.selected_product, \"vd\");\n\t  }\n\t  if (typeof $ws.callback === 'function') {\n\t\t$ws.callback({\n\t\t  product_volume_discount: $ws.product_volume_discount,\n\t\t  quantity_breaks: $ws.product_qb,\n\t\t  product: $ws.selected_product,\n\t\t  variant: $ws.selected_variant\n\t\t});\n\t  }\n\t  \/\/ response back\n\t  if (typeof callback === 'function') {\n\t\tcallback({\n\t\t  product_volume_discount: $ws.product_volume_discount,\n\t\t  quantity_breaks: $ws.product_qb,\n\t\t  product: $ws.selected_product,\n\t\t  variant: $ws.selected_variant\n\t\t});\n\t  }\n\t  \/\/ end for loop\n\t};\n  \n\tWSAIO.regularDiscount = function (params, callback) {\n\t  if (WSAIO.debugger) debugger;\n\t  if (typeof params === 'function') callback = params;\n\t  if(!params){\n\t\tisError(\"No params provided for regular discount\");\n\t\treturn false;\n\t  }\n\t  if(!params.item_price_selector){\n\t\tisError(\"Item price selector is undefined\");\n\t\treturn false;\n\t  }\n\t  if (WSAIO.isWholesaleCustomer() === false) {\n\t\tif (typeof callback === \"function\") {\n\t\t  return callback({\n\t\t\terror: \"Invalid customer\"\n\t\t  });\n\t\t} else {\n\t\t  return \"Invalid customer\";\n\t\t}\n\t  }\n\t  if($(params.item_price_selector).attr('class') != undefined){\n\t\tif($(params.item_price_selector).attr('class').indexOf('wsaio_') == -1){\n\t\t  $(params.item_price_selector).addClass('wsaio_'+params.product_id)\n\t\t}\n\t  }\n      var WSAIO_variant_sku_are_same = true;\n\t \n      if (typeof params.template !== 'undefined' && typeof WSAIO.auto_vat_enable != 'undefined' &&  WSAIO.auto_vat_enable){\n\t\t   var _id = params.product_id;\n\t\t   if(WSAIO.template != 'cart' && typeof WSAIO.product_in_collects != 'undefined' && WSAIO.product_in_collects.length != 0){\n\t\t\t\tvar _indx = WSAIO.product_in_collects.findIndex(function(e,r){\n\t\t\t\t\treturn e.product_id == _id;\n\t\t\t\t});\n\t\t\t\tif(typeof WSAIO.product_in_collects[_indx] != 'undefined' && typeof WSAIO.product_in_collects[_indx].product_variants != 'undefined'){\n\t\t\t     \tvar  current_product_variant = WSAIO.product_in_collects[_indx].product_variants;\n\t\t\t\t\tvar _indx_of_variant = current_product_variant.findIndex(function(d,t){\n\t\t\t\t\t\treturn d.id == params.variant_id;\n\t\t\t\t\t});\n\t\t\t\t\tWSAIO.selected_variant_taxable = current_product_variant[_indx_of_variant].taxable;\n\t\t\t\t\t\/\/ if Price set in price adjustment, then no tax include function run\n\t\t\t\t\tif(typeof WSAIO.tax_settings != 'undefined' && WSAIO.tax_settings.presentment != null && WSAIO.tax_settings.presentment.price_adjustments != null && WSAIO.tax_settings.presentment.price_adjustments.fixed_variant_ids.length && WSAIO.tax_settings.presentment.price_adjustments.fixed_variant_ids.indexOf(current_product_variant[_indx_of_variant].id) > -1){\n\t\t\t\t\t\tWSAIO.selected_variant_taxable = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else if(typeof WSAIO.products_with_collections != 'undefined' && WSAIO.products_with_collections.length != 0){\n\t\t\t\tvar _indx = WSAIO.products_with_collections.findIndex(function(e,r){\n\t\t\t\t\treturn e.product_id == _id;\n\t\t\t\t});\n\t\t\t\tif(typeof WSAIO.products_with_collections[_indx] != 'undefined' && typeof WSAIO.products_with_collections[_indx].product_variants != 'undefined'){\n\t\t\t\t\tvar  current_product_variant = WSAIO.products_with_collections[_indx].product_variants;\n\t\t\t\t\tvar _indx_of_variant = current_product_variant.findIndex(function(d,t){\n\t\t\t\t\t\treturn d.id == params.variant_id;\n\t\t\t\t\t})\n\t\t\t\t\tWSAIO.selected_variant_taxable = current_product_variant[_indx_of_variant].taxable;\n\t\t\t\t\t\/\/ if Price set in price adjustment, then no tax include function run\n\t\t\t\t\tif(typeof WSAIO.tax_settings != 'undefined' && WSAIO.tax_settings.presentment != null && WSAIO.tax_settings.presentment.price_adjustments != null && WSAIO.tax_settings.presentment.price_adjustments.fixed_variant_ids.length && WSAIO.tax_settings.presentment.price_adjustments.fixed_variant_ids.indexOf(current_product_variant[_indx_of_variant].id) > -1){\n\t\t\t\t\t\tWSAIO.selected_variant_taxable = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n      }\n     \n\t  $ws.output = true;\n\t  $ws.selected_variant = JSON.parse(JSON.stringify($ws.current_variant)); \/\/ current variant obj should not change\n\t  $ws.selected_product = JSON.parse(JSON.stringify($ws.current_product)); \/\/ current product obj should not change\n\t  $ws.selected_collection = JSON.parse(JSON.stringify($ws.current_collection)); \/\/ current collection obj should not change\n\t  if (typeof params === 'object') {\n\t\tif (typeof params.product_id !== 'undefined' && params.product_id !== \"default\") $ws.selected_product.id = params.product_id;\n\t\tif (typeof params.product_handle !== 'undefined' && params.product_handle !== \"default\") $ws.selected_product.handle = params.product_handle;\n\t\tif (typeof params.variant_id !== 'undefined' && params.variant_id !== \"default\") $ws.selected_variant.id = params.variant_id;\n\t\tif (typeof params.variant_sku !== 'undefined' && params.variant_sku !== \"default\") $ws.selected_variant.sku = params.variant_sku;\n\t\tif (typeof params.variant_price !== 'undefined' && params.variant_id !== \"default\") $ws.selected_variant.price = params.variant_price;\n\t\tif (typeof params.variant_compare_at_price !== 'undefined' && params.variant_sku !== \"default\") $ws.selected_variant.compare_at_price = params.variant_compare_at_price;\n\t\tif (typeof params.collection_id !== 'undefined' && params.collection_id !== \"default\") $ws.selected_collection.id = params.collection_id;\n\t\tif (typeof params.output !== 'undefined' && params.output !== \"default\") $ws.output = params.output;\n\t\tif (typeof params.template !== 'undefined' && params.template !== \"default\") $ws.landingTemplate = params.template;\n\t  }\n\t  if ($ws.selected_variant && typeof $ws.selected_variant.price === \"string\" && $ws.selected_variant.price.indexOf(\".\") > -1) {\n\t\t$ws.selected_variant.price = $ws.selected_variant.price.replace('.', '');\n\t  }\n\t  if ($ws.selected_variant && typeof $ws.selected_variant.compare_at_price === \"string\" && $ws.selected_variant.compare_at_price.indexOf(\".\") > -1) {\n\t\t$ws.selected_variant.compare_at_price = $ws.selected_variant.compare_at_price.replace('.', '');\n\t  }\n\t  $ws.productRd = [];\n\n      var hasImportRule = $ws.regular_discounts.some(function(item){\n        return item.applies_to == \"products\" && item.products.length && item.products[0].id == item.products[0].handle;\n      });\n\n\t  if(hasImportRule){\n\t\t$ws.regular_discounts.sort(function (a, b) {\n\t\t\t\/\/ Shifting import rule to end\n\t\t\tif(b.applies_to == \"products\" || a.applies_to == \"products\"){\n\t\t\t\tif(a.products.length && (a.products[0].id == a.products[0].handle)){\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif(b.products.length && (b.products[0].id == b.products[0].handle)){\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 0;\n\t\t});\n\t}\n\n\t  $ws.applied_tag_array = [];\n\t  \/\/ for loop\n\t  for (var i = 0, len_i = $ws.regular_discounts.length; i < len_i; i++) {\n\t\tvar regular_discount = $ws.regular_discounts[i];\n\t\tif (regular_discount.state !== 'published') continue;\n\t\tif ($ws.checkCustomer(regular_discount.customer_group, regular_discount.tags, regular_discount.tags_excluded) === false) continue;\n\t\tif (regular_discount.schedule_active) {\n\t\t  var _schedule = $ws.getSchedule(regular_discount.schedule);\n\t\t  log(\"_schedule\", _schedule);\n\t\t  if (_schedule.ends_in) {\n\t\t\tif (\n\t\t\t  Number(_schedule.ends_in.years) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.months) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.days) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.hours) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.minutes) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.seconds) <= 0\n\t\t\t) {\n\t\t\t  log(\"This rule was expired\", _schedule);\n\t\t\t  continue;\n\t\t\t}\n\t\t\tif (\n\t\t\t  Number(_schedule.started.years) >= 0 &&\n\t\t\t  Number(_schedule.started.months) >= 0 &&\n\t\t\t  Number(_schedule.started.days) >= 0 &&\n\t\t\t  Number(_schedule.started.hours) >= 0 &&\n\t\t\t  Number(_schedule.started.minutes) >= 0 &&\n\t\t\t  Number(_schedule.started.seconds) >= 0\n\t\t\t) {\n\t\t\t  log(\"This rule was schedules and will be started in\", _schedule);\n\t\t\t  continue;\n\t\t\t}\n\t\t  }\n\t\t}\n\t\t$ws.checkAppliesTo({\n\t\t  \"type\": regular_discount.applies_to,\n\t\t  \"rule\": regular_discount,\n\t\t  \"module\": \"regular_discount\"\n\t\t});\n\t  } \/\/ end for loop\n\t  if ($ws.productRd.length > 0) {\n\t\t\/\/ sort array by priority\n\t\t$ws.productRd.sort(function (a, b) {\n\t\t  return Number(a.priority) - Number(b.priority)\n\t\t});\n\t\t\/\/ if this array contains multiple applies to, then filter by products or by collection, to exclude extra rules.\n\t\tif (-1 < $ws.productRd.findIndex(function (x) {\n\t\t  return x.applies_to == \"products\"\n\t\t})) {\n\t\t  $ws.productRd = $ws.productRd.filter(function (x) {\n\t\t\treturn x.applies_to === \"products\"\n\t\t  });\n\t\t} else if (-1 < $ws.productRd.findIndex(function (x) {\n\t\t  return x.applies_to == \"collections\"\n\t\t})) {\n\t\t  $ws.productRd = $ws.productRd.filter(function (y) {\n\t\t\treturn y.applies_to === \"collections\"\n\t\t  });\n\t\t}\n\t  }\n\t  $ws.product_rd_obj = [];\n\t  $ws.product_regular_discount = {};\n\t  $ws.rd_has_discount = false; \/\/ assume this has\n\t  if ($ws.productRd && $ws.productRd.length > 1) {\n        var rule_date_found = $ws.productRd.some(function(e,r){ return typeof e.created_at !== \"undefined\"});\n        if(rule_date_found){\n          var update_sorted_rule = JSON.parse(JSON.stringify($ws.productRd));\n          try{\n            update_sorted_rule.sort(function(a,b){\n                if(typeof a.created_at === 'undefined' || typeof b.created_at === 'undefined'){\n                  return 0;\n                }else{\n                    if(new Date(a.created_at) > new Date(b.created_at)){\n                       return -1;\n                    }else{\n                        return 1;\n                    }\n                }\n            });\n          } catch(e){ update_sorted_rule = []; }\n  \n          if(update_sorted_rule.length > 0){\n            $ws.productRd = JSON.parse(JSON.stringify(update_sorted_rule));\n          }\n          \n        }\n\t\t$ws.productRd = [$ws.productRd[0]];\n\t  }\n\t  \n\t  var hasImported_Rule = $ws.productRd.some(function(item){\n        return item.applies_to == \"products\" && item.products.length && item.products[0].id == item.products[0].handle;\n      });\n      if(hasImported_Rule || WSAIO.variant_sku_are_same == false){\n\t\tWSAIO_variant_sku_are_same = false;\n\t  }\n\n\t  if ($ws.productRd.length > 0) {\n\t\t$ws.rd_has_discount = true;\n\t\t\/\/ for loop\n\t\tfor (var j = 0, len_j = $ws.productRd.length; j < len_j; j++) {\n\t\t  var rd_rule = $ws.productRd[j];\n\t\t  if (\"products\" === rd_rule.applies_to && rd_rule.individual_product === true) {\n\t\t\tfor (var tt = 0; tt < rd_rule.products.length; tt++) {\n\t\t\t  var product = rd_rule.products[tt],\n\t\t\t\t  pIndex = tt;\n\t\t\t  if (product.handle === $ws.selected_product.handle || product.id == $ws.selected_product.id) {\n\t\t\t\tif ($ws.product_regular_discount.handle !== product.handle) {\n\t\t\t\t  $ws.product_regular_discount = JSON.parse(JSON.stringify(rd_rule));\n\t\t\t\t  $ws.product_regular_discount[\"product\"] = product;\n\t\t\t\t}\n\t\t\t\tif (product.variant_level) {\n\t\t\t\t  for (var nn = 0; nn < product.variants.length; nn++) {\n\t\t\t\t\tvar variant = product.variants[nn],\n\t\t\t\t\t\tvIndex = nn;\n\t\t\t\t\t\tvar check_tag = false;\n\t\t\t\t\t\tvar vIn = variant.tag_options.findIndex(function (apt) {\n\t\t\t\t\t\t\t$ws.applied_tag_array.findIndex(function (single_tag){\n\t\t\t\t\t\t\t\tif(apt.name.toString().toLowerCase() == single_tag.toString().toLowerCase())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcheck_tag = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif(check_tag){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\tif (vIn > -1 && (variant.id == $ws.selected_variant.id || (variant.sku == $ws.selected_variant.sku && (!WSAIO_variant_sku_are_same)))) {\n\t\t\t\t\t  var v_tag_option = variant.tag_options[vIn];\n\t\t\t\t\t  $ws.product_rd_obj.push({\n\t\t\t\t\t\tname: v_tag_option.name,\n\t\t\t\t\t\tvalue: v_tag_option.value,\n\t\t\t\t\t\ttype: v_tag_option.type\n\t\t\t\t\t  });\n\t\t\t\t\t}\n\t\t\t\t  }\n\t\t\t\t} else {\n\t\t\t\t\tvar check_tag = false;\n\t\t\t\t\tvar pIn = product.tag_options.findIndex(function (apt) {\n\t\t\t\t\t  $ws.applied_tag_array.findIndex(function (single_tag){\n\t\t\t\t\t\t  if(apt.name.toString().toLowerCase() == single_tag.toString().toLowerCase())\n\t\t\t\t\t\t  {\n\t\t\t\t\t\t\t  check_tag = true;\n\t\t\t\t\t\t  }\n\t\t\t\t\t  })\n\t\t\t\t\t  if(check_tag){\n\t\t\t\t\t\t  return true;\n\t\t\t\t\t  }\n\t\t\t\t\t});\n\t\t\t\t  if (pIn > -1) {\n\t\t\t\t\tvar tag_option = product.tag_options[pIn];\n\t\t\t\t\t$ws.product_rd_obj.push({\n\t\t\t\t\t  name: tag_option.name,\n\t\t\t\t\t  value: tag_option.value,\n\t\t\t\t\t  type: tag_option.type\n\t\t\t\t\t});\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t  }\n\t\t\t}\n\t\t  } else {\n\t\t\tproduct_rd_obj = {\n\t\t\t  name: rd_rule.applies_to,\n\t\t\t  type: rd_rule.discount_type,\n\t\t\t  value: rd_rule.discount_value\n\t\t\t}\n\t\t\t$ws.product_regular_discount = JSON.parse(JSON.stringify(rd_rule));\n\t\t\tif (rd_rule.applies_to === \"collections\") {\n\t\t\t  $ws.product_regular_discount[\"collections\"] = $ws.product_regular_discount.collections.filter(function (c) {\n\t\t\t\treturn c.id == $ws.selected_collection.id\n\t\t\t  });\n\t\t\t}\n\t\t  }\n\t\t}\n\t  }\n      \n\t  $ws.product_regular_discount[\"volume_discount\"] = JSON.parse(JSON.stringify($ws.product_rd_obj));\n\t  \/\/ if TRUE, app will alter prices. our app will output price and compare at price\n\t  var price = Number($ws.mF($ws.selected_variant.price));\n\n\t  \/\/ if customer exampt true, then subtract international tax from original price\n\t  if(WSAIO.customer.id != null && WSAIO.customer.tax_exempt && WSAIO.selected_variant_taxable){\n\t\tif(typeof WSAIO.tax_settings !== \"undefined\" && WSAIO.tax_settings && typeof WSAIO.tax_settings.taxes_included !== \"undefined\" && WSAIO.tax_settings.taxes_included === true &&  typeof WSAIO.tax_settings.auto_configure_tax_inclusivity != 'undefined' && WSAIO.tax_settings.auto_configure_tax_inclusivity && typeof WSAIO.auto_vat_enable != 'undefined' &&  WSAIO.auto_vat_enable){\n\t\t       price = Number($ws.mF($ws.selected_variant.price))\/(1+WSAIO.tax_settings.presentment.tax);\n         }\n\t  }\n\t  if ($ws.product_regular_discount[\"volume_discount\"].length > 0) {\n\t\t$ws.product_regular_discount.discount_type = $ws.product_regular_discount[\"volume_discount\"][0].type;\n\t\t$ws.product_regular_discount.discount_value = $ws.product_regular_discount[\"volume_discount\"][0].value;\n\t  }\n\t  if (typeof $ws.product_regular_discount.discount_type === 'undefined') {\n\t\t$ws.rd_has_discount = !1;\n\t  }\n\t  if (typeof $ws.product_regular_discount.discount_value === 'undefined') {\n\t\t$ws.rd_has_discount = !1;\n\t  }\n\t  var discount = $ws.get_discount(price, $ws.product_regular_discount.discount_type, $ws.product_regular_discount.discount_value);\n\t  if (Number(discount) == 0 || (Number(price) == 0)) {\n\t\t$ws.rd_has_discount = !1;\n\t  }\n\t  if ($ws.rd_has_discount && $ws.output) {\n\t\tvar regular_price = (Number(price) - Number(discount)).toFixed(2);\n\t\tvar compare_at_price = Number($ws.mF($ws.selected_variant.price));\n\t\tif ($ws.general_settings.show_compare_at_price) {\n\t\t  compare_at_price = Number($ws.mF($ws.selected_variant.compare_at_price));\n\t\t}\n\t\tif (isNaN($ws.selected_variant.compare_at_price) || (Number($ws.selected_variant.compare_at_price) <= Number($ws.selected_variant.price))) {\n\t\t  compare_at_price = 0;\n\t\t  if ((Number(price) - Number(discount)) < Number(price)) {\n\t\t\tcompare_at_price = Number(price).toFixed(2);\n\t\t  }\n\t\t}\n\t\tvar html = $ws.hcsr_price_html;\n\t\tvar saved_price_html = $ws.saved_price_in_grid_html;\n\t\t\n\t\tif ($ws.template === 'product') {\n\t\t  html = $ws.product_price_html, saved_price_html = $ws.saved_price_html;\n\t\t}\n\t\tif(html.indexOf('%compare_at_price%') == -1){\n            html = '<del class=\"money\" style=\"padding-right:10px;\">%compare_at_price%<\/del>' + html; \n        }\n\t\tvar total_saved = $ws.saved_amount(compare_at_price, regular_price);\n\t\tsaved_price_html = saved_price_html\n\t\t.replace(new RegExp(\"%saved_amount:price%\", \"gi\"), $ws.formatMoney(Number(total_saved.price)))\n\t\t.replace(new RegExp(\"%saved_amount:percentage%\", \"gi\"), total_saved.percentage);\n\t\t$ws.alterHTML(saved_price_html, $ws.product_saved_amount_selector.replace(\"%id%\", $ws.selected_product.id));\n\t\t$ws.product_regular_discount.total_saved = total_saved;\n\t\t$ws.product_regular_discount.regular_price = (Number(price) - Number(discount)).toFixed(2);\n\t\t$ws.product_regular_discount.compare_at_price = Number(compare_at_price).toFixed(2);\n\t\tvar actual_regularPrice = 0;\n        var excluded_actual_regularPrice = 0;\n\t\tif(WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer()){\n            var exclude_value = (WSAIO.exclude_VAT\/100) + 1;\n            if(typeof QOF_page !== 'undefined' && QOF_page && (typeof WSAIO.QOF_version == 'undefined' || WSAIO.QOF_version == 1)){\n              regular_price = $ws.formatMoney(((Number(price) - Number(discount))\/exclude_value)*100);\n              compare_at_price = $ws.formatMoney(((Number(compare_at_price))\/exclude_value)*100);\n\t\t\t  excluded_actual_regularPrice = $ws.formatMoney(((Number(price) - Number(discount))\/exclude_value)*100);\n\t\t\t  actual_regularPrice = $ws.formatMoney((Number(price) - Number(discount))*100)\n              }else{\n            regular_price = $ws.formatMoney(((Number(price) - Number(discount))\/exclude_value));\n            compare_at_price = $ws.formatMoney(((Number(compare_at_price))\/exclude_value));\n\t\t\texcluded_actual_regularPrice = $ws.formatMoney(((Number(price) - Number(discount))\/exclude_value));\n\t\t\tactual_regularPrice = $ws.formatMoney(Number(price) - Number(discount))\n            }\n          }else{\n              if(typeof QOF_page !== 'undefined' && QOF_page && (typeof WSAIO.QOF_version == 'undefined' || WSAIO.QOF_version == 1)){\n                  regular_price = $ws.formatMoney((Number(price) - Number(discount))*100);\n                  compare_at_price = $ws.formatMoney(Number(compare_at_price)*100);\n              }else{\n                  regular_price = (Number(price) - Number(discount)).toFixed(2);\n                  compare_at_price = Number(compare_at_price).toFixed(2);\n\n                  console.log(regular_price,compare_at_price,'checkkk')\n              }\n       \n          }\n\n\t\tif (Number(compare_at_price) < 1) {\n\t\t  compare_at_price = \"\";\n\t\t}\n\t\tif (!$ws.general_settings.compare_at_price) {\n\t\t  compare_at_price = \"\";\n\t\t}\n\t\ttry {\n\t\t  compare_at_price = compare_at_price.replace(\"$\", \"$@\");\n\t\t  regular_price = regular_price.replace(\"$\", \"$@\");\n\t\t} catch (e) {\n\t\t  log(e)\n\t\t}\n\n\t\tif(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n            regular_price = regular_price+' '+Shopify.currency.active;\n            actual_regularPrice = actual_regularPrice+' '+Shopify.currency.active;\n            excluded_actual_regularPrice = excluded_actual_regularPrice+' '+Shopify.currency.active;\n            if(compare_at_price != \"\"){\n                compare_at_price = compare_at_price+' '+Shopify.currency.active;\n            }\n        }\n\n\t\thtml = html.replace(new RegExp(\"%regular_price%\", \"gi\"), regular_price)\n\t\t.replace(new RegExp(\"%compare_at_price%\", \"gi\"), compare_at_price);\n\t\tif ($ws.landingTemplate !== \"product\" && $ws.landingTemplate !== \"cart\") {\n\t\t  html = html\n\t\t  .replace(new RegExp(\"%regular_price%\", \"gi\"), regular_price)\n\t\t  .replace(new RegExp(\"%compare_at_price%\", \"gi\"), compare_at_price);\n\t\t}\n\t\ttry {\n\t\t  $(params.item_price_selector).removeClass(\"empty\");\n\t\t} catch (e) {}\n\t\ttry {\n\t\t  html = html.replace(\/@\/g, '');\n\t\t} catch (e) {\n\t\t  log(e);\n\t\t}\n\t\tif($(params.item_price_selector).hasClass(\"wsdapp\")){\n\t\t  log(\"Discount already has been applied on this item\");\n\t\t}\n\t\telse{\n            if(WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer() && typeof WSAIO.excludePrice_design != 'undefined' && WSAIO.excludePrice_design == 'without-crossout'){\n               html = '<div class=\"wsaio_vat_price\"> <div class=\"money\">'+actual_regularPrice+'<\/div> <div class=\"money\">'+excluded_actual_regularPrice+'<span class=\"wsaio_excl\" style=\"font-size:10px;padding-left: 4px;\">(Excl. Tax)<\/span> <\/div> <\/div>'\n               $(params.item_price_selector).html(html);\n            }else{\n                $(params.item_price_selector).html(html);\n            }\n\t\t    $(params.item_price_selector).addClass(\"wsdapp\");\n\t\t}\n\t\t$ws.saleClock($ws.product_regular_discount, $ws.selected_product, \"rd\");\n\t  }\n\t  \/\/ response back\n\t  if (typeof callback === 'function') {\n\t\tcallback({\n\t\t  product_regular_discount: $ws.product_regular_discount,\n\t\t  regular_discounts: $ws.product_rd_obj,\n\t\t  product: $ws.selected_product,\n\t\t  variant: $ws.selected_variant,\n\t\t  ws_discount: discount\n\t\t});\n\t  }\n\t  if (typeof $ws.callback === 'function') {\n\t\t$ws.callback({\n\t\t  product_regular_discount: $ws.product_regular_discount,\n\t\t  regular_discounts: $ws.product_rd_obj,\n\t\t  product: $ws.selected_product,\n\t\t  variant: $ws.selected_variant,\n\t\t  ws_discount: discount\n\t\t});\n\t  }\n\t};\n  \n\tWSAIO.cartLevelDiscount = function () {\n\t  var is_cld = false;\n\t  if (WSAIO.cart_ld_discounts && WSAIO.cart_ld_discounts.length) {\n\t\tfor (var cld_index = 0; cld_index < WSAIO.cart_ld_discounts.length; cld_index++) {\n\t\t  var rule_item = WSAIO.cart_ld_discounts[cld_index];\n\t\t  if (rule_item.state != 'published') continue;\n\t\t  if ($ws.checkCustomer(rule_item.customer_group, rule_item.tags, rule_item.tags_excluded) === false) continue;\n\t\t  is_cld = true;\n\t\t  break;\n\t\t}\n\t  }\n\t  return is_cld;\n\t}\n  \n\tWSAIO.Volume_disocunted_price = function(qty){\n\t  if(typeof current_product != 'undefined' && current_product != null){\n\t  var selected_variant_index = current_product.variants.findIndex(function (a) {\n\t\treturn a.id == selected_variant_id\n\t  });\n\t  var Total_quantity = qty;\n\t  var compare_row = 0;\n\t  try{\n\t  WSAIO.productDiscount({\n\t\ttemplate:'product',\n\t\titem_price_selector: $('.demo'),\n\t\tproduct_id: current_product.id,\n\t\tproduct_handle: current_product.handle,\n\t\tvariant_id: current_product.variants[selected_variant_index].id,\n\t\tvariant_sku: current_product.variants[selected_variant_index].sku,\n\t\tvariant_price: current_product.variants[selected_variant_index].price,\n\t\tvariant_compare_at_price: current_product.variants[selected_variant_index].compare_at_price\n\t  },function(ee){\n\t\tvar volume_applied = ee.volume_discount.quantity_breaks.length;\n\t\tvar volume_table_Values = [];\n  \n\t\tif(volume_applied > 0){\n\t\t  volume_table_Values = ee.volume_discount.quantity_breaks;\n\t\t  volume_table_Values = volume_table_Values.filter(function(elem,i){\n\t\t\treturn elem.value != '' || elem.value != 0;\n\t      });  \n\t\t  if(Total_quantity >= Number(volume_table_Values[0].qty)){\n\t\t\t$(volume_table_Values).each(function(e){\n\t\t\t\tif(Total_quantity >= Number(volume_table_Values[e].qty) && Number(volume_table_Values[e].value) != 0 && Number(volume_table_Values[e].value) != ''){\n\t\t\t\t  compare_row = e;\n\t\t\t\t}\n\t\t\t}) \n\t\t\tvar compare = 0;\n\t\t\tvar Volume_applied_price = 0;\n\t\t\tvar actual_regularPrice = 0;\n\t\t\tvar excluded_actual_regularPrice = 0;\n              var check_compare = 0, check_applied_discount = 0;\n              if(WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer()){\n                var exclude_value = (WSAIO.exclude_VAT\/100) + 1;\n                Volume_applied_price = $ws.formatMoney(((Number(current_product.variants[selected_variant_index].price\/100)-Number(WSAIO.get_discount(current_product.variants[selected_variant_index].price\/100,volume_table_Values[compare_row].type,volume_table_Values[compare_row].value)))\/exclude_value));\n                compare = $ws.formatMoney(((current_product.variants[selected_variant_index].price)\/exclude_value)\/100);\n                check_compare = ((current_product.variants[selected_variant_index].price)\/exclude_value)\/100;\n                check_applied_discount = (Number(current_product.variants[selected_variant_index].price\/100)-Number(WSAIO.get_discount(current_product.variants[selected_variant_index].price\/100,volume_table_Values[compare_row].type,volume_table_Values[compare_row].value)))\/exclude_value;\n                actual_regularPrice = $ws.formatMoney(((Number(current_product.variants[selected_variant_index].price\/100)-Number(WSAIO.get_discount(current_product.variants[selected_variant_index].price\/100,volume_table_Values[compare_row].type,volume_table_Values[compare_row].value)))))\n                excluded_actual_regularPrice = $ws.formatMoney(((Number(current_product.variants[selected_variant_index].price\/100)-Number(WSAIO.get_discount(current_product.variants[selected_variant_index].price\/100,volume_table_Values[compare_row].type,volume_table_Values[compare_row].value)))\/exclude_value))\n              }else{\n\t\t\t\tvar price = Number(current_product.variants[selected_variant_index].price\/100);\n\t\t\t\t\/\/ if customer exampt true, then subtract international tax from original price\n\t\t\t\t\n\t\t\t\tif(WSAIO.customer.id != null && WSAIO.customer.tax_exempt && WSAIO.selected_variant_taxable){\n\t\t\t\t\tif(typeof WSAIO.tax_settings !== \"undefined\" && WSAIO.tax_settings && typeof WSAIO.tax_settings.taxes_included !== \"undefined\" && WSAIO.tax_settings.taxes_included === true && typeof WSAIO.tax_settings.auto_configure_tax_inclusivity != 'undefined' && WSAIO.tax_settings.auto_configure_tax_inclusivity && typeof WSAIO.auto_vat_enable != 'undefined' &&  WSAIO.auto_vat_enable){\n\t\t\t\t\t\t\tprice = price\/(1+WSAIO.tax_settings.presentment.tax);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tVolume_applied_price = $ws.formatMoney((price-Number(WSAIO.get_discount(current_product.variants[selected_variant_index].price\/100,volume_table_Values[compare_row].type,volume_table_Values[compare_row].value))));\n                compare = $ws.formatMoney((current_product.variants[selected_variant_index].price)\/100);\n                check_compare = (current_product.variants[selected_variant_index].price)\/100;\n                check_applied_discount = (Number(current_product.variants[selected_variant_index].price\/100)-Number(WSAIO.get_discount(current_product.variants[selected_variant_index].price\/100,volume_table_Values[compare_row].type,volume_table_Values[compare_row].value)));\n                if(Volume_applied_price == compare && current_product.variants[selected_variant_index].compare_at_price != undefined){\n                  compare = $ws.formatMoney(((current_product.variants[selected_variant_index].compare_at_price)\/100).toFixed(2));\n                  check_compare = (current_product.variants[selected_variant_index].compare_at_price)\/100;\n                }\n              }\n              var html = WSAIO.product_price_html;\n              if (!$ws.general_settings.compare_at_price || Volume_applied_price == compare || check_applied_discount > check_compare) {\n                compare = \"\";\n                html = WSAIO.remove_comparePrice(html);\n              }\n\t\t\tif(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n                Volume_applied_price = Volume_applied_price+' '+Shopify.currency.active;\n                actual_regularPrice = actual_regularPrice+' '+Shopify.currency.active;\n                excluded_actual_regularPrice = excluded_actual_regularPrice+' '+Shopify.currency.active;\n                    if(compare != \"\"){\n                        compare = compare+' '+Shopify.currency.active;\n                    }\n              }\t\t\t\n\t\t\thtml = html.replace(new RegExp(\"%regular_price%\", \"gi\"), Volume_applied_price)\n\t\t\t.replace(new RegExp(\"%compare_at_price%\", \"gi\"), compare);\n            if(WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer() && typeof WSAIO.excludePrice_design != 'undefined' && WSAIO.excludePrice_design == 'without-crossout'){\n                html = '<div class=\"wsaio_vat_price\"> <div class=\"money\">'+actual_regularPrice+'<\/div> <div class=\"money\">'+excluded_actual_regularPrice+'<span class=\"wsaio_excl\" style=\"font-size:10px;padding-left: 4px;\">(Excl. Tax)<\/span> <\/div> <\/div>'\n                $('.wsaio_'+current_product.id).html(html);\n             }else{\n\t\t\t    $('.wsaio_'+current_product.id).html(html)\n             }\n\t\t  }else{\n  \n\t\t\tif(ee.regular_discount.ws_discount != 0){\n\t\t\t\tvar compare = 0;\n\t\t\t\tvar Volume_applied_price = 0;\n                var actual_regularPrice = 0;\n                var excluded_actual_regularPrice = 0;\n\t\t\t\tvar html = WSAIO.product_price_html;\n\t\t\t\tvar check_compare = 0, check_applied_discount = 0;\n\t\t\t\tif(WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer()){\n\t\t\t\t  var exclude_value = (WSAIO.exclude_VAT\/100) + 1;\n\t\t\t\t  Volume_applied_price = $ws.formatMoney(((ee.regular_discount.product_regular_discount.regular_price)\/exclude_value));\n\t\t\t\t  compare = $ws.formatMoney((((current_product.variants[selected_variant_index].price)\/100)\/exclude_value));\n\t\t\t\t  check_compare = (((current_product.variants[selected_variant_index].price)\/100)\/exclude_value);\n\t\t\t\t  check_applied_discount = ((ee.regular_discount.product_regular_discount.regular_price)\/exclude_value);\n                  actual_regularPrice = $ws.formatMoney(((ee.regular_discount.product_regular_discount.regular_price)))\n                  excluded_actual_regularPrice = $ws.formatMoney(((ee.regular_discount.product_regular_discount.regular_price)\/exclude_value))\n                }else{\n\t\t\t\t  Volume_applied_price = $ws.formatMoney((ee.regular_discount.product_regular_discount.regular_price));\n\t\t\t\t  compare = $ws.formatMoney(((current_product.variants[selected_variant_index].price)\/100));\n\t\t\t\t  check_compare = (current_product.variants[selected_variant_index].price)\/100;\n\t\t\t\t  check_applied_discount = (ee.regular_discount.product_regular_discount.regular_price);\n\t\t\t\t}\n\t\t\t\tif (!$ws.general_settings.compare_at_price || Volume_applied_price == compare || check_compare < check_applied_discount) {\n\t\t\t\t  compare = \"\";\n                  html = WSAIO.remove_comparePrice(html);\n\t\t\t\t}\n\t\t\t\tif(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n\t\t\t\t\tVolume_applied_price = Volume_applied_price+' '+Shopify.currency.active;\n                actual_regularPrice = actual_regularPrice+' '+Shopify.currency.active;\n                excluded_actual_regularPrice = excluded_actual_regularPrice+' '+Shopify.currency.active;\n                    if(compare != \"\"){\n\t\t\t\t\t\t\tcompare = compare+' '+Shopify.currency.active;\n\t\t\t\t\t\t}\n\t\t\t\t  }\n\t\t\t  html = html.replace(new RegExp(\"%regular_price%\", \"gi\"), Volume_applied_price)\n\t\t\t  .replace(new RegExp(\"%compare_at_price%\", \"gi\"), compare);\n\t\t\t    if(WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer() && typeof WSAIO.excludePrice_design != 'undefined' && WSAIO.excludePrice_design == 'without-crossout'){\n                    html = '<div class=\"wsaio_vat_price\"> <div class=\"money\">'+actual_regularPrice+'<\/div> <div class=\"money\">'+excluded_actual_regularPrice+'<span class=\"wsaio_excl\" style=\"font-size:10px;padding-left: 4px;\">(Excl. Tax)<\/span> <\/div> <\/div>'\n                    $('.wsaio_'+current_product.id).html(html);\n                }else{\n                    $('.wsaio_'+current_product.id).html(html)\n                }\n\t\t\t}else{\n                var compare = 0;\n                var Volume_applied_price = 0;\n                var html = WSAIO.product_price_original_html;\n\t\t\t\tVolume_applied_price = $ws.formatMoney(((ee.regular_discount.variant.price)\/100).toFixed(2));\n\t\t\t\tcompare = $ws.formatMoney(((current_product.variants[selected_variant_index].compare_at_price)\/100).toFixed(2));\n\t\t\t\tif (!$ws.general_settings.compare_at_price || current_product.variants[selected_variant_index].compare_at_price == null || current_product.variants[selected_variant_index].compare_at_price == 0 || Volume_applied_price == compare) {\n\t\t\t\t\tcompare = \"\";\n                    html = WSAIO.remove_comparePrice(html);\n\t\t\t\t\t}\n\t\t\t\tif(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n\t\t\t\t\tVolume_applied_price = Volume_applied_price+' '+Shopify.currency.active;\n\t\t\t\t\t\tif(compare != \"\"){\n\t\t\t\t\t\t\tcompare = compare+' '+Shopify.currency.active;\n\t\t\t\t\t\t}\n\t\t\t\t}    \n\t\t\t  html = html.replace(new RegExp(\"%regular_price%\", \"gi\"), Volume_applied_price)\n\t\t\t  .replace(new RegExp(\"%compare_at_price%\", \"gi\"), compare);\n\t\t\t  $('.wsaio_'+current_product.id).html(html)\n\t\t\t}\n\t\t  }\n\t\t}\n\t  });\n\t}catch(e){}\n\t  }\n\t}\n  \n  \n\tWSAIO.variantOriginalPrice = function () {\n\t  if (WSAIO.debugger) debugger;\n\t  var regular_price = $ws.selected_variant.price\/100;\n\t  var compare_at_price = $ws.selected_variant.compare_at_price\/100;\n\t  var html = $ws.hcsr_price_original_html;\n\t  if ($ws.template === 'product') {\n\t\thtml = $ws.product_price_original_html;\n\t  }\n\t  if (Number($ws.selected_variant.price) > Number($ws.selected_variant.compare_at_price)) {\n\t\tcompare_at_price = \"\";\n\t  }\n\t  if ($ws.selected_variant.compare_at_price == null) {\n\t\tcompare_at_price = \"\";\n\t  }\n\t  if (Number($ws.selected_variant.compare_at_price) < 1) {\n\t\tcompare_at_price = \"\";\n\t  }\n\t  if (!$ws.general_settings.compare_at_price) {\n\t\tcompare_at_price = \"\";\n        html = WSAIO.remove_comparePrice(html);\n\t  }\n\t  if(Number($ws.selected_variant.price) == Number($ws.selected_variant.compare_at_price)){\n\t\tcompare_at_price = \"\";\n\t  }\n\t  if (compare_at_price == \"\") {\n\t\ttry {\n\t\t  $($ws.product_price_selector).addClass(\"empty\");\n          html = WSAIO.remove_comparePrice(html);\n\t\t} catch (e) {}\n\t  } else {\n\t\ttry {\n\t\t  $($ws.product_price_selector).removeClass(\"empty\");\n\t\t} catch (e) {}\n\t  }\n  \n\t  try {\n\t\tcompare_at_price = compare_at_price.replace(\"$\", \"$@\");\n\t\tregular_price = regular_price.replace(\"$\", \"$@\");\n\t  } catch (e) {\n\t\tlog(e)\n\t  }\n\n\t  if(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n        regular_price = regular_price+' '+Shopify.currency.active;\n        if(compare_at_price != \"\"){\n            compare_at_price = compare_at_price+' '+Shopify.currency.active;\n        }\n    }\n\t  html = html.replace(new RegExp(\"%regular_price%\", \"gi\"), regular_price).replace(new RegExp(\"%compare_at_price%\", \"gi\"), compare_at_price);\n\t  try {\n\t\thtml = html.replace(\/@\/g, '');\n\t  } catch (e) {\n\t\tlog(e);\n\t  }\n\t  if ($ws.product_price_selector && $ws.selected_product) {\n\t\t$(WSAIO.product_price_selector).html(html);\n\t  } else {\n\t\tisError(\"Selected variant price was not defined. Reference: WSAIO.selected_variant.price\");\n\t  }\n\t};\n  \n\tWSAIO.get_discount = function (price, type, value) {\n\t  if (WSAIO.debugger) debugger;\n      if(type != \"percentage\") value = WSAIO.calculate_tax_price_adjustments(value);     \n\t  if (type !== \"percentage\" && value && $ws.Currency && ($ws.Currency.rates && $ws.Currency.storeCurrency)) {\n\t\tif ($ws.ccr && !isNaN($ws.ccr)) {\n\t\t  value = Number(Number(Number(value) * Number($ws.ccr)).toFixed(2));\n\t\t} else {\n\t\t  value = $ws.Currency.convert(value, $ws.Currency.storeCurrency, $ws.Currency.selectedCurrency);\n\t\t}\n\t  }\n\t  var d = 0;\n\t  switch (type) {\n\t\tcase \"percentage\":\n\t\t\td = ((Number(price) * Number(value)) \/ 100).toFixed(2);\n\t\t  break;\n\t\tcase \"price_discount\":\n\t\t  if (Number(price) < Number(value)) {\n\t\t\td = Number(price);\n\t\t  } else {\n\t\t\td = Number(value);\n\t\t  }\n\t\t  break;\n\t\tcase \"fixed_price\":\n\t\t  if (Number(price) <= Number(value)) {\n\t\t\td = 0;\n\t\t  } else {\n\t\t\td = Number(price) - Number(value);\n\t\t  }\n\t\t  break;\n\t\tdefault:\n\t\t  log(\"Invalid discount type. Valid values are percentage, price_discount and fixed_price.\");\n\t\t  break;\n\t  }\n\t  return Number(d).toFixed(2);\n\t};\n  \n\twindow.HandleQty=function(){\n  \n\t\t\/* Selector of qty *\/\n\t\tvar selector = WSAIO.current_product_qty_input_selector;\n\t\n\t\t\/* Callback: for native change event *\/\n\t\tvar changeListener=function(e){\n\t\n\t\t  \/\/ Trigger change callback\n\t\t  HandleQty.change(e.target);\n\t\t};\n\t\n\t\t\/* Setup an observer *\/\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, \"value\");\n\t\tvar originalSet = descriptor.set;\n\t\n\t\t\/* define our own setter (Will call default setter) *\/\n\t\tdescriptor.set = function(input) {\n\t\t  originalSet.apply(this,arguments);\n\t\n\t\t  \/\/ Trigger change callback\n\t\t  HandleQty.change(this);\n\t\t}\n\t\n\t\t\/* Will add listerners *\/ \n\t\tvar init_module=function(){\n\t\n\t\t  \/* Attach event to every selector *\/\n\t\t  var elements = document.querySelectorAll(selector);\n\t\t  if(elements.length > 0){\n\t\t\t$(elements).each(function(i){\n\t\t\t\t  var el = elements[i];\n\t\t\t\t  \/* Will capture 60% of the events (mostly trigger upon exec \"el.val({value})\" ) *\/\n\t\t\t\t  el.removeEventListener(\"change\", changeListener);\n\t\t\t\t  el.addEventListener(\"change\", changeListener);\n\t\t\n\t\t\t\t  \/* Will capture remaining 40% of the events (mostly trigger by \"el.value={value}\" ) *\/\n\t\t\t\t  Object.defineProperty(el, \"value\", descriptor);\n\t\t\t\t});\n\t\t  }\n\t\t}\n\t\n\t\treturn {\n\t\t  \/* Main Callback *\/\n\t\t  change:function(el){\n\t\t\tWSAIO.Volume_disocunted_price(el.value)\n\t\t  },\n\t\n\t\t  \/\/ So it can be called dynamically\n\t\t  init:init_module\n\t\t}\n\t  }()\n\t  HandleQty.init();\n  \n\t\n\t\n\t\n\tWSAIO.check_eligible_customer = function(){\n\t  var check_tag = false;\n\t  var tagss = WSAIO.exclude_VAT_for.toLowerCase().split(',');\n\t  if(WSAIO.exclude_VAT_for != ''){\n\t\t$(tagss).each(function(e){\n\t\t  $(WSAIO.customer.tags).each(function(ee){\n\t\t\tvar customer_tag = WSAIO.customer.tags[ee].toLowerCase();\n\t\t\tif(customer_tag == tagss[e]){\n\t\t\t  check_tag = true;\n\t\t\t}\n\t\t  })\n\t\t})\n\t  }else{\n\t\tcheck_tag = true;\n\t  }\n\t  return check_tag;\n\t}\n  \n\tWSAIO.get_price = function (rule, vd) {\n\t  if (WSAIO.debugger) debugger;\n\t  if ($ws.selected_variant.price) {\n\t\tvar price = Number($ws.mF($ws.selected_variant.price));\n\t\tvar discount = $ws.get_discount(price, vd.type, vd.value);\n\t\t\/\/ if customer exampt true, then subtract international tax from original price\n\t\tif(WSAIO.customer.id != null && WSAIO.customer.tax_exempt && WSAIO.selected_variant_taxable){\n\t\t\tif(typeof WSAIO.tax_settings !== \"undefined\" && WSAIO.tax_settings && typeof WSAIO.tax_settings.taxes_included !== \"undefined\" && WSAIO.tax_settings.taxes_included === true && typeof WSAIO.tax_settings.auto_configure_tax_inclusivity != 'undefined' && WSAIO.tax_settings.auto_configure_tax_inclusivity && typeof WSAIO.auto_vat_enable != 'undefined' &&  WSAIO.auto_vat_enable){\n\t\t\t\t\tprice = Number($ws.mF($ws.selected_variant.price))\/(1+WSAIO.tax_settings.presentment.tax);\n\t\t\t}\n\t\t}\n\t\tvar wholesale_price = Number(price) - Number(discount);\n\t\ttry {\n\t\t  wholesale_price = Number(wholesale_price).toFixed(2);\n\t\t} catch (e) {\n\t\t  isError(e)\n\t\t}\n\t\tif(WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer()){\n\t\t  var exclude_value = (WSAIO.exclude_VAT\/100) + 1;\n\t\t  wholesale_price = (wholesale_price\/exclude_value);\n\t\t}\n\t\tif(typeof QOF_page !== 'undefined' && QOF_page && (typeof WSAIO.QOF_version == 'undefined' || WSAIO.QOF_version == 1)){\n\t\t  return $ws.formatMoney(wholesale_price*100, $ws.shopInfo.money_format);\n\t  }else{\n\t\t  return $ws.formatMoney(wholesale_price, $ws.shopInfo.money_format);\n\t  }\n\t  \n\t} else {\n\t\tisError(\"Selected variant price was not defined. Reference: WSAIO.selected_variant.price\");\n\t  }\n\t};\n  \n\tWSAIO.get_price_in_percent = function (rule, vd) {\n\t  if (WSAIO.debugger) debugger;\n\t  if ($ws.selected_variant.price) {\n\t\tvar price = Number($ws.mF($ws.selected_variant.price));\n\t\tvar discount = $ws.get_discount(price, vd.type, vd.value);\n\t\tvar perc = Math.round(100 - ((Number(price) - Number(discount)) \/ Number(price)) * 100);\n\t\treturn perc.toString() + '%';\n\t  } else {\n\t\tisError(\"Selected variant price was not defined. Reference: WSAIO.selected_variant.price\")\n\t  }\n\t};\n  \n\tWSAIO.saved_amount = function (original_price, discount_price) {\n\t  if (WSAIO.debugger) debugger;\n\t  if (original_price === null || discount_price === null || isNaN(original_price) || isNaN(discount_price)) {\n\t\treturn {\n\t\t  percentage: \"0%\",\n\t\t  price: \"0\"\n\t\t};\n\t  };\n\t  var price = original_price - discount_price,\n\t\t  percentage = 100 - (discount_price \/ original_price) * 100;\n\t  return {\n\t\tpercentage: Math.round(percentage) + \"%\",\n\t\tprice: Number(price).toFixed(2)\n\t  };\n\t};\n  \n\tWSAIO.volumeDiscountPriority = function () {\n\t  if ($ws.productRd && $ws.productRd.length && $ws.productVd && $ws.productVd.length) {\n\t\ttry {\n\t\t  if ($ws.productRd.findIndex(function (x) {\n\t\t\treturn x.customer_group === 'has_tag'\n\t\t  }) > -1 && $ws.productVd.findIndex(function (x) {\n\t\t\treturn x.customer_group == 'has_tag'\n\t\t  }) === -1) {\n\t\t\t$ws.productVd = [];\n\t\t  }\n\t\t} catch (e) {\n\t\t  isError(e);\n\t\t}\n\t\ttry {\n\t\t  if ($ws.productRd.length > 0 && $ws.productRd.findIndex(function (x) {\n\t\t\treturn x.customer_group === 'all'\n\t\t  }) === -1 && $ws.productVd.findIndex(function (x) {\n\t\t\treturn x.customer_group == 'all'\n\t\t  }) > -1) {\n\t\t\t$ws.productVd = [];\n\t\t  }\n\t\t} catch (e) {\n\t\t  isError(e);\n\t\t}\n\t  }\n\t};\n  \n\t\/\/ Product page Tables grid\n\tWSAIO.detailed_grid_table = function (rule, params) {\n\t  if (WSAIO.debugger) debugger;\n\t  if ('undefined' !== typeof rule.volume_discount && rule.volume_discount.length > 0) {\n\t\tvar table_rows = \"\",table_description = \"\";\n\t\ttry{\n\t\t\ttable_description = \"\"; \/\/ Quantity can be mix of different variants\n\t\t\t}catch(e){console.warn('Volume string formate not supported');}\n\t\tfor (var ff = 0; ff < rule.volume_discount.length; ff++) {\n\t\t  var vd = rule.volume_discount[ff];\n\t\t  if (Number(vd.qty) > 0 && vd.value != '' && $ws.get_price(rule, vd) != undefined ) {\n\t\t\ttable_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n\t\t\t  '<td>' + vd.qty + '<\/td>' +\n\t\t\t  '<td>' + $ws.get_price(rule, vd) + $ws.Lang.each_item + '<\/td>' +\n\t\t\t  '<\/tr>';\n\t\t  }\n\t\t}\n\t\tif(table_description != ''){\n            table_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n            '<td colspan=\"4\" style=\"font-size: 12px; font-style: italic;padding: 2px;\">'+'Note : '\n             + table_description  \n            +'<\/td>' +\n            '<\/tr>';\n        }\n\t\tvar table = '<table id=\"wsaio-volume-discount--table\" class=\"wholesale-table\">' +\n\t\t\t'<thead><tr>' +\n\t\t\t'<th>' + $ws.Lang.buy + ' ' + $ws.Lang.quantity + '<\/th>' +\n\t\t\t'<th>' + $ws.Lang.price + '<\/th>' +\n\t\t\t'<\/tr><\/thead>' +\n\t\t\t'<tbody>' + table_rows + '<\/tbody>' +\n\t\t\t'<\/table>';\n\t\tif (table_rows != \"\") {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).siblings('.wholesale-table').remove()\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).after(table)\n\t\t  }else{\n\t\t\t  $ws.displayTable(table, '.wsaio-qt-'+params.product_id+':same', !0)  \n\t\t\t  $ws.displayTable(table, '.wsaio-vqt-'+params.variant_id+':same', !0)\n\t\t  }\n\t\t} else {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$(\".wholesale-table\").remove();\n\t\t  }\n\t\t}\n\t  } else {\n\t\t$(\".wholesale-table\").remove();\n\t\tisError(\"Volume discount was not configured.\");\n\t  }\n\t};\n  \n\tWSAIO.basic_grid_table = function (rule, params) {\n\t  if (WSAIO.debugger) debugger;\n\t  if ('undefined' !== typeof rule.volume_discount && rule.volume_discount.length > 0) {\n\t\tvar table_rows = \"\",table_description = \"\";\n\t\ttry{\n\t\t\ttable_description = \"\"; \/\/ Quantity can be mix of different variants\n\t\t\t}catch(e){console.warn('Volume string formate not supported');}\n\t\trule.volume_discount.forEach(function (vd, i) {\n\t\t\tif (Number(vd.qty) > 0 && vd.value != '' && $ws.get_price(rule, vd) != undefined) {\n\t\t\ttable_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n\t\t\t  '<td>' + vd.qty + '<\/td>' +\n\t\t\t  '<td>' + $ws.get_price(rule, vd) + $ws.Lang.each_item + '<\/td>' +\n\t\t\t  '<\/tr>';\n\t\t  }\n\t\t});\n\t\tif(table_description != ''){\n            table_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n            '<td colspan=\"4\" style=\"font-size: 12px; font-style: italic;padding: 2px;\">'+'Note : '\n             + table_description  \n            +'<\/td>' +\n            '<\/tr>';\n        }\n\t\tvar table = '<table id=\"wsaio-volume-discount--table\" class=\"wholesale-table\">' +\n\t\t\t'<thead><tr>' +\n\t\t\t'<th>' + $ws.Lang.quantity + '<\/th>' +\n\t\t\t'<th>' + $ws.Lang.price + '<\/th>' +\n\t\t\t'<\/tr><\/thead>' +\n\t\t\t'<tbody>' + table_rows + '<\/tbody>' +\n\t\t\t'<\/table>';\n\t\tif (table_rows != \"\") {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).siblings('.wholesale-table').remove()\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).after(table)\n\t\t  }else{\n\t\t\t  $ws.displayTable(table, '.wsaio-qt-'+params.product_id+':same', !0)  \n\t\t\t  $ws.displayTable(table, '.wsaio-vqt-'+params.variant_id+':same', !0)\n\t\t  }\n\t\t} else {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$(\".wholesale-table\").remove();\n\t\t  }\n\t\t}\n\t  } else {\n\t\t$(\".wholesale-table\").remove();\n\t\tisError(\"Volume discount was not configured.\");\n\t  }\n\t};\n  \n\tWSAIO.grid_range_table = function (rule, params) {\n\t  if (WSAIO.debugger) debugger;\n\t  if ('undefined' !== typeof rule.volume_discount && rule.volume_discount.length > 0) {\n\t\tvar table_rows = \"\",table_description = \"\";\n\t\ttry{\n\t\t\ttable_description = \"\"; \/\/ Quantity can be mix of different variants\n\t\t\t}catch(e){console.warn('Volume string formate not supported');}\n\t\trule.volume_discount.forEach(function (vd, i) {\n\t\t\tif (Number(vd.qty) > 0 && vd.value != '' && $ws.get_price(rule, vd) != undefined) {\n\t\t\tvar next_qty = $ws.Lang.range_so_on;\n\t\t\tif (rule.volume_discount[i + 1]) {\n\t\t\t  next_qty = Number(rule.volume_discount[i + 1].qty) - 1;\n\t\t\t}\n\t\t\ttable_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n\t\t\t  '<td>' + vd.qty + '<\/td>' +\n\t\t\t  '<td>' + next_qty + '<\/td>' +\n\t\t\t  '<td>' + $ws.get_price(rule, vd) + $ws.Lang.each_item + '<\/td>' +\n\t\t\t  '<\/tr>';\n\t\t  }\n\t\t});\n\t\tif(table_description != ''){\n            table_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n            '<td colspan=\"4\" style=\"font-size: 12px; font-style: italic;padding: 2px;\">'+'Note : '\n             + table_description  \n            +'<\/td>' +\n            '<\/tr>';\n        }\n\t\tvar table = '<table id=\"wsaio-volume-discount--table\" class=\"wholesale-table\">' +\n\t\t\t'<thead><tr>' +\n\t\t\t'<th>' + $ws.Lang.minimum_quantity + '<\/th>' +\n\t\t\t'<th>' + $ws.Lang.maximum_quantity + '<\/th>' +\n\t\t\t'<th>' + $ws.Lang.price + '<\/th>' +\n\t\t\t'<\/tr><\/thead>' +\n\t\t\t'<tbody>' + table_rows + '<\/tbody>' +\n\t\t\t'<\/table>';\n\t\tif (table_rows != \"\") {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).siblings('.wholesale-table').remove()\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).after(table)\n\t\t  }else{\n\t\t\t  $ws.displayTable(table, '.wsaio-qt-'+params.product_id+':same', !0)  \n\t\t\t  $ws.displayTable(table, '.wsaio-vqt-'+params.variant_id+':same', !0)\n\t\t  }\n\t\t} else {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$(\".wholesale-table\").remove();\n\t\t  }\n\t\t}\n\t  } else {\n\t\t$(\".wholesale-table\").remove();\n\t\tisError(\"Volume discount was not configured.\");\n\t  }\n\t};\n  \n\tWSAIO.detailed_grid_percent_table = function (rule, params) {\n\t  if (WSAIO.debugger) debugger;\n\t  if ('undefined' !== typeof rule.volume_discount && rule.volume_discount.length > 0) {\n\t\tvar table_rows = \"\",table_description = \"\";\n        try{\n        table_description = \"\"; \/\/ Quantity can be mix of different variants\n        }catch(e){console.warn('Volume string formate not supported');}\n\t\trule.volume_discount.forEach(function (vd, i) {\n\t\t\tif (Number(vd.qty) > 0 && vd.value != '' && $ws.get_price(rule, vd) != undefined) {\n\t\t\ttable_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n\t\t\t  '<td>' + vd.qty + '<\/td>' +\n\t\t\t  '<td>' + $ws.get_price(rule, vd) + $ws.Lang.each_item + '<\/td>' +\n\t\t\t  '<td>' + $ws.get_price_in_percent(rule, vd) + ' ' + $ws.Lang.off + '<\/td>' +\n\t\t\t  '<\/tr>';\n\t\t  }\n\t\t});\n        if(table_description != ''){\n            table_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n            '<td colspan=\"4\" style=\"font-size: 12px; font-style: italic;padding: 2px;\">'+'Note : '\n             + table_description  \n            +'<\/td>' +\n            '<\/tr>';\n        }\n\t\tvar table = '<table id=\"wsaio-volume-discount--table\" class=\"wholesale-table\">' +\n\t\t\t'<thead><tr>' +\n\t\t\t'<th>' + $ws.Lang.quantity + '<\/th>' +\n\t\t\t'<th>' + $ws.Lang.price + '<\/th>' +\n\t\t\t'<th>' + $ws.Lang.discount + '<\/th>' +\n\t\t\t'<\/tr><\/thead>' +\n\t\t\t'<tbody>' + table_rows + '<\/tbody>' +\n\t\t\t'<\/table>';\n\t\tif (table_rows != \"\") {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).siblings('.wholesale-table').remove()\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).after(table)\n\t\t  }else{\n\t\t\t  $ws.displayTable(table, '.wsaio-qt-'+params.product_id+':same', !0)  \n\t\t\t  $ws.displayTable(table, '.wsaio-vqt-'+params.variant_id+':same', !0)\n\t\t  }\n\t\t} else {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$(\".wholesale-table\").remove();\n\t\t  }\n\t\t}\n\t  } else {\n\t\t$(\".wholesale-table\").remove();\n\t\tisError(\"Volume discount was not configured.\");\n\t  }\n\t};\n  \n\tWSAIO.percent_grid_table = function (rule, params) {\n\t  if (WSAIO.debugger) debugger;\n\t  if ('undefined' !== typeof rule.volume_discount && rule.volume_discount.length > 0) {\n\t\tvar table_rows = \"\",table_description = \"\";\n        try{\n        table_description = \"\"; \/\/ Quantity can be mix of different variants\n        }catch(e){console.warn('Volume string formate not supported');}\n\t\trule.volume_discount.forEach(function (vd, i) {\n\t\t\tif (Number(vd.qty) > 0 && vd.value != '' && $ws.get_price_in_percent(rule, vd) != undefined) {\n\t\t\t  table_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n\t\t\t\t'<td>' + $ws.Lang.buy + ' ' + vd.qty + '<\/td>' +\n\t\t\t\t'<td>' + $ws.get_price_in_percent(rule, vd) + ' ' + $ws.Lang.off + '<\/td>' +\n\t\t\t\t'<\/tr>';\n\t\t\t}\n\t\t});\n        if(table_description != ''){\n            table_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n            '<td colspan=\"4\" style=\"font-size: 12px; font-style: italic;padding: 2px;\">'+'Note : '\n             + table_description  \n            +'<\/td>' +\n            '<\/tr>';\n        }\n\t\tvar table = '<table id=\"wsaio-volume-discount--table\" class=\"wholesale-table\">' +\n\t\t\t'<thead><tr>' +\n\t\t\t'<th>' + $ws.Lang.quantity + '<\/th>' +\n\t\t\t'<th>' + $ws.Lang.discount + '<\/th>' +\n\t\t\t'<\/tr><\/thead>' +\n\t\t\t'<tbody>' + table_rows + '<\/tbody>' +\n\t\t\t'<\/table>';\n\t\tif (table_rows != \"\") {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).siblings('.wholesale-table').remove()\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).after(table)\n\t\t  }else{\n\t\t\t  $ws.displayTable(table, '.wsaio-qt-'+params.product_id+':same', !0)  \n\t\t\t  $ws.displayTable(table, '.wsaio-vqt-'+params.variant_id+':same', !0)\n\t\t  }\n\t\t} else {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$(\".wholesale-table\").remove();\n\t\t  }\n\t\t}\n\t  } else {\n\t\t$(\".wholesale-table\").remove();\n\t\tisError(\"Volume discount was not configured.\");\n\t  }\n\t};\n  \n\tWSAIO.grid_range_alternate_table = function (rule, params) {\n\t  if (WSAIO.debugger) debugger;\n\t  if ('undefined' !== typeof rule.volume_discount && rule.volume_discount.length > 0) {\n\t\tvar table_rows = \"\",table_description = \"\";\n        try{\n        table_description = \"\"; \/\/ Quantity can be mix of different variants\n        }catch(e){console.warn('Volume string formate not supported');}\n\t\trule.volume_discount.forEach(function (vd, i) {\n\t\t\tif (Number(vd.qty) > 0 && vd.value != '' && $ws.get_price(rule, vd) != undefined) {\n\t\t\tvar next_qty = $ws.Lang.range_so_on;\n\t\t\tif (rule.volume_discount[i + 1]) {\n\t\t\t  next_qty = Number(rule.volume_discount[i + 1].qty) - 1;\n\t\t\t}\n\t\t\ttable_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n\t\t\t  '<td>' + vd.qty + $ws.Lang.range_seperator + next_qty + '<\/td>' +\n\t\t\t  '<td>' + $ws.get_price(rule, vd) + $ws.Lang.each_item + '<\/td>' +\n\t\t\t  '<\/tr>';\n\t\t  }\n\t\t});\n        if(table_description != ''){\n            table_rows += '<tr class=\"wholesale-grid-table custom-table\">' +\n            '<td colspan=\"4\" style=\"font-size: 12px; font-style: italic;padding: 2px;\">'+'Note : '\n             + table_description  \n            +'<\/td>' +\n            '<\/tr>';\n        }\n\t\tvar table = '<table id=\"wsaio-volume-discount--table\" class=\"wholesale-table\">' +\n\t\t\t'<thead><tr>' +\n\t\t\t'<th>' + $ws.Lang.quantity + '<\/th>' +\n\t\t\t'<th>' + $ws.Lang.price + '<\/th>' +\n\t\t\t'<\/tr><\/thead>' +\n\t\t\t'<tbody>' + table_rows + '<\/tbody>' +\n\t\t\t'<\/table>';\n\t\tif (table_rows != \"\") {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).siblings('.wholesale-table').remove()\n\t\t\t$('.wsaio_'+params.product_id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_inner_qb_table_selector).after(table)\n\t\t  }else{\n\t\t\t  $ws.displayTable(table, '.wsaio-qt-'+params.product_id+':same', !0)  \n\t\t\t  $ws.displayTable(table, '.wsaio-vqt-'+params.variant_id+':same', !0)\n\t\t  }\n\t\t} else {\n\t\t  if($('#Quick-order-form').length == 0){\n\t\t\t$(\".wholesale-table\").remove();\n\t\t  }\n\t\t}\n\t  } else {\n\t\t$(\".wholesale-table\").remove();\n\t\tisError(\"Volume discount was not configured.\");\n\t  }\n\t};\n  \n\tWSAIO.fetchCart = function (callback) {\n\t  var url_string = WSAIO.local_param+\"cart.js\";\n\t  if(typeof Shopify.currency.active != 'undefined' && Shopify.currency.active != null && Shopify.currency.active != ''){\n\t\turl_string = url_string+'?currency='+Shopify.currency.active;\n\t  }\n\t  $ws.ajax({\n\t\ttype: 'GET',\n\t\turl: url_string,\n\t\tcache: false,\n\t\tdataType: 'json',\n\t\tsuccess: function (cart_obj) {\n\t\t  var ws_cart_items = [];\n\t\t  if (cart_obj && cart_obj.items && cart_obj.items.length > 0) {\n\t\t\tcart_obj.items.forEach(function (item, i) {\n\t\t\t  try {\n\t\t\t\tdelete item.product_description;\n\t\t\t\tdelete item.featured_image;\n\t\t\t\tdelete item.url;\n\t\t\t\tdelete item.options_with_values;\n\t\t\t\tdelete item.variant_options;\n\t\t\t\tdelete item.product_description;\n\t\t\t  } catch (error) {\n\t\t\t\tlog(error);\n\t\t\t  }\n\t\t\t  ws_cart_items.push(item);\n\t\t\t});\n\t\t\tcart_obj.items = ws_cart_items;\n\t\t  }\n\t\t  try {\n\t\t\t\"undefined\" === typeof window.waioMOC && (window.waioMOC = {});\n\t\t\t\"undefined\" === typeof waioMOC.cart && (waioMOC.cart = {});\n\t\t\ttry {\n\t\t\t  waioMOC.cart[\"item_count\"] = cart_obj.item_count;\n              waioMOC.cart[\"total_weight\"] = cart_obj.total_weight;\n\t\t\t} catch (e) {}\n\t\t  } catch (e) {}\n\t\t  if (\"function\" === typeof callback) {\n\t\t\tcallback(null, cart_obj);\n\t\t  }\n\t\t},\n\t\terror: function (err) {\n\t\t  if (\"function\" === typeof callback) {\n\t\t\tcallback(err, null);\n\t\t  }\n\t\t}\n\t  });\n\t};\n  \n\tWSAIO.checkout = function () {\n\t  if (WSAIO.debugger) debugger;\n\t  if(WSAIO.isWholesaleCustomer() === false || (window.ZapietCheckoutEnabled === false && typeof ZapietWidgetConfig != 'undefined' && Object.keys(ZapietWidgetConfig).length != 0)){\n\t\tif (typeof callback === \"function\") {\n\t\t  return callback({\n\t\t\terror: \"Invalid customer\"\n\t\t  });\n\t\t} else {\n\t\t  return \"Invalid customer\";\n\t\t}\n\t  }\n\t  sessionStorage.setItem('isCheckoutvisited', 'true');\n\t  $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector+','+WSAIO.netTerm_checkout_selector).addClass('checkout-disabled').attr('disabled','disabled').css({'pointer-events': 'none','cursor': 'progress'})\n\t  $ws.fetchCart(function (error, cart) {\n\t\tif (error) return isError(error);\n\t\telse {\n\t\t  if(WSAIO.subscription_selector != 'false' || WSAIO.subscription_selector != ''){\n\t\t\tvar isAllow = true;\n\t\t\ttry{\n\t\t\t  $(cart.items).each(function(ee){\n\t\t\t\tif(WSAIO.subscription_selector.indexOf(',') == -1){\n\t\t\t\t  var _item = cart.items[ee];\n\t\t\t\t  if(_item[WSAIO.subscription_selector] != undefined  || _item[WSAIO.subscription_selector] != null){\n\t\t\t\t\tisAllow = false;\n\t\t\t\t\treturn $ws.redirectToURL('\/checkout');\n\t\t\t\t  }\n\t\t\t\t}else{\n\t\t\t\t  var selct1 = WSAIO.subscription_selector.split(',')[0]\n\t\t\t\t  var selct2 = WSAIO.subscription_selector.split(',')[1]\n\t\t\t\t  var _item1 = cart.items[ee];\n\t\t\t\t  _item1 = _item1[selct1]\n\t\t\t\t  if(_item1[selct2] != undefined  || _item1[selct2] != null){\n\t\t\t\t\tisAllow = false;\n\t\t\t\t\treturn $ws.redirectToURL('\/checkout');\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t  }).promise().done(function(){\n\t\t\t\tif(isAllow && (parseFloat(WSAIO.discount_response.wholesale_total_discount) > 0 || (typeof WSAIO.discount_response.shipping != 'undefined' && WSAIO.discount_response.shipping.apply_shipping_charges))){\n\t\t\t\t\tgo_checkout()\n\t\t\t\t  }else{\n\t\t\t\t\t  return $ws.redirectToURL('\/checkout');\n\t\t\t\t  }\n\t\t\t  })\n\t\t\t}catch(eee){log(eee)}\n\t\t  }\n\t\t  else{\n            if(parseFloat(WSAIO.discount_response.wholesale_total_discount) > 0 || (typeof WSAIO.discount_response.shipping != 'undefined' && WSAIO.discount_response.shipping.apply_shipping_charges)){\n                go_checkout()\n            }else{\n                return $ws.redirectToURL('\/checkout');\n            }\n\t\t  }\n  \n\t\t  function go_checkout(){   \n\t\t\tif((WSAIO.disable_checkout && (typeof WSAIO.allow_normal_checkout__OC != 'undefined' && WSAIO.allow_normal_checkout__OC))){\n                return $ws.redirectToURL('\/checkout');\n             }  \n\t\t\tvar note_attr = [];\n\t\t\t$.map( cart.attributes, function( val, i ) {\n\t\t\t\tnote_attr.push({\n\t\t\t\t\t\"name\": i,\n\t\t\t\t\t\"value\":val\n\t\t\t\t\t});\n\t\t\t})\n\t\t\tif(WSAIO.PO_field_enable && $('.po_field').val() != ''){\n                note_attr.push({\n\t\t\t\t\t\"name\": 'Purchase Order (PO) Number',\n\t\t\t\t\t\"value\": $('.po_field').val() \n\t\t\t\t\t});\n            }    \n\t\t\tvar reqdata = {\n\t\t\t  \/\/ custom_tax_lines: [],\n\t\t\t  \/\/ custom_shipping_line: {},\n\t\t\t  note_attributes:note_attr,\n\t\t\t  custom_line_items: [],\n\t\t\t  cart: cart,\n\t\t\t  shopInfo: $ws.shopInfo,\n\t\t\t  customer: $ws.customer,\n\t\t\t  user_mode: $ws.user_mode,\n\t\t\t  currency: $ws.shopInfo.currency,\n\t\t\t  discount_code_application: WSAIO.DiscountCode.application,\n\t\t\t  products_with_collections: (WSAIO.product_collections || []),\n\t\t\t};\n\t\t\tif (WSAIO.all_discount_tags && WSAIO.all_discount_tags.length > 0) {\n\t\t\t  try {\n\t\t\t\tif(typeof WSAIO.wholesale_app_tags == 'undefined' || (typeof WSAIO.wholesale_app_tags != 'undefined' && WSAIO.wholesale_app_tags.indexOf('app') > -1) ){\n                    WSAIO.all_discount_tags.push(\"wsaio-app\");\n                }\n\t\t\t\treqdata[\"tags\"] = WSAIO.all_discount_tags.toString();\n\t\t\t  } catch (e) {\n\t\t\t\tlog(e)\n\t\t\t  }\n\t\t\t} else {\n\t\t\t\tif(typeof WSAIO.wholesale_app_tags == 'undefined' || (typeof WSAIO.wholesale_app_tags != 'undefined' && WSAIO.wholesale_app_tags.indexOf('app') > -1) ){\n                    reqdata[\"tags\"] = \"wsaio-app\";\n                }  \n\t\t\t}\n\t\t\tif (cart.note == null) {\n\t\t\t\treqdata[\"note\"] = $(\"[name=note]\").val();\n\t\t\t  }\n\t\t\tif ($ws.variant_sku_are_same) {\n\t\t\t  reqdata[\"variant_sku_are_same\"] = $ws.variant_sku_are_same;\n\t\t\t}\n\t\t\tif ($ws.coupon_expires_after_hours) {\n\t\t\t  reqdata[\"coupon_expires_after_hours\"] = $ws.coupon_expires_after_hours;\n\t\t\t}\n\t\t\tif ($ws.auto_delete_api) {\n\t\t\t  if (localStorage.getItem(\"draft_order_info\") != null) {\n\t\t\t\ttry {\n\t\t\t\t  reqdata[\"prev_draft_order_info\"] = JSON.parse(localStorage.getItem(\"draft_order_info\"));\n\t\t\t\t} catch (e) {\n\t\t\t\t  log(e)\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  if (localStorage.getItem(\"price_rule_info\") != null) {\n\t\t\t\ttry {\n\t\t\t\t  reqdata[\"prev_price_rule_info\"] = JSON.parse(localStorage.getItem(\"price_rule_info\"));\n\t\t\t\t} catch (e) {\n\t\t\t\t  log(e)\n\t\t\t\t}\n\t\t\t  }\n\t\t\t}\n\t\t\t\/\/ if ($ws.customer && $ws.customer.addresses && $ws.customer.addresses[0]) {\n\t\t\t\/\/   reqdata[\"shipping_address\"] = $ws.customer.addresses[0];\n\t\t\t\/\/ }\n\t\t\t\/\/ if($ws.customer && $ws.customer.addresses && $ws.customer.addresses[0]){\n\t\t\t\/\/     reqdata[\"billing_address\"] = $ws.customer.addresses[0];\n\t\t\t\/\/ }\n\t\t\tif ($ws.ccr) {\n\t\t\t  reqdata[\"ccr\"] = $ws.ccr;\n\t\t\t}\n\t\t\t$ws.checkoutRequest(reqdata, function (error, response) {\n\t\t\t\tif(typeof response.wholesale_errors != 'undefined' && response.wholesale_errors.length > 0){\n\t\t\t\t\tfor(var error_key = 0; error_key < response.wholesale_errors.length; error_key++){\n\t\t\t\t\t\tif(response.wholesale_errors[error_key].key == 'email'){\n\t\t\t\t\t\t\tif($('.wsaioserver_error').length == 0){\n\t\t\t\t\t\t\t\t$(WSAIO.checkout_message_selector).after('<div class=\"wsaioserver_error\" style=\"color:red !important;font-size:12px !important;\">Email contains an invalid domain name. Retry to place an order without a discount.<\/div>');\n\t\t\t\t\t\t\t\t$(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector+','+WSAIO.netTerm_checkout_selector).removeClass('checkout-disabled').removeAttr('disabled').css({'pointer-events': 'auto','cursor': 'pointer'})\n                                return false;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\treturn $ws.redirectToURL('\/checkout');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t }\n\t\t\t\tif (error) {\n\t\t\t\tlog(error);\n\t\t\t\t$(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector+','+WSAIO.netTerm_checkout_selector).removeClass('checkout-disabled').removeAttr('disabled').css({'pointer-events': 'auto','cursor': 'pointer'})\n\t\t\t\treturn $ws.redirectToURL('\/checkout?wholesale=error');\n\t\t\t\t} else {\n\t\t\t\tif (typeof $ws.callback === 'function') {\n\t\t\t\t  $ws.callback(response);\n\t\t\t\t}\n\t\t\t\tvar concate_parameter = '\/?';\n\t\t\t\ttry{\n\t\t\t\t\tif(response.checkout_url.indexOf('\/?') > -1){concate_parameter = '&'}\n\t\t\t\t\tif(Shopify.locale != '' && typeof response.discount_code == 'undefined'){\n\t\t\t\t\t  response.checkout_url = response.checkout_url+concate_parameter+'locale='+Shopify.locale;\n\t\t\t\t\t}\n\t\t\t\t\tif(Shopify.locale != '' && typeof response.discount_code != 'undefined'){\n\t\t\t\t\t  response.checkout_url = response.checkout_url.replace('?discount=','?locale='+Shopify.locale+'&discount=')\n\t\t\t\t\t}\n\t\t\t\t  }catch(er){console.warn(er)}\n\t\t\t\ttry{\n\t\t\t\t\tif($ws.customer.id == null && (window.ZapietCheckoutEnabled && typeof ZapietWidgetConfig != 'undefined' && Object.keys(ZapietWidgetConfig).length != 0)){\n\t\t\t\t\tvar checkout_params = Zapiet.Widget.getCheckoutParams();\n\t\t\t\t\tresponse.checkout_url = response.checkout_url+'\/?'+new URLSearchParams(checkout_params);\n\t\t\t\t  }\n\t\t\t\t}catch(err){console.warn(err)}\n\t\t\t\tif(response.checkout_url.indexOf('\/?') > -1){concate_parameter = '&'}\n                    if (response && response.checkout_url) {\n                        try{\n\t\t\t\t\t\t\tif(response.draft_order_info){\n\t\t\t\t\t\t\t\tresponse.checkout_url = response.checkout_url+concate_parameter+'step=contact_information';\n\t\t\t\t\t\t\t}\n                    }catch(e){console.warn(e)}\n                        try{\n                        response.checkout_url = (response.checkout_url).replace((response.checkout_url).split('\/\/')[1].split('\/')[0],window.location.hostname)\n                    }catch(e){console.warn(e)}\n\t\t\t\t  return $ws.redirectToURL(response.checkout_url);\n\t\t\t\t} else {\n\t\t\t\t\t$(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector+','+WSAIO.netTerm_checkout_selector).removeClass('checkout-disabled').removeAttr('disabled').css({'pointer-events': 'auto','cursor': 'pointer'})  \n\t\t\t\t  return $ws.redirectToURL('\/checkout?wholesale=error');\n\t\t\t\t}\n\t\t\t  }\n\t\t\t});\n\t\t  }\n\t\t}\n\t  });\n\t};\n\tWSAIO.getDiscountCode = function (callback) {\n\t  if (WSAIO[\"debugger\"]) {\n\t\tdebugger;\n\t  }\n\t  WSAIO.fetchCart(function (error, cart) {\n\t\tif (error) {\n\t\t  return log(error);\n\t\t}\n\t\tvar note_attr = [];\n\t\tvar dcreqdata = {\n\t\t  note_attributes: note_attr,\n\t\t  cart: cart,\n\t\t  tags: \"wsaio-app\",\n\t\t  note: $(\"[name=note]\").val(),\n\t\t  shopInfo: WSAIO.shopInfo,\n\t\t  customer: WSAIO.customer,\n\t\t  user_mode: WSAIO.user_mode,\n\t\t  currency: WSAIO.shopInfo.currency,\n\t\t  custom_line_items: [],\n\t\t  discount_code_application: WSAIO.DiscountCode.application,\n\t\t  products_with_collections: (WSAIO.product_collections || [])\n\t\t};\n\t\tif ($ws.variant_sku_are_same) {\n\t\t  dcreqdata[\"variant_sku_are_same\"] = $ws.variant_sku_are_same;\n\t\t}\n\t\tif ($ws.coupon_expires_after_hours) {\n\t\t  dcreqdata[\"coupon_expires_after_hours\"] = $ws.coupon_expires_after_hours;\n\t\t}\n\t\tif ($ws.auto_delete_api) {\n\t\t  if (localStorage.getItem(\"draft_order_info\") != null) {\n\t\t\ttry {\n\t\t\t  dcreqdata[\"prev_draft_order_info\"] = JSON.parse(localStorage.getItem(\"draft_order_info\"));\n\t\t\t} catch (e) {\n\t\t\t  log(e)\n\t\t\t}\n\t\t  }\n\t\t  if (localStorage.getItem(\"price_rule_info\") != null) {\n\t\t\ttry {\n\t\t\t  dcreqdata[\"prev_price_rule_info\"] = JSON.parse(localStorage.getItem(\"price_rule_info\"));\n\t\t\t} catch (e) {\n\t\t\t  log(e)\n\t\t\t}\n\t\t  }\n\t\t}\n\t\tif ($ws.ccr) {\n\t\t  dcreqdata[\"ccr\"] = $ws.ccr;\n\t\t}\n\t\tWSAIO.checkoutRequest(dcreqdata, callback);\n\t  });\n\t};\n\tWSAIO.preloadCheckout = function () {\n\t  if (WSAIO.debugger) debugger;\n\t  if (WSAIO.isWholesaleCustomer() === false) {\n\t\tif (typeof callback === \"function\") {\n\t\t  return callback({\n\t\t\terror: \"Invalid customer\"\n\t\t  });\n\t\t} else {\n\t\t  return \"Invalid customer\";\n\t\t}\n\t  }\n\t  window.cart_data = WSAIO.cart_object;\n\t  var cart = WSAIO.cart_object;\n\t  var preqdata = {\n\t\tcart: cart,\n\t\tshopInfo: $ws.shopInfo,\n\t\tcustomer: $ws.customer,\n\t\tuser_mode: $ws.user_mode,\n\t\tdiscount_code_application: WSAIO.DiscountCode.application,\n\t\tproducts_with_collections: (WSAIO.product_collections || [])\n\t  };\n\t  if ($ws.variant_sku_are_same) {\n\t\tpreqdata[\"variant_sku_are_same\"] = $ws.variant_sku_are_same;\n\t  }\n\t  if(typeof WSAIO.wholesale_app_tags != 'undefined' && WSAIO.wholesale_app_tags.indexOf('all') > -1){\n        preqdata[\"fields\"] = 'all';\n      }\n\t  if ($ws.auto_delete_api) {\n\t\tif (localStorage.getItem(\"draft_order_info\") != null) {\n\t\t  try {\n\t\t\tpreqdata[\"prev_draft_order_info\"] = JSON.parse(localStorage.getItem(\"draft_order_info\"));\n\t\t  } catch (e) {\n\t\t\tlog(e)\n\t\t  }\n\t\t}\n\t\tif (localStorage.getItem(\"price_rule_info\") != null) {\n\t\t  try {\n\t\t\tpreqdata[\"prev_price_rule_info\"] = JSON.parse(localStorage.getItem(\"price_rule_info\"));\n\t\t  } catch (e) {\n\t\t\tlog(e)\n\t\t  }\n\t\t}\n\t  }\n\t  $ws.preCheckoutRequest(preqdata, function (error, response) {\n\t\tif (error) {\n\t\t  log(error);\n\t\t} else {\n\t\t  if (typeof $ws.callback === 'function') {\n\t\t\t$ws.callback(response);\n\t\t  }\n\t\t  $ws.discount_response=response;\n\t\t  try{ \n\t\t\tif(typeof WSAIO.pre_response != 'undefined' && typeof WSAIO.pre_response === 'function'){\n\t\t\t  WSAIO.pre_response(response);\n\t\t\t}\n\t\t  }catch(e){}\n\t\t  serverLogging(response);\n\t\t}\n\t  });\n\t};\n\tWSAIO.preCheckout = function () {\n\t\t$('.wsaio_coupon_box,.wsaio_coupon_link,.wsaio--Cart_ld__Message,.wsaio_loader_checkout').remove();\n\t\t$(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector+','+WSAIO.netTerm_checkout_selector).addClass('wsaio_hideCheckout')\n        $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector).after('<div class=\"wsaio_loader_checkout wsaio_loader\"> <div class=\"loading-spinner\"><\/div> <\/div>')\n\t  window.preDiscountData = [];\n\t  if (WSAIO.debugger) debugger;\n\t  if (WSAIO.isWholesaleCustomer() === false) {\n\t\tif(typeof WSAIO.run_checkout != 'undefined'){\n            WSAIO.run_checkout();\n        }\n\t\tif (typeof callback === \"function\") {\n\t\t  return callback({\n\t\t\terror: \"Invalid customer\"\n\t\t  });\n\t\t} else {\n\t\t  return \"Invalid customer\";\n\t\t}\n\t  }\n\t  $ws.fetchCart(function (error, cart) {\n\t\tif (error) return isError(error);\n\t\telse {\n\t\t\twindow.cart_data = cart;\n\t\t  var preqdata = {\n\t\t\tcart: cart,\n\t\t\tshopInfo: $ws.shopInfo,\n\t\t\tcustomer: $ws.customer,\n\t\t\tuser_mode: $ws.user_mode,\n\t\t\tdiscount_code_application: WSAIO.DiscountCode.application,\n\t\t\tproducts_with_collections: (WSAIO.product_collections || [])\n\t\t  };\n\t\t  if ($ws.variant_sku_are_same) {\n\t\t\tpreqdata[\"variant_sku_are_same\"] = $ws.variant_sku_are_same;\n\t\t  }\n\t\t  if(typeof WSAIO.wholesale_app_tags != 'undefined' && WSAIO.wholesale_app_tags.indexOf('all') > -1){\n            preqdata[\"fields\"] = 'all';\n          }\n\t\t  if ($ws.auto_delete_api) {\n\t\t\tif (localStorage.getItem(\"draft_order_info\") != null) {\n\t\t\t  try {\n\t\t\t\tpreqdata[\"prev_draft_order_info\"] = JSON.parse(localStorage.getItem(\"draft_order_info\"));\n\t\t\t  } catch (e) {\n\t\t\t\tlog(e)\n\t\t\t  }\n\t\t\t}\n\t\t\tif (localStorage.getItem(\"price_rule_info\") != null) {\n\t\t\t  try {\n\t\t\t\tpreqdata[\"prev_price_rule_info\"] = JSON.parse(localStorage.getItem(\"price_rule_info\"));\n\t\t\t  } catch (e) {\n\t\t\t\tlog(e)\n\t\t\t  }\n\t\t\t}\n\t\t  }\n\t\t  $ws.preCheckoutRequest(preqdata, function (error, response) {\n\t\t\tif (error) {\n\t\t\t\tlog(error);\n\t\t\t\tif(typeof WSAIO.cartQuantityControllers != 'undefined' && typeof WSAIO.checkout_restriction != 'undefined'){ WSAIO.checkout_restriction(); WSAIO.cartQuantityControllers([],function(e){setTimeout(function(){WSAIO.run_checkout()},1000)});}else{WSAIO.run_checkout()}\n\t\t\t  } else {\n\t\t\t  if (typeof $ws.callback === 'function') {\n\t\t\t\t$ws.callback(response);\n\t\t\t  }\n\t\t\t  $ws.discount_response=response;\n\t\t\t  $ws.preCheckoutResponse(response);\n\t\t\t  if(typeof WSAIO.cartQuantityControllers != 'undefined' && typeof WSAIO.checkout_restriction != 'undefined'){ WSAIO.checkout_restriction(); WSAIO.cartQuantityControllers([],function(e){setTimeout(function(){WSAIO.run_checkout()},1000)});}else{WSAIO.run_checkout()}\n\t\t\t  serverLogging(response);\n\t\t\t}\n\t\t  });\n\t\t}\n\t  });\n\t};\n  \n\tWSAIO.preCheckoutResponse = function (response) {     \n\t  window.preDiscountData = response;\n\t  try{ \n\t\tif(typeof WSAIO.pre_response != 'undefined' && typeof WSAIO.pre_response === 'function'){\n\t\t  WSAIO.pre_response(response)\n\t    }\n\t  }catch(e){}\n\t  if (WSAIO.debugger) debugger;\n\t  if($(\".po_field_div\").length > 0){\n        $('.po_field_div').remove();\n      }\n      try{\n        if(WSAIO.PO_field_enable){\n            if(WSAIO.PO_field_selector == ''){\n                if( $ws.discount_code_field_selector == ''){\n                    WSAIO.PO_field_selector = WSAIO.subtotal_selector.split(':')[0];\n                }else{\n                    WSAIO.PO_field_selector = $ws.discount_code_field_selector.split(':')[0];\n                }\n            }\n\t\t\t$('.Net_PO_field').show();\n            $(WSAIO.PO_field_selector).before(' <div class=\"po_field_div\" style=\"max-width: 330px; width: 100%; margin-left: auto;padding: 10px 0px;\"> <label style=\"text-align: left;\"> Purchase Order (PO) Number <\/label> <input style=\"width: -webkit-fill-available;height: 40px;\" type=\"text\" class=\"po_field\"> <\/div> ');\n        }\n      }catch(e){}\n\t  var i = 0;\n\t  if (response && response.final_discounted_products) {\n\t\ttry {\n\t\t  for (i = 0; i < response.final_discounted_products.length; i++) {\n\t\t\ttry {\n\t\t\t  WSAIO.all_discount_tags.push(response.final_discounted_products[i].appRule.applied_included_tag);\n\t\t\t} catch (e) {}\n\t\t  }\n\t\t} catch (e) {}\n\t  }\n\t  WSAIO.shipping_message_applied = false;\n\t  if (response && response.shipping) {\n\t\t$ws.applied_shipping = response.shipping;\n\t\tif ($ws.applied_shipping.apply_shipping_charges) { \/\/check if shipping applied\n\t\t\tWSAIO.shipping_message_applied = true;\n\t\t  $ws.alterHTML($ws.shipping_message_html.replace('%message%', $ws.applied_shipping.final_ship_rule.message), $ws.shipping_message_selector);\n\t\t}\n\t  }\n\t  if (response) {\n        if(typeof WSAIO.discount_response != 'undefined' && typeof WSAIO.discount_response.wholesale_total_discount != 'undefined' && parseFloat(WSAIO.discount_response.wholesale_total_discount) == 0){\n            WSAIO.exclude_VAT = 0;\n        }\n\t\t$ws.setCartSubtotal(response.original_total_price, response.checkout_price_from_total_price);\n\t\tif (response.line_items) {\n\t\t  $ws.setCartItemsPrice(response.line_items,response.checkout_price_from_total_price);\n\t\t}\n\t\tif (Number(response.wholesale_total_discount) > 0) {\n\t\t  var total_saving = $ws.cart_bulk_saving_html\n\t\t  .replace(\"%saved_amount%\", $ws.formatMoney(response.wholesale_total_discount));\n\t\t  $ws.alterHTML(total_saving, $ws.cart_bulk_saving_selector);\n\t\t}\n\t  }\n\t  if (response.original_total_price) {\n\t\t$ws.cart_total = response.original_total_price;\n\t\t$ws.cart_discounted_total = response.checkout_price_from_total_price;\n\t  }\n\t  if (response && response.cart_level_discount) {\n\t\tif (Number(response.cart_level_discount.cart_discount_amount) > 0) {\n\t\t  var cld_msg = $ws.cart_ld_html\n\t\t  .replace(new RegExp(\"%discount%\", \"gi\"), ($ws.formatMoney(response.cart_level_discount.cart_discount_amount) || \"\"))\n\t\t  .replace(new RegExp(\"%discount%\", \"gi\"), \"\");\n\t\t  $('.wsaio--Cart_ld__Message').remove();\n          if($ws.cart_ld_selector == ''){\n            $(WSAIO.checkout_message_selector).after(cld_msg);\n          }else{\n            $ws.alterHTML(cld_msg, $ws.cart_ld_selector);\n          }\n\t\t}\n\t  }\n\t};\n  \n\tWSAIO.redirectToURL = function (url) {\n\t  if (WSAIO.debugger) debugger;\n\t  if (url) {\n\t\twindow.location.href = url;\n\t  } else {\n\t\tisError(\"Redirect URL was not found!\");\n\t  }\n\t};\n  \n\tWSAIO.checkoutRequest = function (data, callback) {\n\t\ttry{ \n\t\t\t\/* send presentment_currency if enabled *\/\n            if(WSAIO.selectedCurrency() != '' && WSAIO.selectedCurrency() !== 'undefined'){\n\t\t\t\tvar presentment_currency_rate = 0;\n                if(typeof Shopify.currency !== \"undefined\" && (WSAIO.selectedCurrency() == Shopify.currency.active)){\n                    presentment_currency_rate = parseFloat(Shopify.currency.rate) || 1;\n                }else{\n                    presentment_currency_rate =  parseFloat(window.Currency.rates[WSAIO.shopInfo.currency]\/window.Currency.rates[WSAIO.selectedCurrency()]) || 1;\t\t\t\n                }\t\n                \/* Append rate in payload to use in server *\/\n\t\t\t\t\tdata['presentment_currency'] = {\n\t\t\t\t\tcode: WSAIO.selectedCurrency(),\n\t\t\t\t\trate: presentment_currency_rate\n\t\t\t\t\t};\t\t\t\t\n\t\t   }\n\t\t   else{\n\t\t\t\tif(typeof Shopify !== \"undefined\" && typeof Shopify.currency !== \"undefined\"){\n\t\t\t\t\tvar presentment_currency_rate = parseFloat(Shopify.currency.rate) || 1;\n\t\t\t\t\t\t\/* Append rate in payload to use in server *\/\n\t\t\t\t\t\tdata['presentment_currency'] = {\n\t\t\t\t\t\tcode: Shopify.currency.active,\n\t\t\t\t\t\trate: presentment_currency_rate\n\t\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(typeof Shopify !== \"undefined\" && typeof Shopify.country !== \"undefined\"){\n                \/* Append country in payload to use in server *\/\n                data['presentment_country'] = Shopify.country;\n            }\n\n            if(typeof WSAIO.tax_settings !== \"undefined\" && typeof WSAIO.auto_vat_enable !== \"undefined\" && WSAIO.auto_vat_enable){\n                \/* Append tax setting in payload to use in server *\/\n                data['tax_settings'] = WSAIO.tax_settings;\n            }\n\t\t\t\tif((WSAIO.market_selected!= undefined && typeof WSAIO.customer.default_address.country_code != 'undefined' && WSAIO.market_selected != WSAIO.customer.default_address.country_code) && WSAIO.country_currency_code != undefined && typeof WSAIO.Currency.rates[WSAIO.shopInfo.currency] != 'undefined'){\n\t\t\t\tvar rate = 0;\n\t\t\t\t\tvar customer_currency = WSAIO.country_currency_code[WSAIO.customer.default_address.country_code].split('_')[0];\n\t\t\t\tif(customer_currency == WSAIO.shopInfo.currency){\n\t\t\t\t\tdata['presentment_currency'] = {\n\t\t\t\t\t\tcode: WSAIO.shopInfo.currency,\n\t\t\t\t\t\trate: 1\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdata['presentment_country'] = WSAIO.customer.default_address.country_code;\n\t\t\t\t}else{\n\t\t\t\t\t   if(WSAIO.country_currency_code[WSAIO.customer.default_address.country_code].split('_')[0] == Shopify.currency.active){\n\t\t\t\t\t\t   rate = Shopify.currency.rate;\n\t\t\t\t\t} else{\n\t\t\t\t\t\t if(WSAIO.shopInfo.currency == 'USD'){\n\t\t\t\t\t\t   conversion_fee = 1.015;\n\t\t\t\t\t\t }else{\n\t\t\t\t\t\t   conversion_fee = 1.02;\n\t\t\t\t\t\t }\n\t\t\t\t\t\t  rate = ((WSAIO.Currency.rates[WSAIO.shopInfo.currency]\/WSAIO.Currency.rates[customer_currency])*conversion_fee)\n\t\t\t\t\t }\n\t\t\t\t\t  data['presentment_currency'] = {\n\t\t\t\t\t\t  code: customer_currency,\n\t\t\t\t\t\t  rate: rate\n\t\t\t\t\t\t  };\n\t\t\t\t\t\t  data['presentment_country'] = WSAIO.customer.default_address.country_code;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\n\t\t}catch(e){console.log('WSAIO currency rates undefined')}\n\t\t  \n\t\t  $ws.ajax({\n\t\ttype: 'POST',\n\t\turl: $ws.App.checkoutURL + $ws.checkout_version,\n\t\tcache: false,\n\t\tdata: data,\n\t\tsuccess: function (result) {\n\t\t  log(result);\n\t\t  $($ws.checkout_selector).prop('disabled', false);\n\t\t  try {\n\t\t\tif (result && result.price_rule_info) {\n\t\t\t  try {\n\t\t\t\tlocalStorage.setItem(\"price_rule_info\", JSON.stringify(result.price_rule_info))\n\t\t\t  } catch (e) {\n\t\t\t\tlog(e)\n\t\t\t  }\n\t\t\t}\n\t\t\tif (result && result.draft_order_info) {\n\t\t\t  try {\n\t\t\t\tlocalStorage.setItem(\"draft_order_info\", JSON.stringify(result.draft_order_info))\n\t\t\t  } catch (e) {\n\t\t\t\tlog(e)\n\t\t\t  }\n\t\t\t}\n\t\t  } catch (e) {\n\t\t\tlog(e)\n\t\t  }\n\t\t  if (\"function\" === typeof callback) {\n\t\t\tcallback(null, result);\n\t\t  }\n\t\t},\n\t\terror: function (err) {\n\t\t  if (\"function\" === typeof callback) {\n\t\t\tcallback(err, null);\n\t\t  }\n\t\t}\n\t  });\n\t};\n  \n\tWSAIO.preCheckoutRequest = function (data, callback) {\n        try{ \n            \/* send presentment_currency if enabled *\/\n            if(WSAIO.selectedCurrency() != '' && WSAIO.selectedCurrency() !== 'undefined'){\n\t\t\t\tvar presentment_currency_rate = 0;\n                if(typeof Shopify.currency !== \"undefined\" && (WSAIO.selectedCurrency() == Shopify.currency.active)){\n                    presentment_currency_rate = parseFloat(Shopify.currency.rate) || 1;\n                }else{\n                    presentment_currency_rate =  parseFloat(window.Currency.rates[WSAIO.shopInfo.currency]\/window.Currency.rates[WSAIO.selectedCurrency()]) || 1;\t\t\t\n                }\t\n                \/* Append rate in payload to use in server *\/\n\t\t\t\t\tdata['presentment_currency'] = {\n\t\t\t\t\tcode: WSAIO.selectedCurrency(),\n\t\t\t\t\trate: presentment_currency_rate\n\t\t\t\t\t};\t\t\t\t\n\t\t   }\n           else{\n                if(typeof Shopify !== \"undefined\" && typeof Shopify.currency !== \"undefined\"){\n                    var presentment_currency_rate = parseFloat(Shopify.currency.rate) || 1;\n                        \/* Append rate in payload to use in server *\/\n                        data['presentment_currency'] = {\n                        code: Shopify.currency.active,\n                        rate: presentment_currency_rate\n                        };\n                }\n            }\n\t\t\tif(typeof Shopify !== \"undefined\" && typeof Shopify.country !== \"undefined\"){\n                \/* Append country in payload to use in server *\/\n                data['presentment_country'] = Shopify.country;\n            }\n            if(typeof WSAIO.tax_settings !== \"undefined\" && typeof WSAIO.auto_vat_enable != 'undefined' &&  WSAIO.auto_vat_enable){\n                \/* Append tax setting in payload to use in server *\/\n                data['tax_settings'] = WSAIO.tax_settings;\n            }\n\t\t\t\tif((WSAIO.market_selected!= undefined && typeof WSAIO.customer.default_address.country_code != 'undefined' && WSAIO.market_selected != WSAIO.customer.default_address.country_code) && WSAIO.country_currency_code != undefined && typeof WSAIO.Currency.rates[WSAIO.shopInfo.currency] != 'undefined'){\n\t\t\t\tvar rate = 0;\n\t\t\t\t\tvar customer_currency = WSAIO.country_currency_code[WSAIO.customer.default_address.country_code].split('_')[0];\n\t\t\t\tif(customer_currency == WSAIO.shopInfo.currency){\n\t\t\t\t\tdata['presentment_currency'] = {\n\t\t\t\t\t\tcode: WSAIO.shopInfo.currency,\n\t\t\t\t\t\trate: 1\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdata['presentment_country'] = WSAIO.customer.default_address.country_code;\n\t\t\t\t}else{\n\t\t\t\t\t   if(WSAIO.country_currency_code[WSAIO.customer.default_address.country_code].split('_')[0] == Shopify.currency.active){\n\t\t\t\t\t\t   rate = Shopify.currency.rate;\n\t\t\t\t\t} else{\n\t\t\t\t\t\t if(WSAIO.shopInfo.currency == 'USD'){\n\t\t\t\t\t\t   conversion_fee = 1.015;\n\t\t\t\t\t\t }else{\n\t\t\t\t\t\t   conversion_fee = 1.02;\n\t\t\t\t\t\t }\n\t\t\t\t\t\t  rate = ((WSAIO.Currency.rates[WSAIO.shopInfo.currency]\/WSAIO.Currency.rates[customer_currency])*conversion_fee)\n\t\t\t\t\t }\n\t\t\t\t\t  data['presentment_currency'] = {\n\t\t\t\t\t\t  code: customer_currency,\n\t\t\t\t\t\t  rate: rate\n\t\t\t\t\t\t  };\n\t\t\t\t\t\t  data['presentment_country'] = WSAIO.customer.default_address.country_code;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n        }catch(e){console.log('WSAIO currency rates undefined')}\n        \n\t  $ws.ajax({\n\t\ttype: 'POST',\n\t\turl: $ws.App.checkoutURL + $ws.checkout_version + '\/pre',\n\t\tcache: false,\n\t\tdata: data,\n\t\tsuccess: function (result) {\n\t\t  log(result);\n\t\t  if (\"function\" === typeof callback) {\n\t\t\tcallback(null, result);\n\t\t  }\n\t\t},\n\t\terror: function (err) {\n\t\t  if (\"function\" === typeof callback) {\n\t\t\tcallback(err, null);\n\t\t  }\n\t\t}\n\t  });\n\t};\n  \n\tWSAIO.checkoutEventListner = function (params) {\n\t\tif(WSAIO.isWholesaleCustomer() === false || (window.ZapietCheckoutEnabled === false && typeof ZapietWidgetConfig != 'undefined' && Object.keys(ZapietWidgetConfig).length != 0)){\n\t\treturn \"Invalid customer\";\n\t  }\n\t  $($ws.checkout_selector+','+WSAIO.duplicate_checkout_selector).removeAttr(\"disabled\");\n\t  $(document).on('click', $ws.checkout_selector+','+WSAIO.duplicate_checkout_selector, function (e) {\n\t\te.preventDefault();\n\t\te.stopImmediatePropagation();\n\t\te.stopPropagation();\n\t\t$(this).attr(\"disabled\");\n\t\t$(this).find('[name=\"discount\"], [name=\"clear_discount\"]').remove();\n\t\t\/\/ \t\t\t$(this).parents('form').find('[name=\"discount\"], [name=\"clear_discount\"]').remove();\n\t\tlog(\"Wholesale All In One checkout is working.\");\n\t\t$ws.checkout();\n\t  });\n\t};\n  \n\tWSAIO.setCartSubtotal = function (items_subtotal_price, checkout_subtotal) {\n\t  if (WSAIO.debugger) debugger;\n\t  if (typeof items_subtotal_price === 'undefined' || typeof checkout_subtotal === 'undefined') {\n\t\treturn;\n\t  }\n\t  if (Number(items_subtotal_price) < 0 || Number(checkout_subtotal) < 0) {\n\t\treturn;\n\t  }\n\t  var regular_price = Number(checkout_subtotal);\n\t  var compare_at_price = \"\";\n\t  if (Number(items_subtotal_price) > Number(checkout_subtotal)) {\n\t\tcompare_at_price = Number(items_subtotal_price);\n\t  }\n  \n\t  try {\n\t\tcompare_at_price = compare_at_price.replace(\"$\", \"$@\");\n\t\tregular_price = regular_price.replace(\"$\", \"$@\");\n\t  } catch (e) {\n\t\tlog(e)\n\t  }\n  \n\t\t\/\/ change currency sign forcely based on market\n\t\t regular_price = WSAIO.change_currency_sign(regular_price);\n\t\t compare_at_price = WSAIO.change_currency_sign(compare_at_price);\n  console.log(regular_price,compare_at_price,'22222')\n\t\n\t  try {\n\t\tif (typeof WSAIO.enable_netTerm != 'undefined' && WSAIO.enable_netTerm) {\n\t\t\tif (WSAIO.NetTerm_version > 1 || $('.net_address_fields').length == 0) {\n\t\t\t\ttry {\n\t\t\t\t\tvar net_regular = $ws.formatMoney(Number(checkout_subtotal));\n\t\t\t\t} catch (c) {\n\t\t\t\t\tk(c);\n\t\t\t\t}\n\t\t\t\t  if(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n\t\t\t\t\t  net_regular = WSAIO.change_currency_sign(net_regular);\n\t\t\t\t\t  }\n\t\t\t\t  $('.net_prices.net--subtotal').html('<span class=\"net_subtotal_value\" value=\"'+Number(checkout_subtotal)+'\">'+net_regular+'<\/span>');\n\t\t\t\tif ($('.NetTerm_div .net_cartLevel_div').length == 0 && !jQuery.isEmptyObject(cart_level)) {\n\t\t\t\t\t$('.NetTerm_div .applied_coupon_line').after('<div class=\"net_cartLevel_div\"> <p> Additional Discount <span> <\/span> <\/p> <p class=\"net_prices\">-' + $ws.formatMoney(Number(window.preDiscountData.cart_level_discount.cart_discount_amount) * 100) + '<\/p> <\/div>')\n\t\t\t\t}\n\t\t\t\tif ($('.net_mobile_div .net_cartLevel_div').length == 0 && !jQuery.isEmptyObject(cart_level)) {\n\t\t\t\t\t$('.net_mobile_div .applied_coupon_line').after('<div class=\"net_cartLevel_div\"> <p> Additional Discount <span> <\/span> <\/p> <p class=\"net_prices\">-' + $ws.formatMoney(Number(window.preDiscountData.cart_level_discount.cart_discount_amount) * 100) + '<\/p> <\/div>')\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tvar net_regulars = $ws.formatMoney(Number(checkout_subtotal) * 100, $ws.shopInfo.money_format);\n\t\t\t\t\tvar net_regular = net_regulars.replace(\/@\/g, \"\");\n\t\t\t\t\t  var net_value = net_regular;\n\t\t\t\t} catch (c) {\n\t\t\t\t\tconsole.log(c);\n\t\t\t\t}\n\t\t\t\t  if(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n\t\t\t\t\t  net_regular = WSAIO.change_currency_sign(net_regular);\n\t\t\t\t\t  }\n\t\t\t\t  $('.net_prices.net--subtotal').html('<span class=\"net_subtotal_value\" value=\"'+net_value+'\">'+net_regular+'<\/span>')\n\t\t\t}\n\t\t}\n\t} catch (w) { }\n\n    var html = $ws.cart_subtotal_price_html;\n\t  if (!$ws.general_settings.compare_at_price) {\n\t\tcompare_at_price = \"\";\n        html = WSAIO.remove_comparePrice(html);\n\t  }\n\t  if(html.indexOf('%compare_at_price%') == -1){\n        html = '<del class=\"money\" style=\"padding-right:10px;\">%compare_at_price%<\/del>' +html ; \n       }  \n\t   \n\t   if(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n\t\t  regular_price = WSAIO.price_with_unit(regular_price)\n            if(compare_at_price != \"\"){\n\t\t\t\t  compare_at_price = WSAIO.price_with_unit(compare_at_price)\n            }\n      } \n      if(compare_at_price == ''){\n        html = WSAIO.remove_comparePrice(html);\n      }\n\n\t  html = html.replace(\"%regular_price%\", regular_price)\n\t  .replace(\"%compare_at_price%\", compare_at_price);\n\t  try {\n\t\thtml = html.replace(\/@\/g, '');\n\t  } catch (e) {\n\t\tlog(e);\n\t}\n\n\t  $ws.alterHTML(html, $ws.subtotal_selector);\n\n  };\n  \n\tWSAIO.setCartItemsPrice = function (line_items,_subtotal) {\n\t\tif (WSAIO.debugger) debugger;\n        $ws.cart_items_each_selector = $ws.cart_items_each_selector+',.net_item';\n\t\tvar reg_single_price = 0, com_single_price = 0,reg_total_price = 0, com_total_price = 0, vat_subtotal = 0;\n        var actual_regularPrice = 0;\n        var excluded_actual_regularPrice = 0;\n\t\tfor (var itr = 0 ; itr < $ws.cart_items_each_selector.split(',').length; itr++) {\n\t\t\tshuffle_cart_grid_loop($ws.cart_items_each_selector.split(',')[itr])\n\t\t}\n\t\t\n\t\tfunction shuffle_cart_grid_loop(_select){\n\t\t  try{ \n\t\t\t  var Sorted_line_items = [];\n\t\t\t  $(_select).each(function(index, item){\n\t\t\t\tvar _this = $(this);\n\t\t\t\tvar Vid = _this.find('[href*=\"variant=\"]').attr('href')\n\t\t\t\tif(typeof Vid != 'undefined'){\n\t\t\t\t  Vid = Vid.split('variant=')[1]\n\t\t\t\t  Vid = parseInt(Vid.split('&')[0]);\n\t\t\t\t  $(line_items).each(function(_indx){\n\t\t\t\t\tif(line_items[_indx].id == Vid){\n\t\t\t\t\t  line_items[_indx].line = index;\n\t\t\t\t\t  if(-1 == Sorted_line_items.findIndex(function(e){return Vid == e.id})){\n\t\t\t\t\t  Sorted_line_items.push(line_items[_indx])\n\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t  })\n\t\t\t\t}\n\t\t\t  });\n\t\t\t  if(Sorted_line_items.length > 0){ line_items=Sorted_line_items}\n\t\t\t}catch(ee){console.warn(ee)}\n\t\t}\n\t\tvar vat_subtotal = 0;\n\t\tvar vat_applied = false;\n\t\t$('.vat_div').remove();\n\t\tfor(var itr = 0 ; itr < $ws.cart_items_each_selector.split(',').length; itr++){\n\t\t  cart_grid_loop($ws.cart_items_each_selector.split(',')[itr])\n\t\t}\n\t\tfunction cart_grid_loop(_selector){\n\t\t\tactual_regularPrice = 0;\n\t\t\texcluded_actual_regularPrice = 0;\n\t\t  $(_selector).each(function(index, item){\n\t\t\t  if(line_items && line_items.length > 0){\n\t\t  var lineItemIndex = -1;\n\t\t  try {\n\t\t\tlineItemIndex = line_items.findIndex(function(x){ return x.line == index});\n\t\t  } catch (e) {}\n\t\t  log(\"lineItemIndex\",lineItemIndex);\n\t\t  if(item){\n\t\t\tif(lineItemIndex > -1){\n\t\t\t  \/\/ wholesale line item, price and discount info\n\t\t\t  var wsLineItem = line_items[lineItemIndex];\n\t\t\t  \/\/cart line item whoes price gonna changed\n\t\t\t  var cart_item_total_selector = $(item).find($ws.cart_item_total_selector);\n\t\t\t  var cart_item_price_selector = $(item).find($ws.cart_item_price_selector);\n\t\t\t  var cart_item_saved_price_selector = $(item).find($ws.cart_item_saved_price_selector);\n  \n\t\t\t  log(\"cart_item_total_selector\",cart_item_total_selector);\n\t\t\t  log(\"cart_item_price_selector\",cart_item_price_selector);\n  \n\t\t\t  if (typeof wsLineItem.wholesale !== 'undefined') {\n\t\t\t\tvar wholesale = wsLineItem.wholesale;\n\t\t\t\ttry {\n\t\t\t\t  wholesale.item_subtotal_price = wholesale.item_subtotal_price.replace(\"$\", \"$@\");\n\t\t\t\t  wholesale.item_subtotal_compare_at_price = wholesale.item_subtotal_compare_at_price.replace(\"$\", \"$@\");\n\t\t\t\t} catch (e) {\n\t\t\t\t  log(e)\n\t\t\t\t}\n\t\t\t\tif(WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer()){\n\t\t\t\t\tvar exclude_value = (WSAIO.exclude_VAT\/100) + 1;\n\t\t\t\t\tvat_applied = true;\n\t\t\t\t\treg_total_price = (wholesale.item_subtotal_price \/ exclude_value);\n\t\t\t\t\tcom_total_price = (wholesale.item_subtotal_compare_at_price \/ exclude_value);\n\t\t\t\t\tvat_subtotal = vat_subtotal+parseFloat(reg_total_price);\n                    actual_regularPrice = $ws.formatMoney( Number(wholesale.item_subtotal_price))\n                    excluded_actual_regularPrice = $ws.formatMoney(Number(wholesale.item_subtotal_price \/ exclude_value))\n\t\t\t\t}else{\n\t\t\t\t\treg_total_price = wholesale.item_subtotal_price;\n\t\t\t\t\tcom_total_price = wholesale.item_subtotal_compare_at_price;\n\t\t\t\t\tvat_subtotal = vat_subtotal+parseFloat(wholesale.item_subtotal_price);\n                    actual_regularPrice = $ws.formatMoney( Number(wholesale.item_subtotal_price));\n\t\t\t\t\texcluded_actual_regularPrice = 0;\n\t\t\t\t}\n\t\t\t\t  \n\t\t\t\ttry {\n\t\t\t\t\tif (typeof WSAIO.enable_netTerm != 'undefined' && WSAIO.enable_netTerm) {\n\t\t\t\t\t\tif (WSAIO.NetTerm_version > 1 || $('.net_address_fields').length == 0) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tvar net_regular = reg_total_price;\n\t\t\t\t\t\t\t\tvar net_compare = com_total_price;\n\t\t\t\t\t\t\t\tvar net_selector = '.net-item-total-price-' + wsLineItem.key.replace(\":\", \"_\");\n\t\t\t\t\t\t\t\tnet_regular = $ws.formatMoney(Number(net_regular));\n\t\t\t\t\t\t\t\tnet_compare = $ws.formatMoney(Number(net_compare));\n\t\t\t\t\t\t\t} catch (c) {\n\t\t\t\t\t\t\t\tk(c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tvar net_regular = reg_total_price;\n\t\t\t\t\t\t\t\tvar net_compare = com_total_price;\n\t\t\t\t\t\t\t\tvar net_selector = '.net-item-total-price-' + wsLineItem.key.replace(\":\", \"_\");\n\t\t\t\t\t\t\t\tnet_regular = $ws.formatMoney(net_regular * 100);\n\t\t\t\t\t\t\t\tnet_compare = $ws.formatMoney(net_compare * 100);\n\t\t\t\t\t\t\t} catch (c) {\n\t\t\t\t\t\t\t\tconsole.log(c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!$ws.general_settings.compare_at_price || net_compare == net_regular) {\n\t\t\t\t\t\t\tnet_compare = \"\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\t  if(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n\t\t\t\t\t\t\t  net_regular = WSAIO.change_currency_sign(net_regular);\n\t\t\t\t\t\t\t  if(net_compare != \"\"){\n\t\t\t\t\t\t\t  net_compare = WSAIO.change_currency_sign(net_compare);\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t  } \n\t\t\t\t\t\t$(net_selector).html('<s>' + net_compare + '<\/s> <span class=\"order-discount\">' + net_regular + '<\/span>')\n\t\t\t\t\t}\n\t\t\t\t} catch (w) { }\n\t\t\t\tif (!$ws.general_settings.compare_at_price) {\n\t\t\t\t\tcom_total_price = \"\";\n\t\t\t\t}\n\t\t\t\tvar regular_price = Number(reg_total_price);\n                var compare_at_price = Number(com_total_price);\n\t\t\t\tif(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n\t\t\t\t\tregular_price = WSAIO.change_currency_sign(regular_price);\n\t\t\t\t\tactual_regularPrice = WSAIO.change_currency_sign(actual_regularPrice);\n\t\t\t\t\texcluded_actual_regularPrice = WSAIO.change_currency_sign(excluded_actual_regularPrice);\n\t\t\t\t\t   if(compare_at_price != \"\"){\n\t\t\t\t\t\t\tcompare_at_price = WSAIO.change_currency_sign(compare_at_price);\n\t\t\t\t\t\t}\n\t\t\t\t\tregular_price = WSAIO.price_with_unit(regular_price);\n\t\t\t\t\tactual_regularPrice = WSAIO.price_with_unit(actual_regularPrice);\n\t\t\t\t\texcluded_actual_regularPrice = WSAIO.price_with_unit(excluded_actual_regularPrice);\n\t\t\t\t\t   if(compare_at_price != \"\"){\n\t\t\t\t\t\t\tcompare_at_price = WSAIO.price_with_unit(compare_at_price);\n\t\t\t\t\t\t}\n\t\t\t\t}  \n\t\t\t\tvar total_html = '';\n\t\t\t\tif (Number(reg_total_price) < Number(com_total_price)) {\n\n\t\t\t\t\tif($ws.cart_item_total_price_html.indexOf('%compare_at_price%') == -1){\n                        $ws.cart_item_total_price_html = '<del class=\"money\" style=\"padding-right:10px;\">%compare_at_price%<\/del>' +$ws.cart_item_total_price_html ; \n                     }\n\t\t\t\t\t total_html = $ws.cart_item_total_price_html;\n\t\t\t\t\t if (!$ws.general_settings.compare_at_price) {\n\t\t\t\t\t\ttotal_html = WSAIO.remove_comparePrice(total_html);\n\t\t\t\t\t}\n\t\t\t\t\ttotal_html = total_html.replace(\"%regular_price%\", regular_price)\n\t\t\t\t\t .replace(\"%compare_at_price%\", compare_at_price);\n\t\t\t } else {\n                    $ws.cart_item_total_price_html = WSAIO.remove_comparePrice($ws.cart_item_total_price_html);\n\t\t\t\ttotal_html = $ws.cart_item_total_price_html\n\t\t\t\t.replace(\"%regular_price%\",regular_price)\n\t\t\t\t.replace(\"%compare_at_price%\", '');\n\t\t}\n  \n\t\t\t\ttry {\n\t\t\t\t  total_html = total_html.replace(\/@\/g, '');\n\t\t\t\t} catch (e) {\n\t\t\t\t  log(e);\n\t\t\t\t}\n\t\t\t\ttry {\n                    if(WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer() && typeof WSAIO.excludePrice_design != 'undefined' && WSAIO.excludePrice_design == 'without-crossout' && excluded_actual_regularPrice != 0){\n                        total_html = '<div class=\"wsaio_vat_price\" style=\"text-align: left;\"> <div class=\"money\">'+actual_regularPrice+'<\/div> <div class=\"money\">'+excluded_actual_regularPrice+'<span class=\"wsaio_excl\" style=\"font-size:10px;padding-left: 4px;\">(Excl. Tax)<\/span> <\/div> <\/div>'\n                        cart_item_total_selector.html(total_html);\n                    }else{\n                        cart_item_total_selector.html(total_html);\n                    }\n\t\t\t\t} catch (e) {\n\t\t\t\t  isError(e)\n\t\t\t\t}\n  \n\t\t\t\ttry {\n\t\t\t\t  wholesale.regular_price = wholesale.regular_price.replace(\"$\", \"$@\");\n\t\t\t\t  wholesale.original_price = wholesale.original_price.replace(\"$\", \"$@\");\n\t\t\t\t} catch (e) {\n\t\t\t\t  log(e)\n\t\t\t\t}\n\t\t\t\tif (WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer()) {\n\t\t\t\t\tvar exclude_value = (WSAIO.exclude_VAT \/ 100) + 1;\n\t\t\t\t\treg_single_price = (wholesale.regular_price \/ exclude_value);\n\t\t\t\t\tcom_single_price= (wholesale.original_price \/ exclude_value);\n\t\t\t\t\tvat_applied = true;\n                    actual_regularPrice = $ws.formatMoney(wholesale.regular_price)\n                    excluded_actual_regularPrice = $ws.formatMoney(wholesale.regular_price \/ exclude_value)\n            \t}else{\n\t\t\t\t\treg_single_price = wholesale.regular_price;\n\t\t\t\t\tcom_single_price= wholesale.original_price;\n                    actual_regularPrice = $ws.formatMoney(wholesale.regular_price);\n\t\t\t\t\texcluded_actual_regularPrice = 0;\n\t\t\t\t}\n\t\t\t\tif (!$ws.general_settings.compare_at_price) {\n\t\t\t\t\tcom_single_price = \"\";\n\t\t\t\t}\n\t\t\t\tvar regular_price = Number(reg_single_price);\n                var compare_at_price = Number(com_single_price);\n\t\t\t\tif(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n\t\t\t\t\tregular_price = WSAIO.change_currency_sign(regular_price);\n\t\t\t\t\tactual_regularPrice = WSAIO.change_currency_sign(actual_regularPrice);\n\t\t\t\t\texcluded_actual_regularPrice = WSAIO.change_currency_sign(excluded_actual_regularPrice);\n\t\t\t\t\t\tif(compare_at_price != \"\"){ \n\t\t\t\t\t\t\tcompare_at_price = WSAIO.change_currency_sign(compare_at_price);\n\t\t\t\t\t\t}\n\t\t\t\t\tregular_price = WSAIO.price_with_unit(regular_price);\n\t\t\t\t\tactual_regularPrice = WSAIO.price_with_unit(actual_regularPrice);\n\t\t\t\t\texcluded_actual_regularPrice = WSAIO.price_with_unit(excluded_actual_regularPrice);\n\t\t\t\t\t\tif(compare_at_price != \"\"){\n\t\t\t\t\t\t\tcompare_at_price = WSAIO.price_with_unit(compare_at_price);\n\t\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t\tvar single_price_html = '';\n\t\t\t\tif (Number(reg_single_price) < Number(com_single_price)) {\n\t\t\t\t\tif($ws.cart_item_price_html.indexOf('%compare_at_price%') == -1){\n                        $ws.cart_item_price_html = '<del class=\"money\" style=\"padding-right:10px;\">%compare_at_price%<\/del>' +$ws.cart_item_price_html ; \n                    }\n\t\t\t\t\tsingle_price_html = $ws.cart_item_price_html;\n\t\t\t\t\tif (!$ws.general_settings.compare_at_price) {\n\t\t\t\t\t\tsingle_price_html = WSAIO.remove_comparePrice(single_price_html);\n\t\t\t\t\t}\n\t\t\t\t\tsingle_price_html = single_price_html.replace(\"%regular_price%\", regular_price)\n\t\t\t\t\t\t.replace(\"%compare_at_price%\", compare_at_price);\n\t\t\t\t} else {\n                    $ws.cart_item_price_html = WSAIO.remove_comparePrice($ws.cart_item_price_html);\n\t\t\t\t\tsingle_price_html = $ws.cart_item_price_html\n\t\t\t\t\t\t.replace(\"%regular_price%\", regular_price)\n\t\t\t\t\t\t.replace(\"%compare_at_price%\", '');\n\t\t\t\t}\n  \n  \n\t\t\t\ttry {\n\t\t\t\t  single_price_html = single_price_html.replace(\/@\/g, '');\n\t\t\t\t} catch (e) {\n\t\t\t\t  log(e);\n\t\t\t\t}\n\t\t\t\ttry {\n                    if(WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer() && typeof WSAIO.excludePrice_design != 'undefined' && WSAIO.excludePrice_design == 'without-crossout' && excluded_actual_regularPrice != 0){\n                        single_price_html = '<div class=\"wsaio_vat_price\"> <div class=\"money\" style=\"display: block;\">'+actual_regularPrice+'<\/div> <div class=\"money\">'+excluded_actual_regularPrice+'<span class=\"wsaio_excl\" style=\"font-size:10px;padding-left: 4px;\">(Excl. Tax)<\/span> <\/div> <\/div>'\n                        cart_item_price_selector.html(single_price_html);\n                    }else{\n                        cart_item_price_selector.html(single_price_html);\n                    }\n\t\t\t\t} catch (e) {\n\t\t\t\t  isError(e)\n\t\t\t\t}\n\t\t\t\tvar html = $ws.cart_item_saved_price_html.toString();\n\t\t\t\tvar total_saved = {\n\t\t\t\t  price: \"\",\n\t\t\t\t  percentage: \"\"\n\t\t\t\t};\n\t\t\t\tif (wholesale && wholesale.saved_amount && wholesale.saved_amount.percentage) {\n\t\t\t\t  total_saved.percentage = wholesale.saved_amount.percentage;\n\t\t\t\t}\n\t\t\t\tif (wholesale && wholesale.saved_amount && wholesale.saved_amount.price) {\n\t\t\t\t  total_saved.price = wholesale.saved_amount.price;\n\t\t\t\t}\n\t\t\t\thtml = html.replace(new RegExp(\"%saved_amount:price%\", \"gi\"), $ws.formatMoney(total_saved.price))\n\t\t\t\t.replace(new RegExp(\"%saved_amount:percentage%\", \"gi\"), total_saved.percentage);\n\t\t\t\ttry {\n\t\t\t\t  cart_item_saved_price_selector.html(html);\n\t\t\t\t} catch (e) {\n\t\t\t\t  isError(e)\n\t\t\t\t}\n\t\t\t  }\n  \n\t\t\t}\n\t\t\telse{\n\t\t\t  log(\"Line item index not found. cart line number\",index, \"and cart item\",item);\n\t\t\t}\n\t\t  }\n\t\t  else{\n\t\t\tisError(\"Item not found\");\n\t\t  }\n\t\t}\n\t\telse{\n\t\t  isError(\"Critical Error. Precheckout line items are empty\");\n\t\t}\n\t}).promise().done(function () {\n\t\tif (WSAIO.exclude_VAT != 0 && WSAIO.check_eligible_customer() && vat_applied) {\n\t\t\tif ($('.vat_div').length == 0 && $('.net_address_fields').length == 0) {\n\t\t\t\tif(WSAIO.customer.tax_exempt && WSAIO.auto_vat_enable){\n\t\t\t\t\t$(WSAIO.subtotal_selector.replace(':same','')).html('<span>Subtotal<span class=\"wsaio_excl\" style=\"font-size:10px;padding-left: 4px;margin-right: 34px;\">(Excl. Tax)<\/span>       ' + WSAIO.formatMoney(vat_subtotal) + '<\/span>');\n\t\t\t\t}else{\n\t\t\t\t\t$(WSAIO.VAT_subtotal_selector).before('<div class=\"vat_div\"> <div>Excluded Total <span style=\"float: right;padding-left: 20px;\"> ' + WSAIO.formatMoney(vat_subtotal) + '<\/span> <\/div> <div>VAT <span style=\"float: right;padding-left: 20px;\"> ' + WSAIO.formatMoney((_subtotal - vat_subtotal)) + '<\/span> <\/div> <\/div> ')\n\t\t\t\t}\n\t\t\t}else if($('.net_address_fields').length == 0 && WSAIO.NetTerm_version > 1){\n\t\t\t\tvar netTerm_subtotal = WSAIO.formatMoney(vat_subtotal);\n\t\t\t\tif(typeof WSAIO.show_currenyLabel_withPrice != 'undefined' && WSAIO.show_currenyLabel_withPrice && typeof Shopify.currency != 'undefined' && Shopify.currency.active != 'undefined' && WSAIO.formatMoney('0').indexOf(Shopify.currency.active) == -1){\n\t\t\t\tnetTerm_subtotal = WSAIO.change_currency_sign(netTerm_subtotal);\n\t\t\t\tnetTerm_subtotal = WSAIO.price_with_unit(netTerm_subtotal);\n\t\t\t\t}\n\t\t\t\t$('.net_prices.net--subtotal').text(netTerm_subtotal);\n\t\t\t\t$('.net--vat_deduct').text(WSAIO.formatMoney((_subtotal - vat_subtotal)))\n\t\t\t\t$('.applied_vat_line').show();\n\t\t\t}\n\t\t}\n\t})\n\t}\n\t};\n  \n\tWSAIO.productDiscount = function (params, callback) {\n\t  if (WSAIO.debugger) debugger;\n\t  if (WSAIO.isWholesaleCustomer() === false) {\n\t\tif (typeof callback === \"function\") {\n\t\t  return callback({\n\t\t\terror: \"Invalid customer\"\n\t\t  });\n\t\t} else {\n\t\t  return \"Invalid customer\";\n\t\t}\n\t  }\n\t  if (typeof params === 'undefined') {\n\t\treturn isError(\"This action required some parameters.\");\n\t  }\n\t  if (typeof params.product_id === 'undefined') {\n\t\tparams.product_id = \"default\";\n\t  }\n\t  if (typeof params.product_handle === 'undefined') {\n\t\tparams.product_handle = \"default\";\n\t  }\n\t  if (typeof params.variant_id === 'undefined') {\n\t\tparams.variant_id = \"default\";\n\t  }\n\t  if (typeof params.variant_sku === 'undefined') {\n\t\tparams.variant_sku = \"default\";\n\t  }\n\t  if (typeof params.variant_price === 'undefined') {\n\t\tparams.variant_price = \"default\";\n\t  }\n\t  if (typeof params.variant_compare_at_price === 'undefined') {\n\t\tparams.variant_compare_at_price = \"default\";\n\t  }\n\t  if (typeof params.collection_id === 'undefined') {\n\t\tparams.collection_id = \"default\";\n\t  }\n\t  if (typeof params.product_parent_grid_selector === 'undefined') {\n\t\tparams.product_parent_grid_selector = \"default\";\n\t  }\n\t  if (typeof params.remove_duplicate_table === 'undefined') {\n\t\tparams.remove_duplicate_table = \"default\";\n\t  }\n\t  if (typeof params.template === 'undefined') {\n\t\tparams.template = \"default\";\n\t  }\n\t  if(typeof params.template != 'undefined' && params.template === \"product\" ){\n        WSAIO.buyNowEventListener()\n      }\n\t  WSAIO.regularDiscount(params, function (regular_discount_response) {\n\t\tif (params.template === \"product\" || $ws.landingTemplate === \"product\" || (window.location.href.indexOf('\/pages\/') > -1 && $ws.landingTemplate === \"collection\") || params.apply_volume_discount === true) {\n\t\t  WSAIO.volumeDiscount(params, function (volume_discount_response) {\n\t\t\tif (typeof callback === \"function\") {\n\t\t\t  callback({\n\t\t\t\tregular_discount: regular_discount_response,\n\t\t\t\tvolume_discount: volume_discount_response\n\t\t\t  });\n\t\t\t}\n\t\t  });\n\t\t} else if ($ws.volume_discount_on_hcsr) {\n\t\t  WSAIO.volumeDiscount(params, function (volume_discount_response) {\n\t\t\tif (typeof callback === \"function\") {\n\t\t\t  callback({\n\t\t\t\tregular_discount: regular_discount_response,\n\t\t\t\tvolume_discount: volume_discount_response\n\t\t\t  });\n\t\t\t}\n\t\t  });\n\t\t} else {\n\t\t  if (typeof callback === \"function\") {\n\t\t\tcallback({\n\t\t\t  regular_discount: regular_discount_response,\n\t\t\t  volume_discount: \"Not executed\"\n\t\t\t});\n\t\t  }\n\t\t}\n\t  });\n\t};\n  \n\tWSAIO.variantChange = function (product, variant) {\n\t  if (WSAIO.debugger) debugger;\n\t  if (WSAIO.isWholesaleCustomer() === false) {\n\t\treturn \"Invalid customer\";\n\t  }\n\t  $ws.productDiscount({\n\t\titem_price_selector: $ws.product_price_selector,\n\t\ttemplate: 'product',\n\t\tproduct_id: product.id,\n\t\tproduct_handle: product.handle,\n\t\tvariant_id: variant.id,\n\t\tvariant_sku: variant.sku,\n\t\tvariant_price: variant.price,\n\t\tvariant_compare_at_price: variant.compare_at_price\n\t  }, function (response) {\n\t\tlog(\"vc response\",response);\n\t\tsetTimeout(function(){\n\t\t  if(typeof current_product != 'undefined' && current_product != null){\n\t\t\tWSAIO.Volume_disocunted_price($('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.current_product_qty_input_selector).val())\n\t\t  }\n\t\t},10);\n\t\tif(response && response.regular_discount && Number(response.regular_discount.ws_discount) > 0){\n\t\t  log(\"ws discount applied on this item\");\n\t\t}\n\t\telse{\n\t\t  log(\"Set original price\");\n\t\t  $ws.variantOriginalPrice();\n\t\t}\n\t  });\n\t};\n  \n\tWSAIO.selectedCurrency = function (el) {\n\t  return $(el || $ws.currency_selector).val() ||'';\n\t};\n  \n  \n\tWSAIO.Currency.convert = function (amount, from, to) {\n\t\tvar rates = $ws.Currency.rates;\n\t\ttry {\n\t\t  if(typeof Shopify !== \"undefined\" && typeof Shopify.currency !== \"undefined\"){\n\t\t\t  return amount*Shopify.currency.rate;  \n\t\t  }else{\n\t\t\t  return (amount * rates[from]) \/ rates[to];\n\t\t  }\n\t\t} catch (e) {\n\t\t  return e;\n\t\t}\n\t  };\n  \n\tWSAIO.getProduct = function (handle, callback) {\n\t  $.getJSON(WSAIO.local_param + 'products\/' + handle + '.js', function (product) {\n\t\tif (typeof callback === \"function\") {\n\t\t  callback(product);\n\t\t}\n\t  });\n\t  return \"Use callback function to get product\";\n\t};\n  \n  \n\tWSAIO.buy_it_now = function () {\n\t  $($ws.buy_now_button_selector).on(\"click\",function (event) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\t\t$(this).prop(\"disabled\", !0);\n\t\tvar c = $(this).parents(\"form\");\n\t\tvar product_handle = c.parents(WSAIO.product_parent_grid_selector).find('[name=\"id\"]').attr(\"data-handle\") || current_product.handle,\n\t\tvariant_id = c.parents(WSAIO.product_parent_grid_selector).find('[name=\"id\"]').val(),\n\t\tproduct_quantity = c.parents(WSAIO.product_parent_grid_selector).find('[name=\"quantity\"]').val();\n\tvoid 0 === product_quantity && (product_quantity = 1);\n  \n\t\t$ws.getProduct(product_handle, function (pr) {\n\t\t  $ws.buy_now_product = pr;\n\t\t  proccedToBuyItNow();\n\t\t});\n  \n\t\tfunction proccedToBuyItNow() {\n\t\t   sessionStorage.setItem('isCheckoutvisited', 'true');\n\t\t  if (typeof $ws.buy_now_product !== 'undefined' && $ws.buy_now_product !== null) {\n\t\t\tvar product = $ws.buy_now_product;\n\t\t\tif (product) {\n\t\t\t  var selected_variant_index = product.variants.findIndex(function (a) {\n\t\t\t\treturn a.id == variant_id\n\t\t\t  }),\n\t\t\t\t  variant = {};\n\t\t\t  if (-1 < selected_variant_index) {\n\t\t\t\tvariant = product.variants[selected_variant_index];\n\t\t\t  }   \n\t\t\t  try{\n\t\t\t  WSAIO.productDiscount({\n\t\t\t\ttemplate:'product',\n\t\t\t\titem_price_selector: $('.demo'),\n\t\t\t\tproduct_id: WSAIO.buy_now_product.id,\n\t\t\t\tproduct_handle: WSAIO.buy_now_product.handle,\n\t\t\t\tvariant_id: WSAIO.buy_now_product.variants[selected_variant_index].id,\n\t\t\t\tvariant_sku: WSAIO.buy_now_product.variants[selected_variant_index].sku,\n\t\t\t\tvariant_price: WSAIO.buy_now_product.variants[selected_variant_index].price,\n\t\t\t\tvariant_compare_at_price: WSAIO.buy_now_product.variants[selected_variant_index].compare_at_price\n\t\t\t  },function(ee){\n\t\t\t\t\n\t\t\t\tvar volume_applied = ee.volume_discount.quantity_breaks.length;\n\t\t\t\tWSAIO.volume_values = [];\n\t\t\t\tif(volume_applied > 0){\n\t\t\t\t  WSAIO.volume_values = ee.volume_discount.quantity_breaks;\n\t\t\t\t}\n\t\t\t\tif(parseFloat(ee.regular_discount.ws_discount) > 0){\n\t\t\t\t  WSAIO.current_product_discountPrice = Number(variant.price)-parseFloat(ee.regular_discount.ws_discount)*100\n\t\t\t\t  WSAIO.regular_price = Number(variant.price);\n\t\t\t\t}else{\n\t\t\t\t  WSAIO.current_product_discountPrice =  Number(variant.price);\n\t\t\t\t  WSAIO.regular_price = Number(variant.price);\n\t\t\t\t}\n\t\t\t  });\n\t\t\t}catch(e){}\n            if(WSAIO.current_product_discountPrice == undefined){\n            WSAIO.current_product_discountPrice = Number(variant.price);\n            }  \n\t\t\t  if (variant.available) {\n\t\t\t\tvar line_price = Number(variant.price) * Number(product_quantity),\n\t\t\t\t\tcart = {\n\t\t\t\t\t  attributes: {},\n\t\t\t\t\t  cart_level_discount_applications: [],\n\t\t\t\t\t  currency: $ws.Currency.selectedCurrency || $ws.shopInfo.currency,\n\t\t\t\t\t  item_count: product_quantity,\n\t\t\t\t\t  items: [{\n\t\t\t\t\t\tdiscounted_price: variant.price,\n\t\t\t\t\t\tdiscounts: [],\n\t\t\t\t\t\tfeatured_image: product.featured_image,\n\t\t\t\t\t\tfinal_line_price: line_price,\n\t\t\t\t\t\tfinal_price: variant.price,\n\t\t\t\t\t\tgift_card: !1,\n\t\t\t\t\t\tgrams: variant.weight,\n\t\t\t\t\t\thandle: product.handle,\n\t\t\t\t\t\tid: variant.id,\n\t\t\t\t\t\timage: product.featured_image,\n\t\t\t\t\t\tkey: \"11309472350255:a5c7b76a76a9b8da2aa5dceab2c6b7ab\",\n\t\t\t\t\t\tline_level_discount_allocations: [],\n\t\t\t\t\t\tline_price: line_price,\n\t\t\t\t\t\toptions_with_values: [],\n\t\t\t\t\t\toriginal_line_price: line_price,\n\t\t\t\t\t\toriginal_price: variant.price,\n\t\t\t\t\t\tprice: variant.price,\n\t\t\t\t\t\tproduct_description: \"\",\n\t\t\t\t\t\tproduct_has_only_default_variant: !1,\n\t\t\t\t\t\tproduct_id: product.id,\n\t\t\t\t\t\tproduct_title: product.title,\n\t\t\t\t\t\tproduct_type: product.type,\n\t\t\t\t\t\tproperties: null,\n\t\t\t\t\t\tquantity: product_quantity,\n\t\t\t\t\t\trequires_shipping: variant.requires_shipping,\n\t\t\t\t\t\tsku: variant.sku,\n\t\t\t\t\t\ttaxable: variant.taxable,\n\t\t\t\t\t\ttitle: product.title + \" - \" + variant.title,\n\t\t\t\t\t\ttotal_discount: 0,\n\t\t\t\t\t\turl: WSAIO.local_param + \"products\/\" + product_handle + \"?variant=\" + variant.id,\n\t\t\t\t\t\tvariant_id: variant.id,\n\t\t\t\t\t\tvariant_options: variant.options,\n\t\t\t\t\t\tvariant_title: variant.title,\n\t\t\t\t\t\tvendor: product.vendor\n\t\t\t\t\t  }],\n\t\t\t\t\t  items_subtotal_price: line_price,\n\t\t\t\t\t  note: null,\n\t\t\t\t\t  original_total_price: line_price,\n\t\t\t\t\t  requires_shipping: variant.requires_shipping,\n\t\t\t\t\t  token: \"3cbccfbccb5ed48c66e4ced34048082d\",\n\t\t\t\t\t  total_discount: 0,\n\t\t\t\t\t  total_price: line_price,\n\t\t\t\t\t  total_weight: Number(variant.weight) * Number(product_quantity)\n\t\t\t\t\t};\n\n\t\t\t\tvar bnreqdata = {\n\t\t\t\t  cart: cart,\n\t\t\t\t  note: \"\",\n\t\t\t\t  note_attributes: [],\n\t\t\t\t  billing_address: {},\n\t\t\t\t  shipping_address: {},\n\t\t\t\t  shopInfo: $ws.shopInfo,\n\t\t\t\t  customer: $ws.customer,\n\t\t\t\t  user_mode: $ws.user_mode,\n\t\t\t\t  currency: $ws.shopInfo.currency,\n\t\t\t\t  custom_line_items: [],\n\t\t\t\t  discount_code_application: WSAIO.DiscountCode.application,\n\t\t\t\t  products_with_collections: (WSAIO.product_collections || [])\n\t\t\t\t};\n\t\t\t\tif(typeof WSAIO.wholesale_app_tags == 'undefined' || (typeof WSAIO.wholesale_app_tags != 'undefined' && WSAIO.wholesale_app_tags.indexOf('app') > -1) ){\n                    bnreqdata[\"tags\"] = \"wsaio-app,checkout-via-buy-now-button\";\n                }else{\n                    bnreqdata[\"tags\"] = \"checkout-via-buy-now-button\";\n                }\n\n\t\t\t\tif ($ws.variant_sku_are_same) {\n\t\t\t\t  bnreqdata[\"variant_sku_are_same\"] = $ws.variant_sku_are_same;\n\t\t\t\t}\n\t\t\t\tif ($ws.coupon_expires_after_hours) {\n\t\t\t\t  bnreqdata[\"coupon_expires_after_hours\"] = $ws.coupon_expires_after_hours;\n\t\t\t\t}\n\t\t\t\tif ($ws.auto_delete_api) {\n\t\t\t\t  if (localStorage.getItem(\"draft_order_info\") != null) {\n\t\t\t\t\ttry {\n\t\t\t\t\t  bnreqdata[\"prev_draft_order_info\"] = JSON.parse(localStorage.getItem(\"draft_order_info\"));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t  log(e)\n\t\t\t\t\t}\n\t\t\t\t  }\n\t\t\t\t  if (localStorage.getItem(\"price_rule_info\") != null) {\n\t\t\t\t\ttry {\n\t\t\t\t\t  bnreqdata[\"prev_price_rule_info\"] = JSON.parse(localStorage.getItem(\"price_rule_info\"));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t  log(e)\n\t\t\t\t\t}\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t\tif(typeof MOQ_applied != 'undefined' && MOQ_applied.length > 0){\n\t\t\t\t  if((Number(product_quantity)%MOQ_applied[0]._qtyInc) == 0 && Number(product_quantity) >= MOQ_applied[0]._qtyMin){\n\t\t\t\t\tif(MOQ_applied[0]._qtyMax != 0 && Number(product_quantity) <= MOQ_applied[0]._qtyMax){\n\t\t\t\t\t  $(WSAIO.buy_now_button_selector).removeClass('checkout-disabled').removeAttr('disabled')\n\t\t\t\t\t  WSAIO.disable_buy_now_button_moq = false;\n\t\t\t\t\t}else{\n\t\t\t\t\t  $(WSAIO.buy_now_button_selector).removeClass('checkout-disabled').removeAttr('disabled')\n\t\t\t\t\t  WSAIO.disable_buy_now_button_moq = false; \n\t\t\t\t\t}\n\t\t\t\t  }else{\n\t\t\t\t\tif(WSAIO.buyNow_message != '' ){\n\t\t\t\t\t\t$('.waioMOQ_buy_message').remove();\n\t\t\t\t\t  $(WSAIO.shopify_payment_button_wrapper).after('<p class=\"waioMOQ_buy_message\" style=\"font-size: 14px;\">Minimum Requirements not fulfilled<\/p>');\n\t\t\t\t\t}\n\t\t\t\t\t$(WSAIO.buy_now_button_selector).addClass('checkout-disabled').attr('disabled','disabled')\n\t\t\t\t\tWSAIO.disable_buy_now_button_moq = true; \n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t  $(WSAIO.buy_now_button_selector).removeClass('checkout-disabled').removeAttr('disabled')\n\t\t\t\t\t  $('.waio_buy_message, .waioMOQ_buy_message').remove();\n\t\t\t\t\t},2500);\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t$('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find('.wsaio_buynow').css('cssText','display:inline-block !important')\n\t\t\t\t},10)\n\t\t\t\tWSAIO.BuyNoworderControl(WSAIO.current_product_discountPrice,Number(product_quantity),$ws.buy_now_button_selector,WSAIO.volume_values,WSAIO.regular_price,variant.id);\n\t\t\t\tif (WSAIO.disable_buy_now_button || WSAIO.disable_buy_now_button_moq) {\n\t\t\t\t\tif(WSAIO.disable_buy_now_button && !WSAIO.disable_buy_now_button_moq && (typeof WSAIO.allow_normal_checkout__OC != 'undefined' && WSAIO.allow_normal_checkout__OC)){\n                        return $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity);\n                    }else{\n                        return false;\n                    }\n\t\t\t\t}\n\t\t\t\tif ($ws.ccr) {\n\t\t\t\t  bnreqdata[\"ccr\"] = $ws.ccr;\n\t\t\t\t}\n\t\t\t\t$ws.checkoutRequest(bnreqdata, function (error, response) {\n\t\t\t\tif(typeof response.wholesale_errors != 'undefined' && response.wholesale_errors.length > 0){\n\t\t\t\t\tfor(var error_key = 0; error_key < response.wholesale_errors.length; error_key++){\n\t\t\t\t\t\tif(response.wholesale_errors[error_key].key == 'email'){\n\t\t\t\t\t\t\tif($('.wsaioserver_error1').length == 0){\n\t\t\t\t\t\t\t\t$(WSAIO.shopify_payment_button_wrapper).after('<div class=\"wsaioserver_error1\" style=\"color:red !important;font-size:12px !important;\">Email contains an invalid domain name. Retry to place an order without a discount.<\/div>');\n\t\t\t\t\t\t\t\t$(WSAIO.buy_now_button_selector).removeClass('checkout-disabled').removeAttr('disabled');\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\treturn $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t  }\n\t\t\t\t  if (error) {\n\t\t\t\t\tlog(error);\n\t\t\t\t\treturn $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity);\n\t\t\t\t  } else {\n\t\t\t\t\tif (response && response.checkout_url && (response.checkout_url.indexOf(\"invoices\") > -1)) {\n\t\t\t\t\t  try{\n\t\t\t\t\t\tif(Shopify.routes.root.replaceAll('\/','') != '' && typeof response.discount_code == 'undefined'){\n\t\t\t\t\t\t  response.checkout_url = response.checkout_url+'?locale='+Shopify.routes.root.replaceAll('\/','');\n\t\t\t\t\t\t}\n\t\t\t\t\t  }catch(er){console.warn('er')}\n\t\t\t\t\t  return $ws.redirectToURL(response.checkout_url);\n\t\t\t\t\t} else if (response && $ws.general_settings && ($ws.general_settings.discount_method == \"coupon_code\" && response.discount_code)) {\n\t\t\t\t\t  if(Shopify.routes.root.replaceAll('\/','') != '' && typeof response.discount_code != 'undefined'){\n\t\t\t\t\t\treturn $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity + '?locale='+Shopify.routes.root.replaceAll('\/','')+'&discount=' + response.discount_code);\n\t\t\t\t\t  }else{\n\t\t\t\t\t\treturn $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity + '?discount=' + response.discount_code);\n\t\t\t\t\t  }\n\t\t\t\t\t} else {\n\t\t\t\t\t  if(Shopify.routes.root.replaceAll('\/','') != ''){\n\t\t\t\t\t\treturn $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity+ '?locale='+Shopify.routes.root.replaceAll('\/',''));\n\t\t\t\t\t  }else{\n\t\t\t\t\t\treturn $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity);\n\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t  }\n\t\t\t\t});\n\t\t\t  } else {\n\t\t\t\tisError(\"Variant is not available or missing variant\");\n\t\t\t\tif(Shopify.routes.root.replaceAll('\/','') != ''){\n\t\t\t\t  return $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity+ '?locale='+Shopify.routes.root.replaceAll('\/',''));\n\t\t\t\t}else{\n\t\t\t\t  return $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity);\n\t\t\t\t}\n\t\t\t  }\n\t\t\t} else {\n\t\t\t  isError(\"Product object is missing\");\n\t\t\t  if(Shopify.routes.root.replaceAll('\/','') != ''){\n\t\t\t\treturn $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity+ '?locale='+Shopify.routes.root.replaceAll('\/',''));\n\t\t\t  }else{\n\t\t\t\treturn $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity);\n\t\t\t  }\n\t\t\t}\n\t\t  } else {\n\t\t\tif(Shopify.routes.root.replaceAll('\/','') != ''){\n\t\t\t  return $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity+ '?locale='+Shopify.routes.root.replaceAll('\/',''));\n\t\t\t}else{\n\t\t\t  return $ws.redirectToURL(WSAIO.local_param + 'cart\/' + variant_id + ':' + product_quantity);\n\t\t\t}\n\t\t  }\n\t\t}\n\t  });\n\t};\n  \n\tWSAIO.orderControl = function (min_price, el, message, disable_checkout_btn) {\n\t  \"undefined\" === typeof window.waioMOC && (window.waioMOC = {});\n\t  \"undefined\" === typeof waioMOC.cart && (waioMOC.cart = {});\n\t  if (typeof min_price !== \"undefined\" && min_price != null && !isNaN(min_price)) {\n\t\ttry {\n\t\t  waioMOC.cart[\"original_total_price\"] = min_price;\n\t\t} catch (e) {\n\t\t  isError(e);\n\t\t}\n\t  } else {\n\t\tisError(\"min price was not provided for buy now product\");\n\t  }\n\t  if (\"undefined\" !== typeof min_price && null != min_price && !isNaN(min_price)) {\n\t\ttry {\n\t\t  waioMOC.cart.original_total_price = min_price;\n\t\t} catch (e) {\n\t\t  isError(e);\n\t\t}\n\t  };\n\t  if(typeof WSAIO.disableCheckout === \"function\"){\n\t\tWSAIO.disableCheckout(disable_checkout_btn, message, el);\n\t  }\n\t  if(typeof WSAIO.order_control === \"function\"){\n\t\tWSAIO.order_control();\n\t  }\n  \n\t  return WSAIO.disable_checkout;\n\t};\n  \n\tWSAIO.DiscountCode.subscribe = function () {\n  \n  \n\t  $('.wsaio_coupon_field input').on('input',function(){\n\t\tvar $this = $(this);\n\t\t$this.code = $this.val();\n\t\tif ($this.code && $this.code.trim() != \"\") {\n\t\t  $this.parents('.wsaio_coupon_group').find(\"button\").removeClass(\"ws-disabled\");\n\t\t  $this.parents('.wsaio_coupon_group').find(\"button\").removeAttr(\"disabled\");\n\t\t}\n\t\telse{\n\t\t  $this.parents('.wsaio_coupon_group').find(\"button\").addClass(\"ws-disabled\");\n\t\t  $this.parents('.wsaio_coupon_group').find(\"button\").attr(\"disabled\",\"disabled\");\n\t\t}\n\t  });\n  \n\t  $(document).on('click','.wsaio_coupon_button',function(e){\n\t\tvar $this = $(this);\n\t\te.preventDefault(); e.stopImmediatePropagation(); e.stopPropagation();\n\t\t$this.input = $this.parents('.wsaio_coupon_group').find(\".wsaio_coupon_field input\");\n\t\t$this.code = $($this.input).val();\n\t\tif ($this.code && $this.code.trim() != \"\") {\n\t\t  $($this.input).removeClass(\"wsaio_error\");\n\t\t  WSAIO.DiscountCode.apply($this.code);\n\t\t}\n\t\telse{\n\t\t  $($this.input).addClass(\"wsaio_error\");\n\t\t  $($this.input).focus();\n\t\t}\n\t  })\n\t};\n  \n\tWSAIO.DiscountCode.apply = function (_code) {\n\t  if (WSAIO.debugger) debugger;\n\t  $discount = this;\n\t  $discount.code = _code;\n\t  $('.wsaio_coupon_box').addClass('wsaio_loading')\n\t  $ws.fetchCart(function (error, cart) {\n\t\t$('.wsaio_coupon_box').removeClass('wsaio_success').removeClass('wsaio_error');\n\t\ttry {\n\t\t  WSAIO.cart_object = cart;\n\t\t} catch (e) {}\n\t\tif (error) {\n\t\t  return isError(error);\n\t\t} else {\n\t\t  var post_data = {\n\t\t\tcart: cart,\n\t\t\tshopInfo: $ws.shopInfo,\n\t\t\tcustomer: $ws.customer,\n\t\t\tcoupon_code: _code,\n\t\t\tproducts_with_collections: (WSAIO.product_collections || [])\n\t\t  };\n\t\t  $ws.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: $ws.App.checkoutURL + '\/discount-code',\n\t\t\tdata: post_data,\n\t\t\tdataType: \"json\",\n\t\t\tsuccess: function (result) {\n\t\t\t  $('.wsaio_coupon_box').removeClass('wsaio_loading')\n\t\t\t  log(result);\n\t\t\t  try {\n\t\t\t\tdelete result.log;\n\t\t\t  } catch (e) {\t\n\t\t\t\tlog(e)\n\t\t\t  }\n\t\t\t  if (typeof $ws.callback === 'function') {\n\t\t\t\t$ws.callback(result);\n\t\t\t  }\n\t\t\t  if (result && result.status === 1) {\n\t\t\t\tif (typeof result.wholesale_key !== 'undefined') {\n\t\t\t\t  $discount.application = result;\n\t\t\t\t  try{\n\t\t\t\t\t$('[href$=\"\/pages\/net-term-order\"]').attr('href','\/pages\/net-term-order?coupon='+_code)\n\t\t\t\t  } catch (e) { log(e) }\n\t\t\t\t  var wsac = {\n\t\t\t\t\tcode: _code,\n\t\t\t\t\tshop: $ws.shopInfo.shop,\n\t\t\t\t  };\n\t\t\t\t  if ($ws.customer.id) {\n\t\t\t\t\twsac[\"customer_id\"] = $ws.customer.id;\n\t\t\t\t  }\n\t\t\t\t  localStorage.setItem(\"ws-applied-coupon\", JSON.stringify(wsac));\n\t\t\t\t} else {\n\t\t\t\t  $discount.application = undefined;\n\t\t\t\t}\n\t\t\t\t$('.wsaio_coupon_box').addClass('wsaio_success');\n\t\t\t  } else {\n\t\t\t\tlocalStorage.removeItem(\"ws-applied-coupon\");\n\t\t\t\tif((result && result.status === 0 && result.message == 'Not found') || (WSAIO.customer.id != null)){\n                    $('.wsaio_error_msg').text('Enter a valid discount code');\n                    $('.wsaio_coupon_box').addClass('wsaio_error');\n                }else{\n                    $('.wsaio_error_msg').html('<a href=\"'+WSAIO.local_param%20+'account\" style=\"color:red;\">Login<\/a> to apply discount code');\n                    $('.wsaio_coupon_box').addClass('wsaio_error');\n                }\n\t\t\t\t\n\t\t\t  }\n\t\t\t}\n\t\t  });\n\t\t}\n\t  });\n\t};\n  \n\tWSAIO.signUpForm = function () {\n\t  if (WSAIO.debugger) debugger;\n\t  if (typeof $ws.signup_form !== 'undefined') {\n\t\ttry {\n\t\t  0 < $($ws.signup_form_selector).length ? ($($ws.signup_form_selector).html($ws.signup_form.form_html)) : log(\"Sign Up form selector not found\");\n\t\t} catch (e) {\n\t\t  isError(e)\n\t\t}\n\t  } else {\n\t\tlog(\"We could not found Signup Form. Save signup form in the wholesale applicatipn dashboard and then refresh this page\")\n\t  }\n\t};\n  \n\tWSAIO.removeAllEvents = function (el) {\n\t  try {\n\t\tfor (var i = 0; i < document.querySelectorAll(el).length; i++) {\n\t\t  var a = document.querySelectorAll(el)[i];\n\t\t  a.parentNode.replaceChild(a.cloneNode(true), a);\n\t\t}\n\t  } catch (e) {\n\t\tlog(e)\n\t  }\n\t};\n  \n\tWSAIO.registerEvent = function (el, type, callback) {\n\t  try {\n\t\tfor (var i = 0; i < document.querySelectorAll(el).length; i++) {\n\t\t  var a = document.querySelectorAll(el)[i];\n\t\t  a.addEventListener(type, callback);\n\t\t}\n\t  } catch (e) {\n\t\tlog(e)\n\t  }\n\t};\n  \n\tWSAIO.buyNowEventListener = function () {\n\t\tif (WSAIO.isWholesaleCustomer() === false && waioMOC.rules.length === 0) {\n\t\treturn \"Invalid customer\";\n\t  }\n\t  $ws.addBuyNowBtnHTML();\n\t};\n  \n\t\n\tWSAIO.addBuyNowBtnHTML = function () {\n\t\tvar selected_variant_availablity = true;\n        if(typeof current_product != 'undefined' && current_product != null){\n           current_product.variants.find(function(e){\n               if(jQ('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find('[name=\"id\"]').val() == e.id){\n                   selected_variant_availablity = e.available;\n               }\n           });\n         }\n\t  var is_replace = false;\n\t  if(WSAIO.buy_now_btn_replace){\n\t  is_replace = true;\n\t  }\n\t  if((WSAIO.subscription_variant_selector != '' || WSAIO.subscription_variant_selector != 'false') && WSAIO.buy_now_btn_replace){\n\t\tif($(WSAIO.subscription_variant_selector).is(':checked')){\n\t\t  is_replace = false;\n\t\t}else{\n\t\t  is_replace = true;\n\t\t}\n\t  }\n\t  if(!selected_variant_availablity){is_replace = false}\n\t  var is_append = setInterval(function(){\n\t\tif(typeof current_product != 'undefined' && current_product != null){\n\t\t\tif(WSAIO.isWholesaleCustomer() === false){\n\t\t\t  $(WSAIO.product_price_selector).addClass('wsaio_'+current_product.id)\n\t\t\t}\n\t\t\tif( is_replace == false){\n\t\t\t\t$('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find('.wsaio_buynow').remove()\n\t\t\t\t}\n\n\t\t  if($('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.shopify_payment_button_wrapper).find(WSAIO.buy_now_button_selector).length > 0){\n\t\t\t$('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.shopify_payment_button_wrapper).hide()\n\t\t\tif($('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find('.wsaio_buynow').length == 0 && is_replace){\n\t\t\t\t$('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.shopify_payment_button_wrapper).find(WSAIO.buy_now_button_selector).addClass('wsaio_hide_btn').css('cssText','display:none !important') \n\t\t\t\t$('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.shopify_payment_button_wrapper).find('.shopify-payment-button__more-options').addClass('wsaio_hide_btn').css('cssText','display:none !important')  \n\t\t\t\t$(WSAIO.shopify_payment_button_wrapper).append(WSAIO.buy_now_button_html);\n\t\t\t\t$('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find('.wsaio_buynow').css('cssText','display:inline-block !important')\n\t\t\t  }else{\n\t\t\t\tif((WSAIO.buy_now_btn_replace == false || is_replace == false) && selected_variant_availablity){\n\t\t\t\t\t$(WSAIO.product_parent_grid_selector).find('.wsaio_buynow').remove();\n\t\t\t  $('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.shopify_payment_button_wrapper).find(WSAIO.buy_now_button_selector).removeClass('wsaio_hide_btn') \n\t\t\t  $('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.shopify_payment_button_wrapper).find('.shopify-payment-button__more-options').removeClass('wsaio_hide_btn')\n\t\t\t  $('.shopify-payment-button .shopify-payment-button__button').css('cssText','display:inline-block !important')\n\t\t\t }\n\n\t\t\t}\n\t\t\t$ws.buy_it_now();\n\t\t\t\n\t\t\t\tif(typeof WSAIO.showBuy != 'undefined'){WSAIO.showBuy()}\n\t\t\t\tif($('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find('.wsaio_buynow').length != 0){\n\t\t\t\t$('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.shopify_payment_button_wrapper).find('button').siblings('div').find(WSAIO.buy_now_button_selector).addClass('wsaio_hide_btn').css('cssText','display:none !important')\n\t\t\t\t$('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.shopify_payment_button_wrapper).find('button').siblings('div').find(WSAIO.buy_now_button_selector).siblings('button').addClass('wsaio_hide_btn').css('cssText','display:none !important')\n\t\t\t\t}\n\n\t\t\tclearInterval(is_append)\n\n\t\t  }\n\t\t}else{\n\t\t  clearInterval(is_append)\n\t\t}\n\t  },100)\n  \n\t  };\n  \n\t  $(document).ready(function(){\n        setTimeout(function(){\n\t\t\tWSAIO.buyNowEventListener();\n\t\t\tvar selected_variant_availablity = true;\n\t\t\tif(typeof current_product != 'undefined' && current_product != null){\n\t\t\t   current_product.variants.find(function(e){\n\t\t\t\t   if(jQ('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find('[name=\"id\"]').val() == e.id){\n\t\t\t\t\t   selected_variant_availablity = e.available;\n\t\t\t\t   }\n\t\t\t   });\n\t\t\t }\n\t\t\t if(selected_variant_availablity){\n        setTimeout(function(){\n            try{\n            $('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.shopify_payment_button_wrapper).show()\n            }catch(e){}\n            WSAIO.showBuyevent = function(){\n                WSAIO.showBuy = function(){\n                    $('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.shopify_payment_button_wrapper).show()\n                }\n            }\n            if(typeof WSAIO.showBuyevent != 'undefined'){WSAIO.showBuyevent()}\n         },500)\n\t\t}      \n       },5000)   \n    })\n  WSAIO.DiscountCode.add = function () {\n\tif (true === WSAIO.general_settings.enable_additional_coupon_code) {\n\t  $ws.DiscountCode.addForm();\n\t  $ws.DiscountCode.subscribe(); \/\/ subscribe on click event\n\t}\n  };\n  \n  WSAIO.cartDrawer = function (time) {\n\t$(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector+','+WSAIO.netTerm_checkout_selector).addClass('wsaio_hideCheckout')\n\t$(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector+','+WSAIO.netTerm_checkout_selector).addClass('checkout-disabled').attr('disabled','disabled')\n\tsetTimeout(function(){\n\t  $ws.checkoutEventListner(); \/\/ Subscribe checkout button on click event\n\t  $ws.preCheckout(); \/\/ Get wholesale price from server on window load\n\t},time)\n  };\n\t\n  $(document).on('click','a[href*=\"quantity=0\"]',function(){\n\tWSAIO.cartDrawer(1500)\n  })\n  \n  \n  if ('undefined' === typeof WSAIO.Currency.rates) {\n\tWSAIO.Currency.rates = {};\n  }\n  if ('undefined' === typeof WSAIO.Currency.selectedCurrency) {\n\tWSAIO.Currency.selectedCurrency = $ws.selectedCurrency();\n  }\n  WSAIO.Currency.storeCurrency = $ws.shopInfo.currency;\n  if (\"undefined\" !== typeof window.Currency) {\n\tWSAIO.Currency.rates = window.Currency.rates;\n  }\n  \n  WSAIO.estTime = function () {\n\tvar tN = new Date();\n\ttN.setTime(tN.getTime() + tN.getTimezoneOffset() * 60 * 1000);\n\tvar offset = -300,\n\t\testDate = new Date(tN.getTime() + offset * 60 * 1000);\n\treturn estDate.getTime();\n  };\n  \n  WSAIO.getSchedule = function (schedule) {\n\tfunction est_time_now() {\n\t  var tN = new Date();\n\t  tN.setTime(tN.getTime() + tN.getTimezoneOffset() * 60 * 1000);\n\t  var offset = -300,\n\t\t  estDate = new Date(tN.getTime() + offset * 60 * 1000);\n\t  return estDate.getTime();\n\t}\n  \n\tfunction getTimezoneOffset() {\n\t  function z(n) {\n\t\treturn (n < 10 ? '0' : '') + n\n\t  }\n\t  var offset = new Date().getTimezoneOffset();\n\t  var sign = offset < 0 ? '+' : '-';\n\t  offset = Math.abs(offset);\n\t  return sign + z(offset \/ 60 | 0) + z(offset % 60);\n\t}\n  \n\tfunction date_time_value(date, time) {\n        \/\/ Parsing date to YYYY\/MM\/DD HH:MM:SS from YYYY-MM-DD HH:MM:SS\n\t\tvar prevDate = date;\n        if(typeof date === \"string\")date = date.replace(\/-\/g, \"\/\");\n\t  var dateTimeValue = new Date(date);\n\t  if(dateTimeValue == 'Invalid Date'){\n\t\tdateTimeValue = new Date(prevDate);\n\t  }\n\t  if (typeof dateTimeValue === 'object') {\n\t\ttry {\n\t\t  dateTimeValue = dateTimeValue.toString();\n\t\t  if (typeof dateTimeValue === 'string') {\n\t\t\tdateTimeValue = dateTimeValue.replace(getTimezoneOffset(), '+0000');\n\t\t  }\n\t\t} catch (e) {\n\t\t  log(e);\n\t\t}\n\t  }\n\t  try {\n\t\tdateTimeValue = new Date(dateTimeValue).toISOString();\n\t  } catch (e) {\n\t\tlog(e);\n\t  }\n\t  try {\n\t\tdateTimeValue = dateTimeValue.split('T')[0] + \" \" + time;\n\t  } catch (e) {\n\t\tlog(e);\n\t  }\n\t  return dateTimeValue;\n\t}\n  \n\tfunction diff_in_schedule(date1, date2) {\n        \/\/ Parsing date to YYYY\/MM\/DD HH:MM:SS from YYYY-MM-DD HH:MM:SS\n        if(typeof date1 === \"string\")date1 = date1.replace(\/-\/g, \"\/\");\n        if(typeof date2 === \"string\")date2 = date2.replace(\/-\/g, \"\/\");\n\n\t  date1 = new Date(date1);\n\t  date2 = new Date(date2);\n\t  if (date1 === 'Invalid Date' || date2 === 'Invalid Date') {\n\t\treturn 0;\n\t  }\n\t  if (!date1 || !date2) return 0;\n\t  if (typeof date1 !== 'object' || typeof date2 !== 'object') {\n\t\treturn 0;\n\t  }\n\t  if (date1 > date2) {\n\t\tvar result = diff_in_schedule(date2, date1);\n\t\tresult.years = -result.years;\n\t\tresult.months = -result.months;\n\t\tresult.days = -result.days;\n\t\tresult.hours = -result.hours;\n\t\tresult.minutes = -result.minutes;\n\t\tresult.seconds = -result.seconds;\n\t\treturn result;\n\t  }\n\t  result = {\n\t\tyears: date2.getYear() - date1.getYear(),\n\t\tmonths: date2.getMonth() - date1.getMonth(),\n\t\tdays: date2.getDate() - date1.getDate(),\n\t\thours: date2.getHours() - date1.getHours(),\n\t\tminutes: date2.getMinutes() - date1.getMinutes(),\n\t\tseconds: date2.getSeconds() - date1.getSeconds()\n\t  };\n\t  if (result.seconds < 0) {\n\t\tresult.minutes--;\n\t\tresult.seconds += 60;\n\t  }\n\t  if (result.minutes < 0) {\n\t\tresult.hours--;\n\t\tresult.minutes += 60;\n\t  }\n\t  if (result.hours < 0) {\n\t\tresult.days--;\n\t\tresult.hours += 24;\n\t  }\n\t  if (result.days < 0) {\n\t\tresult.months--;\n\t\tvar copy1 = new Date(date1.getTime());\n\t\tcopy1.setDate(32);\n\t\tresult.days = 32 - date1.getDate() - copy1.getDate() + date2.getDate();\n\t  }\n\t  if (result.months < 0) {\n\t\tresult.years--;\n\t\tresult.months += 12;\n\t  }\n\t  return result;\n\t}\n\tvar end_schedule_difference = {\n\t  \"years\": 1,\n\t  \"months\": 1,\n\t  \"days\": 1,\n\t  \"hours\": 1,\n\t  \"minutes\": 1,\n\t  \"seconds\": 1\n\t},\n\t\tstart_schedule_difference = {\n\t\t  \"years\": -1,\n\t\t  \"months\": -1,\n\t\t  \"days\": -1,\n\t\t  \"hours\": -1,\n\t\t  \"minutes\": -1,\n\t\t  \"seconds\": -1\n\t\t},\n\t\t_est = est_time_now();\n\tif (schedule) {\n\t  if (schedule.start_date && schedule.start_time_est) {\n\t\tvar schedule_started = date_time_value(schedule.start_date, schedule.start_time_est);\n\t\tstart_schedule_difference = diff_in_schedule(_est, schedule_started);\n\t\tlog(\"start_schedule_difference\", start_schedule_difference);\n\t  }\n\t  if (schedule.end_date && schedule.end_time_est) {\n\t\tvar schedule_started = date_time_value(schedule.end_date, schedule.end_time_est);\n\t\tend_schedule_difference = diff_in_schedule(_est, schedule_started);\n\t\tlog(\"end_schedule_difference\", end_schedule_difference);\n\t  }\n\t}\n\treturn {\n\t  ends_in: end_schedule_difference,\n\t  started: start_schedule_difference,\n\t  est_time_now: _est\n\t}\n  };\n  \n  WSAIO.saleClock = function (rule, product, mod) { \/\/module -> rd OR vd\n\tif (rule && rule.schedule_active && rule.schedule) {\n\t  var _sch = $ws.getSchedule(rule.schedule),\n\t\t  _show_clock = false;\n\t  if (_sch.ends_in) {\n\t\tif (\n\t\t  Number(_sch.ends_in.years) > 0 ||\n\t\t  Number(_sch.ends_in.months) > 0 ||\n\t\t  Number(_sch.ends_in.days) > 0 ||\n\t\t  Number(_sch.ends_in.hours) > 0 ||\n\t\t  Number(_sch.ends_in.minutes) > 0 ||\n\t\t  Number(_sch.ends_in.seconds) > 0\n\t\t) {\n\t\t  _show_clock = true;\n\t\t}\n\t  }\n\t  if (_show_clock && _sch.ends_in) {\n\t\ttry {\n\t\t  _show_clock = $ws.general_settings.sale_clock.show_sale_clock || false;\n\t\t} catch (e) {}\n\t\tif (_show_clock) {\n\t\t  $ws.runClock(rule.schedule, product.id, mod);\n\t\t} else {\n\t\t  $ws.removeClock(product.id);\n\t\t}\n\t  } else {\n\t\t$ws.removeClock(product.id);\n\t\tlog(\"Sale clock was disabled\");\n\t  }\n\t} else {\n\t  log(\"No schedule found\");\n\t}\n  };\n  \n  WSAIO.removeClock = function (id) {\n\t$('.wsaio_sale_'+id).remove();\n  };\n  \n  WSAIO.runClock = function (schedule, id, mod) {\n\tvar _type = 1;\n\ttry {\n\t  _type = $ws.general_settings.sale_clock.sale_clock_type;\n\t} catch (e) {\n\t  log(e);\n\t}\n  \n\tfunction _runClock() {\n\t  var _ends = $ws.getSchedule(schedule);\n\t  if (_ends.ends_in) {\n\t\tif (\n\t\t  Number(_ends.ends_in.years) > 0 ||\n\t\t  Number(_ends.ends_in.months) > 0 ||\n\t\t  Number(_ends.ends_in.days) > 0 ||\n\t\t  Number(_ends.ends_in.hours) > 0 ||\n\t\t  Number(_ends.ends_in.minutes) > 0 ||\n\t\t  Number(_ends.ends_in.seconds) > 0\n\t\t) {\n\t\t  function getStyledClock(msg) {\n\t\t\tvar sty = $ws.general_settings.sale_clock.style,\n\t\t\t\t__css = '';\n\t\t\tif (sty.font_size) {\n\t\t\t  __css += 'font-size:' + sty.font_size + 'px;';\n\t\t\t}\n\t\t\tif (sty.border_radius) {\n\t\t\t  __css += 'border-radius:' + sty.border_radius + 'px;';\n\t\t\t}\n\t\t\tif (sty.hex_bg_color) {\n\t\t\t  __css += 'background-color:' + sty.hex_bg_color + ';';\n\t\t\t}\n\t\t\tif (sty.hex_fg_color) {\n\t\t\t  __css += 'color:' + sty.hex_fg_color + ';';\n\t\t\t}\n\t\t\tif (sty.padding) {\n\t\t\t  __css += 'padding:' + sty.padding + ';';\n\t\t\t}\n\t\t\tif (sty.text_align) {\n\t\t\t  __css += 'text-align:' + sty.text_align + ';';\n\t\t\t}\n\t\t\treturn '<div style=\"' + __css + '\">' + msg + '<\/div>'\n\t\t  }\n\t\t  var _msg = $ws.getClockTextByType(_ends.ends_in, schedule, _type),\n\t\t\t  show_time = \"\";\n\t\t  try {\n\t\t\tshow_time = $ws.general_settings.sale_clock.sale_clock_text1 + \" \" + _msg + \" \" + $ws.general_settings.sale_clock.sale_clock_text2;\n\t\t  } catch (e) {\n\t\t\tlog(e);\n\t\t  }\n\t\t  if (show_time == \"\") {\n\t\t\tshow_time = _msg;\n\t\t  }\n\t\t  $ws.removeClock(id);\n        if(WSAIO.product_saleClock_selector == ''){\n          WSAIO.product_saleClock_selector = WSAIO.product_inner_qb_table_selector;\n        }\n        $('.wsaio_'+id).parents(WSAIO.product_parent_grid_selector).find(WSAIO.product_saleClock_selector).after('<div class=\"wsaio_sale_'+id+'\" style=\"margin:5px 0px;\">'+getStyledClock(show_time)+'<\/div>')\n      } else {\n\t\t  $ws.removeClock(id);\n\t\t}\n\t  } else {\n\t\t$ws.removeClock(id);\n\t  }\n\t}\n\tif (_type == 1 || _type == 8 || _type == 9) {\n\t\tsetInterval(function() {\n\t\t\t\t  _runClock();\n\t}, 1000);\n  } else {\n\t_runClock();\n  }\n  };\n  \n  WSAIO.getClockTextByType = function (ends_in, schedule, type) {\n\tfunction get_date_time_value(date, time) {\n        \/\/ Parsing date to YYYY\/MM\/DD HH:MM:SS from YYYY-MM-DD HH:MM:SS\n        if(typeof date === \"string\")date = date.replace(\/-\/g, \"\/\");\n\t\t\n\t  var d = new Date(date),\n\t\t  year = d.getFullYear(),\n\t\t  month = d.getMonth() + 1,\n\t\t  dat = d.getDate();\n\t  return year + \"-\" + month + \"-\" + dat + \" \" + time;\n\t}\n\tvar ends_message = '';\n\ttry {\n\t  switch (type) {\n\t\tcase \"1\":\n\t\t  if (ends_in.days > 0) {\n\t\t\tends_message += ends_in.days + (ends_in.days == 1 ? 'day, ' : 'days, ');\n\t\t  }\n\t\t  if (ends_in.hours > 0) {\n\t\t\tends_message += ends_in.hours + (ends_in.hours == 1 ? 'hour, ' : 'hours, ');\n\t\t  }\n\t\t  if (ends_in.minutes > 0) {\n\t\t\tvar minutes = ends_in.minutes;\n\t\t\tif (minutes < 10) {\n\t\t\t  minutes = '0' + minutes;\n\t\t\t}\n\t\t\tends_message += minutes + (ends_in.minutes == 1 ? 'minute, ' : 'minutes, ');\n\t\t  }\n\t\t  if (ends_in.seconds >= 0) {\n\t\t\tvar seconds = ends_in.seconds;\n\t\t\tif (seconds < 10) {\n\t\t\t  seconds = '0' + seconds;\n\t\t\t}\n\t\t\tends_message += '<span class=\"wsaio--seconds\">' + seconds + '<\/span>' + (ends_in.seconds <= 1 ? 'second' : 'seconds');\n\t\t  }\n\t\t  break;\n\t\tcase '2':\n\t\t  if (ends_in.days > 0) {\n\t\t\tends_message += ends_in.days + (ends_in.days == 1 ? ' day' : ' days');\n\t\t  } else if (ends_in.days == 0) {\n\t\t\tif (ends_in.hours > 0) {\n\t\t\t  ends_message += ends_in.hours + (ends_in.hours == 1 ? 'hour' : 'hours');\n\t\t\t}\n\t\t  } else {\n\t\t\tends_message += \"\";\n\t\t  }\n\t\t  break;\n\t\tcase '3':\n\t\t  var options = {\n\t\t\ttimeZone: 'America\/New_York',\n\t\t\tweekday: 'long',\n\t\t\tyear: 'numeric',\n\t\t\tmonth: 'long',\n\t\t\tday: 'numeric',\n\t\t\thour: 'numeric',\n\t\t\tminute: 'numeric',\n\t\t\tsecond: 'numeric'\n\t\t  };\n\t\t  ends_message += new Date(get_date_time_value(schedule.end_date, schedule.end_time_est)).toLocaleDateString('en-UK', options);\n\t\t  break;\n\t\tcase '4':\n\t\t  var options = {\n\t\t\ttimeZone: 'America\/New_York',\n\t\t\tweekday: 'long',\n\t\t\tyear: 'numeric',\n\t\t\tmonth: 'long',\n\t\t\tday: 'numeric'\n\t\t  };\n\t\t  ends_message += new Date(get_date_time_value(schedule.end_date, schedule.end_time_est)).toLocaleDateString('en-UK', options);\n\t\t  break;\n\t\tcase '5':\n\t\t  var options = {\n\t\t\ttimeZone: 'America\/New_York',\n\t\t\tyear: 'numeric',\n\t\t\tmonth: 'long',\n\t\t\tday: 'numeric'\n\t\t  };\n\t\t  ends_message += new Date(get_date_time_value(schedule.end_date, schedule.end_time_est)).toLocaleDateString('en-UK', options);\n\t\t  break;\n\t\tcase '6':\n\t\t  var options = {\n\t\t\ttimeZone: 'America\/New_York',\n\t\t\tyear: 'numeric',\n\t\t\tmonth: 'short',\n\t\t\tday: 'numeric',\n\t\t\thour: 'numeric',\n\t\t\tminute: 'numeric',\n\t\t\tsecond: 'numeric'\n\t\t  };\n\t\t  ends_message += new Date(get_date_time_value(schedule.end_date, schedule.end_time_est)).toLocaleDateString('en-UK', options);\n\t\t  break;\n\t\tcase '7':\n\t\t  var options = {\n\t\t\ttimeZone: 'America\/New_York',\n\t\t\tyear: 'numeric',\n\t\t\tmonth: 'short',\n\t\t\tday: 'numeric'\n\t\t  };\n\t\t  ends_message += new Date(get_date_time_value(schedule.end_date, schedule.end_time_est)).toLocaleDateString('en-UK', options);\n\t\t  break;\n\t\tcase '8':\n\t\t  if (ends_in.days > 0) {\n\t\t\tends_message += ends_in.days + 'd:';\n\t\t  }\n\t\t  if (ends_in.hours > 0) {\n\t\t\tends_message += ends_in.hours + 'h:';\n\t\t  }\n\t\t  if (ends_in.minutes > 0) {\n\t\t\tvar minutes = ends_in.minutes;\n\t\t\tif (minutes < 10) {\n\t\t\t  minutes = '0' + minutes;\n\t\t\t}\n\t\t\tends_message += minutes + 'm:';\n\t\t  }\n\t\t  if (ends_in.seconds >= 0) {\n\t\t\tvar seconds = ends_in.seconds;\n\t\t\tif (seconds < 10) {\n\t\t\t  seconds = '0' + seconds;\n\t\t\t}\n\t\t\tends_message += '<span class=\"wsaio-seconds\">' + seconds + '<\/span>' + 's';\n\t\t  }\n\t\t  break;\n\t\tcase '9':\n\t\t  if (ends_in.days > 0) {\n\t\t\tends_message += ends_in.days + (ends_in.days == 1 ? 'day ' : 'days ');\n\t\t  }\n\t\t  if (ends_in.hours > 0) {\n\t\t\tends_message += ends_in.hours + (ends_in.hours == 1 ? 'hour ' : 'hours ');\n\t\t  }\n\t\t  if (ends_in.minutes > 0) {\n\t\t\tvar minutes = ends_in.minutes;\n\t\t\tif (minutes < 10) {\n\t\t\t  minutes = '0' + minutes;\n\t\t\t}\n\t\t\tends_message += minutes + (ends_in.minutes == 1 ? 'minute ' : 'minutes ');\n\t\t  }\n\t\t  if (ends_in.seconds >= 0) {\n\t\t\tvar seconds = ends_in.seconds;\n\t\t\tif (seconds < 10) {\n\t\t\t  seconds = '0' + seconds;\n\t\t\t}\n\t\t\tends_message += '<span class=\"wsaio-seconds\">' + seconds + '<\/span>' + (ends_in.seconds <= 1 ? 'second' : 'seconds');\n\t\t  }\n\t\t  break;\n\t\tdefault:\n\t\t  break;\n\t  }\n\t} catch (e) {\n\t  log(e);\n\t}\n\treturn ends_message;\n  };\n  \n  WSAIO.isCustomerLoggedIn = function () {\n\tvar is_logged = false;\n\tif (WSAIO.customer && WSAIO.customer.id) {\n\t  is_logged = true;\n\t}\n\treturn is_logged;\n  };\n  \n  WSAIO.isWholesaleCustomer = function () {\n\tvar is_vd_applied = false;\n\tvar is_rd_applied = false;\n\tvar is_cart_ld_applied = $ws.cartLevelDiscount() ? true : false;\n\tvar is_ships_applied = WSAIO.ships_exists ? false : true;\n\tif (WSAIO.regular_discounts && WSAIO.regular_discounts.length > 0) {\n\t  \/\/ for loop\n\t  for (var i = 0, len_i = $ws.regular_discounts.length; i < len_i; i++) {\n\t\tvar regular_discount = $ws.regular_discounts[i];\n\t\tif (regular_discount.state !== 'published') continue;\n\t\tif ($ws.checkCustomer(regular_discount.customer_group, regular_discount.tags, regular_discount.tags_excluded) === false) continue;\n\t\tif (regular_discount.schedule_active) {\n\t\t  var _schedule = $ws.getSchedule(regular_discount.schedule);\n\t\t  log(\"_schedule\", _schedule);\n\t\t  if (_schedule.ends_in) {\n\t\t\tif (\n\t\t\t  Number(_schedule.ends_in.years) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.months) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.days) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.hours) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.minutes) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.seconds) <= 0\n\t\t\t) {\n\t\t\t  log(\"This rule was expired\", _schedule);\n\t\t\t  continue;\n\t\t\t}\n\t\t\tif (\n\t\t\t  Number(_schedule.started.years) >= 0 &&\n\t\t\t  Number(_schedule.started.months) >= 0 &&\n\t\t\t  Number(_schedule.started.days) >= 0 &&\n\t\t\t  Number(_schedule.started.hours) >= 0 &&\n\t\t\t  Number(_schedule.started.minutes) >= 0 &&\n\t\t\t  Number(_schedule.started.seconds) >= 0\n\t\t\t) {\n\t\t\t  log(\"This rule was schedules and will be started in\", _schedule);\n\t\t\t  continue;\n\t\t\t}\n\t\t  }\n\t\t}\n\t\tis_rd_applied = true;\n\t  } \/\/ end for loop\n\t}\n\tif (!is_rd_applied && WSAIO.volume_discounts && WSAIO.volume_discounts.length > 0) {\n\t  \/\/ for loop\n\t  for (var i = 0, len_i = $ws.volume_discounts.length; i < len_i; i++) {\n\t\tvar volume_discount = $ws.volume_discounts[i];\n\t\tif (volume_discount.state !== 'published') continue;\n\t\tif ($ws.checkCustomer(volume_discount.customer_group, volume_discount.tags, volume_discount.tags_excluded) === false) continue;\n\t\tif (volume_discount.schedule_active) {\n\t\t  var _schedule = $ws.getSchedule(volume_discount.schedule);\n\t\t  log(\"_schedule\", _schedule);\n\t\t  if (_schedule.ends_in) {\n\t\t\tif (\n\t\t\t  Number(_schedule.ends_in.years) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.months) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.days) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.hours) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.minutes) <= 0 &&\n\t\t\t  Number(_schedule.ends_in.seconds) <= 0\n\t\t\t) {\n\t\t\t  log(\"This rule was expired\", _schedule);\n\t\t\t  continue;\n\t\t\t}\n\t\t\tif (\n\t\t\t  Number(_schedule.started.years) >= 0 &&\n\t\t\t  Number(_schedule.started.months) >= 0 &&\n\t\t\t  Number(_schedule.started.days) >= 0 &&\n\t\t\t  Number(_schedule.started.hours) >= 0 &&\n\t\t\t  Number(_schedule.started.minutes) >= 0 &&\n\t\t\t  Number(_schedule.started.seconds) >= 0\n\t\t\t) {\n\t\t\t  log(\"This rule was schedules and will be started in\", _schedule);\n\t\t\t  continue;\n\t\t\t}\n\t\t  }\n\t\t}\n\t\tis_vd_applied = true;\n\t  } \/\/ end for loop\n\t}\n\tif (!is_rd_applied && !is_vd_applied && WSAIO.app_shipping && WSAIO.app_shipping.length > 0) {\n\t  for (var kktt = 0; kktt < WSAIO.app_shipping.length; kktt++) {\n\t\tvar temp_app_shipping = WSAIO.app_shipping[kktt];\n\t\tif (temp_app_shipping.status === \"active\") {\n\t\t  switch (temp_app_shipping.customer_group) {\n\t\t\tcase \"all\":\n\t\t\t  if (temp_app_shipping.except_logged_in) {\n\t\t\t\tif (WSAIO.isCustomerLoggedIn() === false) {\n\t\t\t\t  is_ships_applied = true;\n\t\t\t\t}\n\t\t\t  } else {\n\t\t\t\tis_ships_applied = true;\n\t\t\t  }\n\t\t\t  break;\n\t\t\tcase \"logged_in\":\n\t\t\t  is_ships_applied = true;\n\t\t\t  break;\n\t\t\tcase \"tag_based\":\n\t\t\t  if (WSAIO.isCustomerLoggedIn()) {\n\t\t\t\tif (WSAIO.customer.tags && WSAIO.customer.tags.length > 0) {\n\t\t\t\t  for (var ctk = 0; ctk < WSAIO.customer.tags.length; ctk++) {\n\t\t\t\t\tvar dfes = WSAIO.customer.tags[ctk];\n\t\t\t\t\tif (temp_app_shipping.customer_tags.findIndex(function (t) {\n\t\t\t\t\t  return t.toLowerCase() == dfes.toLowerCase()\n\t\t\t\t\t}) > -1) {\n\t\t\t\t\t  is_ships_applied = true;\n\t\t\t\t\t  break;\n\t\t\t\t\t}\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  break;\n\t\t\tdefault:\n\t\t\t  break;\n\t\t  }\n\t\t}\n\t  }\n\t}\n\tif (!is_vd_applied) {\n\t  log(\"WSAIO: volume discount not found\");\n\t}\n\tif (!is_rd_applied) {\n\t  log(\"WSAIO: regular discount not found\");\n\t}\n\tif (!is_ships_applied) {\n\t  log(\"WSAIO: shipping not found\");\n\t}\n\tif (!is_cart_ld_applied) {\n\t  log(\"WSAIO: cart level discount not found\");\n\t}\n\tif (is_vd_applied || is_rd_applied || is_ships_applied || is_cart_ld_applied) {\n\t  return true;\n\t} else {\n\t  return false;\n\t}\n  };\n  WSAIO.buyNowEventListener()\n  WSAIO.ajax = function (params) {\n    if (params) {\n    $.ajax({\n        url: params.url,\n        type: params.type,\n        data: params.data,\n        dataType: 'json',\n        success: function(responseTxt) {\n            return params.success(responseTxt);\n        },\n        error: function(error){\n            return params.error(error);\n        }\n      })\n    }else{\n        throw Error(\"Ajax parameters can't be null. required parameters are type and url. Optional parameters are success and error functions\");\n    }\n  }\n  \n  if (isNaN(WSAIO.buy_now_btn_interval)) {\n\tWSAIO.buy_now_btn_interval = 1000;\n  }\n  \n  function serverLogging(pre_checkout) {\n\tvar logging_data = {\n\t  is_wholesale: WSAIO.isWholesaleCustomer(),\n\t  customer: {\n\t\tid: WSAIO.customer.id,\n\t\temail: WSAIO.customer.email,\n\t\ttags: WSAIO.customer.tags\n\t  },\n\t  template: WSAIO.landingTemplate,\n\t  shop: {\n\t\turl: WSAIO.shopInfo.url,\n\t\tshop: WSAIO.shopInfo.shop\n\t  },\n\t  cart: WSAIO.cart_object,\n\t  date: new Date(),\n\t  pre_checkout: pre_checkout || {}\n\t};\n\tlocalStorage.setItem(\"wsaio_logging\", JSON.stringify(logging_data));\n  }\n  serverLogging();\n  \n  WSAIO.run_app = function () {\n\tif (window.Currency && window.Currency.rates) {\n\t  WSAIO.Currency.rates = window.Currency.rates;\n\t}\n\tif ($ws.general_settings.discount_method === 'line_items' && true === WSAIO.general_settings.enable_additional_coupon_code) {\n\t  $ws.DiscountCode.addForm();\n\t  $ws.DiscountCode.subscribe(); \/\/ subscribe on click event\n\t}\n\tif ($ws.landingTemplate === \"cart\") {\n\t  $ws.checkoutEventListner(); \/\/ Subscribe checkout button on click event\n\t  $ws.preloadCheckout(); \/\/ Get wholesale price from server on window load\n\t}\n\t$ws.signUpForm();\n\t\n\ttry {\n\t  if (typeof window.wsaio_execute_custom_code === 'function') {\n\t\twindow.wsaio_execute_custom_code($)\n\t  }\n\t} catch (e) {\n\t  log(e);\n\t}\n  };\n  window.wsaioClosePreview = function () {\n\tWSAIO.removeQueryString(\"test-mode\", WSAIO.getParameterByName(\"test-mode\")[0]);\n\tlocalStorage.removeItem(\"wsaio-app-mode\");\n\tWSAIO.user_mode = \"live\";\n\tsetTimeout(function () {\n\t  window.location.replace('https:\/\/' + Shopify.shop);\n\t}, 500);\n  }\n  \n  window.wsaioHidePreview = function () {\n\t$(\".wholesaleAllInOnePreview\").remove();\n\t$(\"html\").css(\"padding-bottom\", \"\");\n  }\n  \n  WSAIO.addPreviewBar = function () {\n\tvar previewBar = '<div class=\"wholesaleAllInOnePreview\" style=\"background-color: white;display:flex;height: 60px;align-items: center;width: 100%;padding: 13px 0px;box-shadow: rgba(0, 0, 0, 0.2) 0px -1px 3px;overflow: hidden;position: fixed;bottom: 0;left: 0;right: 0;z-index: 3147483648;opacity: 0.97;\">'+\n\t\t'<div style=\"flex-grow:1;padding-left:20px\"><p style=\"margin: 0px;color:black\"><span>'+\n\t\t'<b>Wholesale All In One Preview: <\/b><\/span>'+\n\t\t'Wholesale pricing are only visible to you. <a href=\"https:\/\/support.digitalcoo.com\/hc\/en-us\/articles\/360042800512\"><u>Learn More<\/u><\/a><\/p><\/div>'+'<div style=\"padding-right: 23px;\">'+\n\t\t'<button class=\"ws--preview-bar-btn\" onclick=\"wsaioClosePreview();\">Close Preview<\/button>'+\n\t\t'<button style=\"width: auto;border:none;margin-left:.3rem;background:0 0;box-shadow:none;color:#007ace;font-size:14px;opacity:1\" onclick=\"wsaioHidePreview();\">Hide bar<\/button>'+\n\t\t'<\/div>'+\n\t\t'<\/div>';\n\t0 == $(\".wholesaleAllInOnePreview\").length && $(\"body\").append(previewBar);\n\t$(\"html\").css(\"padding-bottom\", \"60px\");\n  }\n  \n  WSAIO.store = {\n\tget: function (key) {\n\t  return sessionStorage.getItem(key);\n\t},\n\tset: function (key, value) {\n\t  return sessionStorage.setItem(key, value);\n\t},\n\tdel: function (key) {\n\t  return sessionStorage.removeItem(key);\n\t}\n  }\n  \n  WSAIO.handleBrowserURL = function () {\n\tfunction $track_overriding(product, variant, selector, trackClass) {\n\t  var counter = 1;\n\t  function $check(counter) {\n\t\tlog(\"$tracking variant change...\");\n\t\tcounter++;\n\t\tif($(selector).hasClass(trackClass)){\n\t\t  \/\/ log(\"$tracking variant changed! Discount did not override\");\n\t\t}\n\t\telse{\n\t\t  log(\"$tracking Discount has been overrided by another function. Let's change it according to WSAIO\");\n\t\t  WSAIO.variantChange(product, variant);\n\t\t  counter = 3000;\n\t\t}\n\t\tif(counter < 3000){\n\t\t  setTimeout(function () {\n\t\t\t$check(counter);\n\t\t  }, 1);\n\t\t}\n\t  }\n\t  $check(counter);\n\t}\n\tfunction $handle_variant_change(variant_id) {\n\t  var pt_index = -1;\n\t  try {\n\t\tpt_index = WSAIO.product_details.variants.findIndex(function (x) {\n\t\t  return x.id == variant_id\n\t\t});\n\t  } catch (e) {}\n\t  if($(WSAIO.product_price_selector).hasClass(\"wsdapp\")){\n\t\t$(WSAIO.product_price_selector).removeClass(\"wsdapp\")\n\t  }\n\t  if (pt_index > -1) {\n\t\t$ws.selected_variant = WSAIO.product_details.variants[pt_index];\n\t\tvar variant = WSAIO.product_details.variants[pt_index];\n\t\tWSAIO.variantChange(WSAIO.product_details, variant);\n\t\t$track_overriding(WSAIO.product_details, variant, WSAIO.product_price_selector, \"wsdapp\");\n\t  }\n\t}\n\tvar selected_variant_id = WSAIO.getParameterByName(\"variant\")[0];\n\tif(selected_variant_id){\n\t  log(\"Got variant id from browser url\");\n\t  $handle_variant_change(selected_variant_id);\n\t}\n\telse{\n\t  setTimeout(function () {\n\t\tselected_variant_id = $('[name=\"id\"]').val();\n\t\tif(selected_variant_id){\n\t\t  log(\"Got variant id from name=id attribute\");\n\t\t  $handle_variant_change(selected_variant_id);\n\t\t}\n\t\telse{\n\t\t  isError(\"Error 404! Variant ID not found\");\n\t\t}\n\t  }, 1000);\n\t}\n  \n  };\n  \n  WSAIO.listenLocationChange = (function () {\n\tvar pushState = history.pushState;\n\tvar replaceState = history.replaceState;\n\thistory.pushState = function() {\n\t  pushState.apply(history, arguments);\n\t  window.dispatchEvent(new Event('pushstate'));\n\t  window.dispatchEvent(new Event('locationchange'));\n\t};\n\thistory.replaceState = function() {\n\t  replaceState.apply(history, arguments);\n\t  window.dispatchEvent(new Event('replacestate'));\n\t  window.dispatchEvent(new Event('locationchange'));\n\t};\n\twindow.addEventListener('popstate', function() {\n\t  window.dispatchEvent(new Event('locationchange'))\n\t});\n\t\/\/ window.addEventListener('locationchange', WSAIO.handleBrowserURL);\n  })();\n  \n  if ($ws.app_auto_start) {\n\t$ws.run_app();\n  }\n  setTimeout(function(){\n\tWSAIO.autoInstallScript($wsj);\n  },200);\n  }; \/\/end WSAIO.init\n  \n  function ws_load_app(jQuery) {\n\tif (WSAIO.db_config == 'database') {\n\t  jQuery.ajax({\n\t\ttype: 'GET',\n\t\turl: WSAIO.App.url + '\/api\/2021-03\/get-rules?shop=' + WSAIO.shopInfo.shop,\n\t\tcache: false,\n\t\tsuccess: function (rules) {\n\t\t  if (rules) {\n\t\t\tif (rules.volume_discounts) {\n\t\t\t  WSAIO.volume_discounts = rules.volume_discounts;\n\t\t\t}\n\t\t\tif (rules.regular_discounts) {\n\t\t\t  WSAIO.regular_discounts = rules.regular_discounts;\n\t\t\t}\n\t\t\tif (rules.cart_discounts) {\n\t\t\t  WSAIO.cart_ld_discounts = WSAIO.cart_discounts;\n\t\t\t}\n\t\t\tWSAIO.init(jQuery);\n\t\t  }\n\t\t},\n\t\terror: function (error) {\n\t\t  if(!WSAIO.no_logs){\n\t\t\tconsole.error('WSAIO could not be initialized.', error);\n\t\t  }\n\t\t}\n\t  });\n\t} else {\n\t  WSAIO.init(jQuery);\n\t}\n  }\n  \n  WSAIO.removeQueryString = function (a, d) {\n\tvar b = document.location.href,\n\t\tc = location.search;\n\t\"\" != a ? (d = encodeURIComponent(d), a = a + \"=\" + d, \"-1\" != c.indexOf(\"?\" + a + \"&\") ? b = b.replace(\"?\" + a + \"&\", \"?\") : \"-1\" != c.indexOf(\"&\" + a + \"&\") ? b = b.replace(\"&\" + a + \"&\", \"&\") : \"-1\" != c.indexOf(\"?\" + a) ? b = b.replace(\"?\" + a, \"\") : \"-1\" != c.indexOf(\"&\" + a) && (b = b.replace(\"&\" + a, \"\"))) : (c = location.search, b = b.replace(c, \"\"));\n\thistory.pushState({\n\t  state: 1,\n\t  rand: Math.random()\n\t}, \"\", b)\n  };\n  \n  \n  \n  WSAIO.getParameterByName = function (e) {\n\tfor (var b = [], c = window.location.search.substring(1).split(\"&\"), a = 0; a < c.length; a++) {\n\t  var d = c[a].split(\"=\");\n\t  d[0] == e && b.push(decodeURIComponent(d[1]))\n\t}\n\treturn b\n  };\n  \n  var waioLoadScript = function (c, b) {\n\tvar a = document.createElement(\"script\");\n\ta.type = \"text\/javascript\";\n\ta.readyState ? a.onreadystatechange = function () {\n\t  if (\"loaded\" == a.readyState || \"complete\" == a.readyState) a.onreadystatechange = null, b()\n\t\t} : a.onload = function () {\n\t  b()\n\t};\n\ta.src = c;\n\tdocument.getElementsByTagName(\"head\")[0].appendChild(a)\n  };\n  \n  if (\"yes\" === WSAIO.getParameterByName(\"test-mode\")[0]) {\n\tWSAIO.user_mode = \"test\";\n\tlocalStorage.setItem(\"wsaio-app-mode\", \"test\");\n\tWSAIO.show_preview_bar = true;\n  }\n  \n  if (localStorage.getItem(\"wsaio-app-mode\") === \"yes\") {\n\tWSAIO.show_preview_bar = true;\n  }\n  \n  if (WSAIO.app_mode === 'live' && WSAIO.disable_logs_when_live === true) {\n\tWSAIO.log = '';\n\tWSAIO.errorLog = '';\n  }\n  \n  if (WSAIO.app_mode === \"live\" || (WSAIO.app_mode === WSAIO.user_mode)) {\n\tvar jQ = typeof window.WSAIO_GET_JQUERY === \"function\" ? window.WSAIO_GET_JQUERY() : jQuery;\n    if(jQ)ws_load_app(jQ);\n  }\n  else {\n\tif(!WSAIO.no_logs){\n\t  console.warn(\"%c'Wholesale All In One' is disabled\", \"font-size: 20px\");\n\t}\n\tWSAIO_is_disabled = true;\n  }\n\n  WSAIO.autoInstallScript = function($){\n\tvar $wsj = $;\n\tif(typeof window.token_enable != 'undefined' && window.token_enable == true){\n   \/\/ ====================Custom function define=========================\n   if(localStorage.getItem('product_in_collects') == null || (localStorage.getItem('store_products') != null && typeof WSAIO.store_products != 'undefined' &&  parseInt(localStorage.getItem('store_products')) != parseInt(WSAIO.store_products))){\n       try{\n    $wsj('.col_clct').each(function(){\n        var clctn_dta = JSON.parse($(this).attr(\"clct\"));\n\t\t\tfor(var ii = 0 ; ii < clctn_dta.length; ii++){\n\t\t\t\tWSAIO.product_in_collects.push(clctn_dta[ii]);\n\t\t\t\tWSAIO.products_with_collections.push(clctn_dta[ii]);\n\t\t\t\tWSAIO.products_in_collection.push(clctn_dta[ii]);\n\t\t\t\tWSAIO.product_collections.push(clctn_dta[ii]);\n          }\n        });\n\t   }catch(e){console.log(e)}\n    }\n    if(Object.keys(WSAIO.product_in_collects).length != 0){\n       localStorage.setItem('product_in_collects', JSON.stringify(WSAIO.product_in_collects));\n       localStorage.setItem('store_products', WSAIO.store_products);\n    }\n    else{\n      WSAIO.product_in_collects = JSON.parse(localStorage.getItem('product_in_collects'));\n       WSAIO.products_with_collections = JSON.parse(localStorage.getItem('product_in_collects'));\n       WSAIO.products_in_collection = JSON.parse(localStorage.getItem('product_in_collects'));\n       WSAIO.product_collections = JSON.parse(localStorage.getItem('product_in_collects'));\n    }\n    \n   function _apply_discount(\n\t current_template,\n\t product,\n\t parent_selector,\n\t price_selector,\n\t index,\n\t discount_type,\n\t collection_price_selector\n   ) {\n\t var selector = \"\";\n\t if (discount_type == \"specific_product\") {\n\t   selector = $wsj(parent_selector).find(price_selector);\n\t } else {\n\t   selector = collection_price_selector;\n\t }\n\t try {\n\t   WSAIO.productDiscount({\n\t\t item_price_selector: selector,\n\t\t template: current_template,\n\t\t product_id: product.id,\n\t\t product_handle: product.handle,\n\t\t variant_id: product.variants[index].id,\n\t\t variant_sku: product.variants[index].sku,\n\t\t variant_price: product.variants[index].price,\n\t\t variant_compare_at_price: product.variants[index].compare_at_price,\n\t   });\n\t } catch (error) {\n\t   \/\/ console.warn(error);\n\t }\n   }\n \n   WSAIO.custom_discount_function = function (t, v, h) {\n\t var discount_type = t,\n\t   default_product = \"\",\n\t   Vid = \"\";\n \n\t if (discount_type == \"specific_product\") {\n\t  if(typeof HandleQty != 'undefined'){HandleQty.init()} \n\t   if (v == null) {\n\t\t Vid = $wsj(WSAIO.Default_variant_id_selector).val();\n\t   } else {\n\t\t Vid = v;\n\t   }\n\t   if (h == null && WSAIO.product_details.handle != null) {\n\t\t prepare_data(WSAIO.product_details);\n\t   } else {\n\t\t if(typeof h != 'undefined'){\n\t\t   $wsj.getJSON(WSAIO.local_param + \"products\/\" + h + \".js\", function (product) {\n\t\t\t prepare_data(product);\n\t\t   });\n\t\t }\n\t   }\n\t   \n\t   function prepare_data(product) {\n\t\t if (typeof product.handle != \"undefined\") {\n\t\t   $wsj(WSAIO.product_parent_grid_selector)\n\t\t\t .find(WSAIO.product_price_selector)\n\t\t\t .removeClass(\"wsdapp\");\n\t\t   $wsj(WSAIO.product_parent_grid_selector)\n\t\t\t .find(WSAIO.product_price_selector)\n\t\t\t .removeClass(\"empty\");\n\t\t   var _indx = product.variants.findIndex(function (x) {\n\t\t\t return x.id == Vid;\n\t\t   });\n\t\t   window.selected_variant_id = product.variants[_indx].id;\n\t\t   WSAIO.variantChange(product, product.variants[_indx]);\n\t\t   _apply_discount(\n\t\t\t \"product\",\n\t\t\t product,\n\t\t\t WSAIO.product_parent_grid_selector,\n\t\t\t WSAIO.product_price_selector,\n\t\t\t _indx,\n\t\t\t discount_type\n\t\t   );\n\t\t }\n\t   }\n\t } else if (discount_type == \"specific_collection\") {\n\t   $wsj(WSAIO.collection_items_each_selector).each(function (index, item) {\n\t\t if (item.querySelector(\"a[href]\") == null) {\n\t\t   return false;\n\t\t }\n\t\t var handle = null;\n\t\t if (h == null) {\n\t\t   handle = item.querySelector(\"a[href]\").getAttribute(\"href\");\n\t\t }\n\t\t var itemSelector = item.querySelector(\n\t\t   WSAIO.collection_item_price_selector\n\t\t );\n\t\t if (handle) {\n\t\t   var product_handle = null,\n\t\t\t productIndex = -1;\n\t\t   try {\n\t\t\t product_handle = handle.split('\/products\/')[1];\n\t\t\t product_handle = product_handle.split('?')[0];\n\t\t   } catch (e) {}\n\t\t   jQuery.getJSON(WSAIO.local_param + \"products\/\" + product_handle+\".js\", function (product) {\n\t\t\t _apply_discount(\n\t\t\t   \"collection\",\n\t\t\t   product,\n\t\t\t   null,\n\t\t\t   null,\n\t\t\t   0,\n\t\t\t   discount_type,\n\t\t\t   itemSelector\n\t\t\t );\n      }).always(function () {\n        $('.price--on-sale.wsdapp').parents('.card-wrapper').find('.card__badge').remove()\n\t\t   });\n\t\t }\n\t   });\n\t }\n   };\n \n \n   \/\/ =====================Call function================\n   WSAIO.custom_discount_function(\"specific_product\");\n   \/\/ ===================variant change=================\n   $wsj(WSAIO.Default_variant_selector).on(\"change\", function () {\n\t setTimeout(function () {\n\t   WSAIO.custom_discount_function(\"specific_product\");\n\t }, 2000);\n   });\n   \/\/ ===================Quick View=====================\n   function quickViewDiscount() {\n\t if(typeof HandleQty != 'undefined'){HandleQty.init()} \n\t var Vid = $wsj(WSAIO.quickView_parent_Selector).find('[name=\"id\"]').val();\n\t var handle = null;\n\t handle = $wsj(WSAIO.quickView_parent_Selector)\n\t   .find(WSAIO.quickView_handleSelector)\n\t   .attr(\"href\");\n\t if (handle) {\n\t   var product_handle = null,\n\t\t productIndex = -1;\n\t   try {\n\t\t product_handle = handle.split(\"?\")[0].split(\"\/\")[\n\t\t   handle.split(\"\/\").length - 1\n\t\t ];\n\t   } catch (e) {}\n\t }\n \n\t jQuery.getJSON(WSAIO.local_param + \"products\/\" + product_handle + \".js\", function (product) {\n\t   window.current_product = product;\n\t   prepare_data(product);\n\t });\n \n\t function prepare_data(product) {\n\t   if (typeof product.handle != \"undefined\") {\n\t\t $wsj(WSAIO.quickView_parent_Selector)\n\t\t   .find(WSAIO.product_price_selector)\n\t\t   .removeClass(\"wsdapp\");\n\t\t $wsj(WSAIO.quickView_parent_Selector)\n\t\t   .find(WSAIO.product_price_selector)\n\t\t   .removeClass(\"empty\");\n\t\t var _indx = product.variants.findIndex(function (x) {\n\t\t   return x.id == Vid;\n\t\t });\n\t\t window.selected_variant_id = product.variants[_indx].id;\n\t\t WSAIO.variantChange(product, product.variants[_indx]);\n\t\t _apply_discount(\n\t\t   \"product\",\n\t\t   product,\n\t\t   WSAIO.quickView_parent_Selector,\n\t\t   WSAIO.product_price_selector,\n\t\t   _indx,\n\t\t   \"specific_product\"\n\t\t );\n\t   }\n\t }\n   }\n   var isQuickViewOpen = false;\n   var _intv = setInterval(function () {\n\t if (\n\t   $wsj(WSAIO.quickView_parent_Selector).length > 0 &&\n\t   isQuickViewOpen == false\n\t ) {\n\t   isQuickViewOpen = true;\n \n\t   setTimeout(function () {\n\t\t quickViewDiscount();\n\t   }, 1000);\n \n\t   \/\/Quick Variant change\n\t   $wsj(WSAIO.quickView_variantSelector).on(\"change\", function () {\n\t\t setTimeout(function () {\n\t\t   quickViewDiscount();\n\t\t }, 1500);\n\t   });\n\t } else if (\n\t   !$wsj(WSAIO.quickView_parent_Selector).length > 0 &&\n\t   isQuickViewOpen == true\n\t ) {\n\t   isQuickViewOpen = false;\n\t }\n   }, 500);\n   \/\/ ==============collection discount function========\n   WSAIO.custom_discount_function(\"specific_collection\");\n   if (WSAIO.template == \"collection\" || WSAIO.template == \"search\") {\n\t $wsj(document).bind(\"DOMNodeInserted\", function (e) {\n\t   var element = e.target;\n\t   var elm = $wsj(element).attr(\"class\");\n\t   if (typeof elm != \"undefined\") {\n\t\t if (\n\t\t   elm.indexOf(\"collection page-width\") > -1 ||\n\t\t   elm.indexOf(\n\t\t\t \"mobile-facets__open-label button-label medium-hide large-up-hide\"\n\t\t   ) > -1\n\t\t ) {\n\t\t   setTimeout(function () {\n\t\t\t WSAIO.custom_discount_function(\"specific_collection\");\n\t\t   }, 500);\n\t\t }\n\t   }\n\t });\n   }\n\t var Recentlyviewedd = false;\n\t var _intv = setInterval(function() {\n\t\t if ($wsj('product-recommendations .grid__item').length > 0 && Recentlyviewedd == false) {\n\t\t\t Recentlyviewedd = true;\n\t\t\t setTimeout(function() {\n\t\t\t\t  WSAIO.custom_discount_function(\"specific_collection\");\n\t\t\t\t  clearInterval(_intv) ;\n\t\t\t }, 500)\n\t\t } else if (!$wsj('product-recommendations .grid__item').length > 0 && Recentlyviewedd == true) {\n\t\t\t Recentlyviewedd = false;\n\t\t }\n\t }, 500);\n\t $wsj('[type=\"search\"]').keyup(function() {\n\t   setTimeout(function() {\n\t\t  WSAIO.custom_discount_function(\"specific_collection\");\n\t   }, 1500)\n   })\n   \/\/=================== cart discount fucntion=========\n   try {\n\tif($wsj('td.cart-item__details a.cart-item__name').siblings('div.product-option').length == 0){\n\t\t$wsj('td.cart-item__details a.cart-item__name').siblings('.cart-item__discounted-prices').addClass('singlepricee')     \n\t}else{\n\t\t$wsj('td.cart-item__details a.cart-item__name').siblings('div.product-option').addClass('singlepricee')  \n\t}\n   } catch (error) {}\n   if (typeof WSAIO.cartDrawer != 'undefined'){WSAIO.cartDrawer(100)}\n   \/\/ ================== cart quantity change ==========\n   $wsj(document).on(\"change\", WSAIO.cart_qty_input_selector, function () {\n\t setTimeout(function () {\n\t   try {\n\t\tif($wsj('td.cart-item__details a.cart-item__name').siblings('div.product-option').length == 0){\n\t\t\t$wsj('td.cart-item__details a.cart-item__name').siblings('.cart-item__discounted-prices').addClass('singlepricee')     \n\t\t}else{\n\t\t\t$wsj('td.cart-item__details a.cart-item__name').siblings('div.product-option').addClass('singlepricee')  \n\t\t}\n\t   } catch (error) {}\n\t }, 1500);\n\t if (typeof WSAIO.cartDrawer != 'undefined'){WSAIO.cartDrawer(1500)}\n   });\n   $wsj(document).on(\"click\", WSAIO.cart_qty_btn_selector, function () {\n\t setTimeout(function () {\n\t   try {\n\t\tif($wsj('td.cart-item__details a.cart-item__name').siblings('div.product-option').length == 0){\n\t\t\t$wsj('td.cart-item__details a.cart-item__name').siblings('.cart-item__discounted-prices').addClass('singlepricee')     \n\t   }else{\n\t\t$wsj('td.cart-item__details a.cart-item__name').siblings('div.product-option').addClass('singlepricee')  \n\t   }\n\t   } catch (error) {}\n\t }, 1500);\n\t if (typeof WSAIO.cartDrawer != 'undefined'){WSAIO.cartDrawer(1500)}\n   });\n   \/\/==================== cart drawer ===============\n   var cartdrawerr = false;\n   var _intv = setInterval(function () {\n\t if ($wsj(\".drawer\").hasClass(\"active\") && cartdrawerr == false) {\n\t   cartdrawerr = true;\n\t   try {\n\t\t $wsj(\"td.cart-item__details a.cart-item__name\")\n\t\t   .siblings(\"div.product-option\")\n\t\t   .addClass(\"singlepricee\");\n\t   } catch (error) {}\n\t   if (typeof WSAIO.cartDrawer != 'undefined'){WSAIO.cartDrawer(100)}\n\t } else if (!$wsj(\".drawer\").hasClass(\"active\") && cartdrawerr == true) {\n\t   cartdrawerr = false;\n\t }\n   }, 200);\n   } \n  }","wsaio_main_liquid_file":"","wsaio_modules_liquid_file":"{%assign wsaio_include_jquery = 'false' %}\n<script src=\"{{ 'jquery3.6.0.min.js' | asset_url }}\" type=\"text\/javascript\"><\/script>\n<script src=\"\/\/cdn.shopify.com\/s\/javascripts\/currencies.js\"  type=\"text\/javascript\"><\/script>\n<script>if(typeof window.WSAIO==='undefined'){window.WSAIO={};}if(typeof WSAIO.App==='undefined'){WSAIO.App={};}<\/script>\n{% assign min = 1000 %}\n{% assign max = 9999999999999 %}\n{% assign diff = max | minus: min %}\n{% assign randomNumber = \"now\" | date: \"%N\" | modulo: diff | plus: min %}\n\n<script  src=\"{{ 'wholesale-all-in-one-module-min.js' | asset_url }}\" defer type=\"text\/javascript\"><\/script>\n{% assign ws_general_settings = shop.metafields.waioSettings.general_settings %}\n{% assign rules_operator = 'and' %}{%- for OC in shop.metafields.waioOC -%}{% assign key = OC | first %}{% assign item = OC | last %}{% if item.status == 'active' %}{%assign rules_operator = item.rules_operator %}{%assign rules_message = item.message %}{% capture rules_checked %}{% for rule in item.rules %}{% case rule.column %}{%when 'cart_original_total_price'%}{%assign rule_price = rule.condition |times: 100 %}{%case rule.relation %}{%when 'equal'%}{%if cart.original_total_price == rule_price %}true{%else%}false{%endif%}{%when 'not_equal'%}{%if cart.original_total_price != rule_price %}true{%else%}false{%endif%}{%when 'greater_than'%}{%if rule_price < cart.original_total_price  %}true{%else%}false{%endif%}{%when 'less_than'%}{%if rule_price > cart.original_total_price %}true{%else%}false{%endif%}{%else%}{%endcase%}{%when 'customer_has_an_account' %}{%case rule.relation %}{%when 'equal'%}{%if rule.condition == 'true' %}{%if customer %}true{%else%}false{% endif %}{%endif%}{%when 'not_equal'%}{%if rule.condition == 'true' %}{%if customer %}false{%else%}true{% endif %}{%endif%}{%else%}{%endcase%}{%when 'customer_tag' %}{%case rule.relation %}{%when 'equal'%}{%if customer %}{%for tag in customer.tags %}{% if tag == rule.condition%}true{%break%}{% endif %}{% if forloop.last == true %}false{% endif %}{%endfor%}{%else%}false{%endif%}{%when 'not_equal'%}{%if customer %}{%for tag in customer.tags %}{% if tag != rule.condition%}true{%break%}{% endif %}{% if forloop.last == true %}false{% endif %}{%endfor%}{%else%}false{%endif%}{%else%}{%endcase%}{% else %}{%endcase%}{% if forloop.last == true %}{%else%},{% endif %}{% endfor %}{%endcapture%}{% endif %}{%- endfor -%}\n<script>\n    if( typeof WSAIO !=='undefined'){\n      {% assign currency_code_enabled = settings.currency_code_enabled %}\n      {% if currency_code_enabled != blank %}\n       WSAIO.show_currenyLabel_withPrice = {{currency_code_enabled}}\n      {% endif %}\n     }\n\twindow.WSAIO_GET_JQUERY=function(){\n    if(\"undefined\" === typeof jQuery || 1.7 > parseFloat(jQuery.fn.jquery)){\n      return null;\n    }\n    {%- if wsaio_include_jquery == 'true' -%}\n    return jQuery.noConflict();\n    {%- else -%}\n    return jQuery;\n    {%- endif -%}\n\t}\n\n  WSAIO.market_selected = '{{ localization.country.iso_code }}' \n  \n  {% assign qof_list = '[' %}\n  {%for qofItem in shop.metafields.waioQOF%}\n      {%assign _qofItem = qofItem | last %}\n      {% if _qofItem.state == 'published' %}\n      {%assign page_name = _qofItem.displayOnPage | split :'\/' | last %}\n      {%assign current_url_check = canonical_url | split :'\/pages\/' | last %}\n        {% if current_url_check == page_name and canonical_url contains '\/pages\/' %}\n          window.QOF_page = true;\n        {% endif %}\n\n      {% comment %} create all QOFs links object  {% endcomment %}\n      {%- assign qof_list = qof_list | append: '{\"title\":\"'  | append: _qofItem.title |  append: '\",\"page_link\":\"' | append: _qofItem.displayOnPage | append: '\"}' -%}\n      {% if forloop.last == false %}\n        {%- assign qof_list =  qof_list | append: ',' -%}\n      {% endif %}   \n      {% endif %} \n    {% endfor %}\n  {% assign qof_list = qof_list | append : ']' %}\n\n  {% comment %} check QOFs navigation enable or disable {% endcomment %}\n  {% assign qof_navigatio_enable = false %}\n  {% for link in linklists.quick-order-form-navigation.links %}\n        {% if  link.title != blank %}\n          {% assign qof_navigatio_enable = true %}\n        {% endif %}\n  {% endfor %}\n\n  WSAIO.QOF_links = {{qof_list}};\n  WSAIO.qof_navigation_enable = {{qof_navigatio_enable}};\n\n   window.WSAIO_MODULE=function($){\n    if(typeof WSAIO != \"undefined\"){\n        \"undefined\"===typeof waioMOC&&(window.waioMOC={});\n        window.collection_id = {{ collection.id | json }};\n        WSAIO.default_limit = false;\n        window.current_product = window.current_product || {{product|json}};\n        window.selected_variant_id = window.selected_variant_id || {{product.selected_or_first_available_variant.id|json}};\n        window.customer_order_info = '{{ customer.orders.size }}';\n        window.customer = '{{  customer.id }}';\n        WSAIO.show_dynamic_OL_msg = false;\n        WSAIO.initModules = function($){\n            var tem_moc = {{shop.metafields.waioMOC | json }};\n            var w_original_total_price = {{cart.items_subtotal_price | json}};\n            var w_total_weight = {{cart.total_weight | json}};\n            var w_item_count = {{cart.item_count | json}};\n            var w_weight_with_unit = {{ cart.total_weight | weight_with_unit | json}};\n            window.is_loggedIn = {% if customer %}true{%else%}false{% endif %};\n            var shop = {{shop.domain | json }};\n            var customerTags = {{ customer.tags | json }} || [];\n            window.customer_tags = {{ customer.tags | json }} || [];\n            try{\n                customerTags = JSON.parse(customerTags);\n            }catch(e){}\n            var cart = {{ cart | json }};\n            var collection_handle = '{{ collection.handle }}';\n            var tempWaioQC = {{shop.metafields.waioQC | json }};\n            var waioQCTemp = [];\n\n            waioQCTemp = waioQCTemp.concat(Object.keys(tempWaioQC).map(function(a){return tempWaioQC[a]}));\n            WSAIO.quantity_controls = [];\n            if(typeof waioQCTemp !== \"undefined\" && waioQCTemp.length > 0){\n                var sortOrder = [\"tag_based\", \"logged_in\", \"all\"];\n                var sortOrder2 =  [\"variants\", \"products\",\"collections\",\"entire_store\"];\n                var temp = [];\n                for(var iter = 0; iter < sortOrder2.length; iter++){\n                    var _d = sortOrder2[iter];\n                    var temp1 = waioQCTemp.filter(function(x){return x.applies_to === _d});\n                    temp1.sort(function(a,b){\n                        var compA = $.inArray(a.customer_group, sortOrder);\n                        var compB = $.inArray(b.customer_group, sortOrder);\n                        return (compA < compB) ? -1 : (compA > compB) ? 1 : 0;\n                    });\n                    temp1.forEach(function(_f,_j){\n                        temp.push(_f);\n                    });\n                }\n                WSAIO.quantity_controls = temp; \n            }\n            waioMOC.rules=[];waioMOC.rules=waioMOC.rules.concat(Object.keys(tem_moc).map(function(a){return tem_moc[a]}));waioMOC.cart={original_total_price:w_original_total_price,total_weight:w_total_weight,item_count:w_item_count,weight_with_unit:w_weight_with_unit};waioMOC.oc={};\n            WSAIO.disable_checkout=!1;\n            var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b=\"undefined\"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};\n           \n            function disable_checkout(a, b, d) { WSAIO.disable_checkout_define(a, b, d);  }        \n            function minOrderControl() {  WSAIO.minOrderControl_define();  }\n              \n            WSAIO.order_control = function(){if(WSAIO.cart_qty_btn_selector != 'blank' && WSAIO.cart_qty_input_selector != 'blank' && WSAIO.app_mode_applied){minOrderControl()}};\n            WSAIO.disableCheckout = function(c,m,el){if(WSAIO.cart_qty_btn_selector != 'blank' && WSAIO.cart_qty_input_selector  != 'blank' && WSAIO.app_mode_applied){disable_checkout(c,m,el)}};\n            if(typeof WSAIO.fetchCart_define != 'undefined')WSAIO.fetchCart_define();          \n            if(typeof WSAIO.QOF_links_append != 'undefined') WSAIO.QOF_links_append();      \n            if(typeof WSAIO.loginLink != 'undefined')WSAIO.loginLink();\n        };\n    }\n    else{\n    }            \n\n    if(typeof WSAIO.cart_qty_handler_define != 'undefined')WSAIO.cart_qty_handler_define();\n    if(typeof WSAIO.app_enable_preview_define != 'undefined')WSAIO.app_enable_preview_define();\n    try{WSAIO.general_settings = JSON.parse('{{ws_general_settings}}');if(typeof WSAIO.general_settings.settings !== \"undefined\"){WSAIO.general_settings = WSAIO.general_settings.settings;}}catch(e){console.error(\"JSON Parsing error in settings.\",e)}\n    WSAIO.initModules(jQuery || $) \n    if(typeof WSAIO.buy_now_define != 'undefined')WSAIO.buy_now_define();\n    \n    {% assign NetTerm_Settings = shop.metafields.waioNetOrders.waio-net-term-order %}\n         {% if NetTerm_Settings.enabled %} \n               {% if NetTerm_Settings.customers_group == \"tag_based\" %}\n                      {% assign customer_tags = customer.tags | join: '~~~' | downcase | split: '~~~' %}\n                      {% assign eligible_tags = NetTerm_Settings.customers_tag  | downcase | split:',' %} \n                      {% assign show_button = false %}\n                      {% for e_tag in eligible_tags  %}\n                      {% if customer_tags != blank %}\n                        {% for ct_tag in customer_tags %}\n                          {% if e_tag == ct_tag %}\n                          {% assign show_button = true %}\n                          {% endif %}\n                        {% endfor %}\n                       {% endif %}\n                       {% endfor %}\n               {% else %}\n                  {% if customer %}\n                      {% assign show_button = true %}\n                  {% endif %}\n               {% endif %}\n          {% endif %}\n        {% if show_button %}\n          WSAIO.enable_netTerm = true;\n          var net_btn_label = \"{{NetTerm_Settings.checkout_btn_label}}\"\n          var net_cart_label = \"{{NetTerm_Settings.cart_message}}\"\n          {% if NetTerm_Settings.disable_checkout %}\n          if(typeof WSAIO != \"undefined\"){ $('.shopify-payment-button').addClass('wsaio_hideCheckout'); }\n          WSAIO.net_disable_default_checkout = true;\n          WSAIO.isShowCheckout = false;\n          {% endif %}\n        {% endif %}\n\n    WSAIO.showCheckoutLoader = function(){\n       $('.wsaio_loader').remove();\n       $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector).addClass('wsaio_hideCheckout')\n        $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector).after('<div class=\"wsaio_loader_checkout wsaio_loader\"> <div class=\"loading-spinner\"><\/div> <\/div>')\n    };\n\n    if( window.wsaio_involved != undefined && window.wsaio_involved == true && WSAIO.app_mode_applied){  WSAIO.showCheckoutLoader()  }\n    \n    window.addEventListener(\"load\", function(){\n         var $ = jQuery;\n         if(typeof WSAIO != 'undefined'){\n           WSAIO.loginLink();\n           if(typeof window.ZapietCheckoutEnabled != 'undefined'){\n           var valid_chk = false;\n            setInterval(function(){\n                if(window.ZapietCheckoutEnabled && valid_chk == false){ \n                  if(typeof WSAIO.checkoutEventListner != 'undefined'){WSAIO.checkoutEventListner()}\n                  valid_chk =true;                                   \n                }else if(!window.ZapietCheckoutEnabled && valid_chk == true){ \n                  valid_chk =false; \n                }\n              },100)\n           }\n\n        if(\"function\"===typeof WSAIO.initAddons){\n        WSAIO.initAddons(jQuery || $);\n        }\n          if(typeof current_product != 'undefined' && current_product != null){\n            $('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find('.wsaio_buynow').css('cssText','display:inline-block !important')\n          }\n          try{WSAIO.buyNowEventListener()}catch(e){}\n          if( window.wsaio_involved != undefined && window.wsaio_involved == true && WSAIO.app_mode_applied){\n          WSAIO.cart_qty_change_event();\n        }\n           setTimeout(function(){\n            if((typeof WSAIO != 'undefined' && typeof WSAIO.cartDrawer === 'function' && WSAIO.template === \"cart\") || (typeof WSAIO != 'undefined' && window.location.pathname.indexOf('pages\/net-term-order') > -1 )){\n            if(!jQuery.isEmptyObject(WSAIO.discount_response)){\n              WSAIO.preCheckoutResponse(WSAIO.discount_response)\n              WSAIO.callback(WSAIO.discount_response)\n              if(typeof WSAIO.loadcartQuantityControllers != 'undefined' && typeof WSAIO.load_checkout_restriction != 'undefined'){ WSAIO.load_checkout_restriction(); WSAIO.loadcartQuantityControllers([],function(e){WSAIO.run_checkout()});}else{WSAIO.run_checkout()}\n            }else{\n              WSAIO.preCheckout();\n            }\n          }\n            if(WSAIO.agreement_checkout_selector != '' && $(WSAIO.agreement_checkout_selector).length != 0 && window.wsaio_involved != undefined && window.wsaio_involved == true && WSAIO.app_mode_applied){\n              if($(WSAIO.agreement_checkout_selector).is(':checked')){\n                window.isAgree = true;\n                WSAIO.run_checkout()\n              }else{\n                window.isAgree = false;\n                WSAIO.run_checkout()\n              }\n              $(document).on('click', WSAIO.agreement_checkout_selector, function (e) {\n                if($(WSAIO.agreement_checkout_selector).is(':checked')){\n                  window.isAgree = true;\n                  WSAIO.run_checkout()\n                }else{\n                  window.isAgree = false;\n                  WSAIO.run_checkout()\n                }\n              })\n            }\n          \n          setTimeout(function(){\n                try{\n                  if(WSAIO != undefined && !WSAIO.main_liquid_file_included && (typeof WSAIO.isShowCheckout == 'undefined')){\n                    $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector).removeClass('wsaio_hideCheckout')\n                    $('.wsaio_coupon_group, .wsaio_coupon_link').css('cssText','display:block !important')\n                }\n                }catch(e){}\n                try{\n                  if((WSAIO != undefined || WSAIO.main_liquid_file_included) && (typeof WSAIO.isShowCheckout == 'undefined')){\n                      $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector).removeClass('wsaio_hideCheckout')\n                        $('.wsaio_coupon_group, .wsaio_coupon_link').css('cssText','display:block !important')\n                    }\n                    }catch(e){}\n                try{\n                  if(WSAIO == undefined || !WSAIO.isWholesaleCustomer() && (typeof WSAIO.isShowCheckout == 'undefined')){\n                      $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector).removeClass('wsaio_hideCheckout')\n                        $('.wsaio_coupon_group, .wsaio_coupon_link').css('cssText','display:block !important')\n                    }\n                    }catch(e){}\n                    if(WSAIO.buy_now_btn_replace == false || typeof WSAIO.buyNowEventListener == 'undefined' ){\n                    $('.shopify-payment-button .shopify-payment-button__button').css('cssText','display:inline-block !important')\n                    }\n                    $('.wsaio_loader_checkout').hide();\n            },1000);\n            if(typeof current_product != 'undefined' && current_product != null){\n              $('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find('.wsaio_buynow').css('cssText','display:inline-block !important')\n              if(WSAIO.buy_now_btn_replace == false){\n              $(WSAIO.product_parent_grid_selector).find('.wsaio_buynow').remove()\n              $('.wsaio_'+current_product.id).parents(WSAIO.product_parent_grid_selector).find('.shopify-payment-button .shopify-payment-button__button').css('cssText','display:inline-block !important')\n              }\n            }\n          },1050)\n        }else{\n          $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector).removeClass('wsaio_hideCheckout')\n            $('.wsaio_loader_checkout').hide();\n            $('.shopify-payment-button .shopify-payment-button__button').css('cssText','display:inline-block !important')\n        }\n        });\n\n      WSAIO.run_checkout = function(){\n        \n        if(WSAIO.app_mode_applied){\n        $('.wsaio_coupon_group, .wsaio_coupon_link').css('cssText','display:block !important')\n        WSAIO.checkoutAlert = $('<ol class=\"wsaio-alerts\"><\/ol>')\n    \n        if(WSAIO.replace_checkout){\n          $(WSAIO.replace_checkout_button).replaceWith(WSAIO.duplicate_checkout_html)\n          if(typeof WSAIO.checkoutEventListner != 'undefined' && typeof WSAIO.isWholesaleCustomer != 'undefined' && WSAIO.isWholesaleCustomer() !== false){\n            WSAIO.checkoutEventListner()\n          }else{\n            if(WSAIO.replace_checkout){\n              $(document).on('click',WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector, function (e) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                window.location.href = '\/checkout';\n              });\n            }\n          }\n          \n        }\n        {% assign runOC = true %}\n        {% for order_Cdata in shop.metafields.waioMOC %}\n          {% assign COdata = order_Cdata | last %}\n          {% assign check_OCrules = COdata | size %}\n          {% if check_OCrules == 0 %}\n          {% assign runOC = false %}\n          {% endif %}\n         {% endfor %}\n        {% if runOC %} WSAIO.order_control();WSAIO.disableCheckout(){% endif %}\n        if(WSAIO.default_limit){\n          if(typeof WSAIO.allow_normal_checkout__OC == 'undefined' || WSAIO.allow_normal_checkout__OC == false){\n             WSAIO.checkoutAlert.append('<li class=\"waio-orderControl-message\">' + WSAIO.checkout_message + \"<\/li>\");\n          }else{\n            WSAIO.checkoutAlert.append('<li class=\"waio-orderControl-message\">' + WSAIO.checkout_message + \"<\/li>\");\n             WSAIO.checkoutAlert.append('<li class=\"waio-orderControl-message\">Fulfill minimum order requirements to avail discount<\/li>');\n          }\n        }\n      \n        if(WSAIO.applied_shipping != undefined && WSAIO.applied_shipping.apply_shipping_charges && $('.Shipping_msg').length == 0 && WSAIO.shipping_message_applied){\n          WSAIO.checkoutAlert.after('<div class=\"Shipping_msg\" style=\"font-weight: 600;font-weight: bold; font-style: italic\">' + WSAIO.applied_shipping.final_ship_rule.message + \"<\/div>\");\n        }\n\n        {% if show_button %}\n          if($('.waio__net--wrapper').length == 0){\n            $(WSAIO.checkout_message_selector).after('<div class=\"waio__net--wrapper\"><div class=\"btn_stng\"><div class=\"demo_instruction align_mig\"><p class=\"texttt\">'+net_cart_label+'<\/p><\/div><a href=\"'+Shopify.routes.root+'pages\/net-term-order\" name=\"netTerm\" class=\" btn btn-lg align_mig btn\" > '+net_btn_label+'<\/a> <\/div>  <\/div>')\n          }\n          $(WSAIO.netTerm_checkout_selector).removeClass('wsaio_hideCheckout')\n         {% endif %}\n        if(typeof WSAIO.isShowCheckout == 'undefined'){\n          $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector).removeClass('wsaio_hideCheckout')\n        }else{\n          $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector).addClass('wsaio_hideCheckout')\n        }\n        $('.wsaio_coupon_group, .wsaio_coupon_link').css('cssText','display:block !important')\n    \n        $('.wsaio-alerts').remove();\n        $('.waio_agree_message').remove()\n        if(typeof window.MOQ_alert != 'undefined' && window.MOQ_alert!=''){\n          WSAIO.checkoutAlert = window.MOQ_alert;\n        }else{\n          if($('.wsaio-alerts').length == 0 && WSAIO.checkoutAlert != undefined){\n            $(WSAIO.checkout_message_selector).after(WSAIO.checkoutAlert);\n          }\n        }\n        WSAIO.cartLevelUpSell();\n        $('.wsaioUsellMessage,.Shipping_msg').remove();\n        if(WSAIO.wsaioUpSell_msg != undefined && WSAIO.wsaioUpSell_msg!= '' && $('.wsaioUsellMessage').length == 0){\n          if(typeof WSAIO.cart_level_upsell_message_select == 'undefined' || WSAIO.cart_level_upsell_message_select == ''){\n             $(WSAIO.checkout_message_selector).before('<div class=\"wsaioUsellMessage\">' + WSAIO.wsaioUpSell_msg + \"<\/div>\");\n          }else{\n             $(WSAIO.cart_level_upsell_message_select).before('<div class=\"wsaioUsellMessage\">' + WSAIO.wsaioUpSell_msg + \"<\/div>\");\n          }\n        }\n        if(WSAIO.applied_shipping != undefined && WSAIO.applied_shipping.apply_shipping_charges && $('.Shipping_msg').length == 0 && WSAIO.shipping_message_applied){\n          $(WSAIO.checkout_message_selector).after('<div class=\"Shipping_msg\" style=\"font-weight: 600;font-weight: bold; font-style: italic\">' + WSAIO.applied_shipping.final_ship_rule.message + \"<\/div>\");\n        }\n        if($('.wsaio-alerts').length == 0 && WSAIO.checkoutAlert != undefined && typeof window.MOQ_alert != 'undefined' && WSAIO.checkoutAlert.indexOf('<ul class=\"wsaio-alerts\"><li') > -1){\n          $(WSAIO.checkout_message_selector).after(WSAIO.checkoutAlert);\n        }\n\n        if(WSAIO.disable_checkout || window.disable_checkout_MOQ || window.isAgree == false){\n                if(WSAIO.agrrement_alert_message != '' && $('.waio_agree_message').length == 0 && typeof window.isAgree != 'undefined' && window.isAgree == false){\n                  $(WSAIO.checkout_message_selector).after('<p class=\"waio_agree_message\" style=\"font-size: 14px;\">'+WSAIO.agrrement_alert_message+'<\/p>');\n                }\n                if((typeof WSAIO.allow_normal_checkout__OC != 'undefined' && WSAIO.allow_normal_checkout__OC) && ((!window.disable_checkout_MOQ || $('.moq_error').length == 0) && (typeof window.isAgree == 'undefined' || window.isAgree))){\n                      $(WSAIO.netTerm_checkout_selector).addClass('checkout-disabled').attr('disabled','disabled').css({'pointer-events': 'none','cursor': 'default'})\n                }else{\n                      $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector+','+WSAIO.netTerm_checkout_selector).addClass('checkout-disabled').attr('disabled','disabled').css({'pointer-events': 'none','cursor': 'default'})\n                }\n        }else{\n            $(WSAIO.checkout_selector+','+WSAIO.duplicate_checkout_selector+','+WSAIO.netTerm_checkout_selector).removeClass('checkout-disabled').removeAttr('disabled').css({'pointer-events': 'auto','cursor': 'pointer'})\n        }\n        \n        $('.wsaio_loader_checkout').hide();\n      }\n    }\n        window.addEventListener(\"load\",function(){\n          if(typeof WSAIO != 'undefined' && window.wsaio_involved != undefined && window.wsaio_involved == true && typeof WSAIO.preCheckout == 'undefined' && WSAIO.app_mode_applied){\n            WSAIO.preloadCheckout = function (){\n              WSAIO.showCheckoutLoader();\n              try {\n                    \"undefined\" === typeof window.waioMOC && (window.waioMOC = {});\n                    \"undefined\" === typeof waioMOC.cart && (waioMOC.cart = {});\n                    try {\n                      window.cart_data = WSAIO.cart_object;\n                      waioMOC.cart[\"item_count\"] = WSAIO.cart_object.item_count;\n                      waioMOC.cart[\"original_total_price\"] = WSAIO.cart_object.original_total_price;\n                      WSAIO.order_control()\n                      setTimeout(function(){\n                        if(typeof WSAIO.loadcartQuantityControllers != 'undefined' && typeof WSAIO.load_checkout_restriction != 'undefined'){ WSAIO.load_checkout_restriction(); WSAIO.loadcartQuantityControllers([],function(e){setTimeout(function(){WSAIO.run_checkout()},1000)});}else{WSAIO.run_checkout()}\n                      },1000)\n                    } catch (e) {}\n                 } catch (e) {}\n\n            };\n            WSAIO.preCheckout = function (){\n              if(typeof WSAIO.run_checkout != 'undefined'){\n                WSAIO.showCheckoutLoader()\n                 $.getJSON(WSAIO.local_param +'cart',function(e){\n                  window.cart_data = e;\n                    try {\n                    \"undefined\" === typeof window.waioMOC && (window.waioMOC = {});\n                    \"undefined\" === typeof waioMOC.cart && (waioMOC.cart = {});\n                    try {                                       \n                      waioMOC.cart[\"item_count\"] = e.item_count;\n                      waioMOC.cart[\"original_total_price\"] = e.original_total_price;\n                      WSAIO.order_control()\n                      if(typeof WSAIO.cartQuantityControllers != 'undefined' && typeof WSAIO.checkout_restriction != 'undefined'){ WSAIO.checkout_restriction(); WSAIO.cartQuantityControllers([],function(e){setTimeout(function(){WSAIO.run_checkout()},500)});}else{WSAIO.run_checkout()}\n                    } catch (e) {}\n                    } catch (e) {}\n                })\n              }\n            };\n            WSAIO.preloadCheckout();\n          }\n        })\n      \n      };\n\n      window.WSAIO_MODULE(jQuery)\n<\/script>\n<style>.wsaioUsellMessage li{display: flex !important; margin: 0px !important; padding: 0px !important; font-size: 12px !important; color: #499141 !important; line-height: 1.3 !important;}.wsaioUsellMessage li::before { content: '    '; font-size: 8px; padding-top: 2px; }.wsaioUsellMessage{margin: 8px 0px !important;line-height: 1.3;color: #499141; font-size: 13px !important; background: #ddd; padding: 10px; margin: auto; border-radius: 10px; animation: zoom-in-zoom-outs 2s ease-out infinite;}@keyframes zoom-in-zoom-outs { 0% { transform: scale(1, 1); } 50% { transform: scale(1.1, 1.1); } 100% { transform: scale(1, 1); } }.wholesaleAllInOnePreview{box-shadow:0 -1px 3px rgb(0 0 0 \/ 20%);overflow:visible!important;position:fixed!important;bottom:0!important;left:0!important;z-index:2147483647!important;width:100%!important;height:60px!important;border:none!important;background-color:#fffffffc!important;padding:0 1rem!important}.wholesale_bar__stack{min-height:60px;align-items:center;margin-top:0;margin-left:0;display:flex}.wholesale_bar__item{-webkit-box-flex:1;flex:1 1 auto;min-width:0;max-width:100%}.wholesale_bar__button_group{-webkit-box-pack:end;justify-content:flex-end;display:flex;align-items:center;flex-wrap:wrap;-webkit-box-align:center;list-style:none;margin:0 30px 0 0;padding:0}.wholesale-button-group__item{margin-top:0;margin-right:.5rem;display:flex;flex-wrap:wrap;-webkit-box-align:center;align-items:center;list-style:none;margin-bottom:0}.wholesale-button-group{font-size:12px;font-family:inherit;cursor:pointer;text-transform:none;padding:.5625rem .9375rem;border-radius:5px!important;color:rgb(32 34 35)!important;background:unset;border:1px solid rgb(186 191 195)!important;border-top-color:rgb(186 191 195)!important;border-bottom-color:rgb(186 191 195)!important;box-shadow:0 1px 0 rgb(0 0 0 \/ 5%)!important;position:relative;min-height:40px!important;touch-action:manipulation;letter-spacing:1px;font-weight:600}.wsaio_bar_dropbtn{cursor:pointer!important;width:110px!important;text-align:left!important;background-color:#fffffffc!important;font-size:12px!important}.wsaio_bar_dropdown{position:relative;display:inline-block;margin-left:6px}.wsaio_bar_dropdown-content{display:none;position:absolute;min-width:160px;box-shadow:0 1px 10px 0 rgb(5 7 10 \/ 20%);z-index:99999;bottom:42px;border-radius:10px;padding:2px;right:0}.wsaio_bar_dropdown-content button{color:#000!important;padding:12px 16px!important;text-decoration:none!important;display:block!important;background:unset!important;width:100%!important;border:#ffdead!important}.wsaio_bar_show{display:block}.wholesale_bar__item a{color:#007ace!important}.wholesale-button-group2{border:none!important;box-shadow:unset!important;color:#007ace!important}.wholesale-button-group:hover{background:unset!important}@media screen and (min-width:768px){.wholesaleAllInOnePreview{padding:0 1rem!important}}@media screen and (max-width:884px){.wsaio_bar_dropdown{display:block!important}.wholesale_bar__button_group{display:none!important}.wholesaleAllInOnePreview{height:auto!important;padding:10px 0 10px 10px!important;line-height:20px!important}.wholesale_bar__stack{padding-right:24px!important}.wholesale_bar__item div{font-size:13px!important}}<\/style>\n\n<!-- compress link https:\/\/products.aspose.app\/total\/compress\/txt -->","wsaio_addons_liquid_file":"","wsaio_custom_css_file":""}},"9240980991540875960":{"type":"shopify:\/\/apps\/webpanda-contact-autoresponder\/blocks\/app-embed\/32a94abe-3d7a-4526-920a-d901f786f4d9","disabled":false,"settings":{}}}},"presets":{"Wood":{"heading_color":"#3a2a2f","text_color":"#3a2a2f","accent_color":"#ff6128","link_color":"#ff6128","border_color":"#e7e2de","background":"#f7f4f2","secondary_background":"#ffffff","error_color":"#f71b1b","success_color":"#48b448","primary_button_background":"#ff6128","primary_button_text_color":"#ffffff","secondary_button_background":"#3a2a2f","secondary_button_text_color":"#ffffff","header_background":"#3a2a2f","header_text_color":"#ffffff","header_light_text_color":"#e9e2dd","header_accent_color":"#ff6128","product_on_sale_accent":"#ee0000","product_in_stock_color":"#008a00","product_low_stock_color":"#ee0000","product_sold_out_color":"#d1d1d4","product_label_1_background":"#ff6128","product_label_2_background":"#a95ebe","product_star_color":"#ffb647","footer_background_color":"#f7f4f2","footer_heading_text_color":"#3a2a2f","footer_body_text_color":"#3a2a2f","footer_accent_color":"#ff6128","base_text_font_size":15,"heading_font":"itc_avant_garde_gothic_n5","text_font":"basic_commercial_n4","underline_links":true,"animation_image_zoom":true,"search_mode":"product,article,page","show_vendor":true,"show_secondary_image":true,"show_discount":true,"discount_mode":"percentage","product_price_position":"after_title","product_image_size":"square","show_color_swatch":false,"show_inventory_quantity":true,"low_inventory_threshold":1,"show_reviews_badge":false,"cart_type":"drawer","cart_empty_button_link":"shopify:\/\/collections\/all","cart_show_checkout_button":true,"cart_show_free_shipping_threshold":true,"cart_free_shipping_threshold":"50","checkout_logo_position":"center","checkout_logo_size":"medium","checkout_body_background_image":"","checkout_body_background_color":"#fff","checkout_input_background_color_mode":"white","checkout_sidebar_background_image":"","checkout_sidebar_background_color":"#f7f4f2","checkout_heading_font":"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'","checkout_body_font":"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'","checkout_accent_color":"#ff6128","checkout_button_color":"#ff6128","checkout_error_color":"#f71b1b","sections":{"header":{"type":"header","settings":{"logo":"","logo_max_width":140,"mobile_logo_max_width":100,"navigation_menu":"main-menu","desktop_navigation_layout":"inline","desktop_navigation_open_trigger":"hover","navigation_phone_number":"Call us 000-000-0000","navigation_email":"info@yourwebsite.com","search_menu":""}},"footer":{"type":"footer","blocks":{"footer-0":{"type":"text","settings":{"title":"About the shop","content":"<p>Use this text area to tell your customers about your brand and vision. You can change it in the theme settings.<\/p>"}},"footer-1":{"type":"links","settings":{"menu":"footer"}},"footer-2":{"type":"newsletter","settings":{"title":"Newsletter","subheading":"<p>A short sentence describing what someone will receive by subscribing<\/p>"}}},"block_order":["footer-0","footer-1","footer-2"],"settings":{"show_social_media":true,"show_payment_icons":true}},"announcement-bar":{"type":"announcement-bar","settings":{"background":"#3a2a2f","text_color":"#ffffff","text":"Announce something here","link":"","newsletter_button":"Subscribe & Save","newsletter_title":"Newsletter","newsletter_content":"<p>A short sentence describing what someone will receive by subscribing<\/p>"}}}},"Fabric":{"heading_color":"#222021","text_color":"#616161","accent_color":"#cb1836","link_color":"#cb1836","border_color":"#e8e8e8","background":"#f5f5f5","secondary_background":"#ffffff","error_color":"#cf0e0e","success_color":"#1c7b36","primary_button_background":"#cb1836","primary_button_text_color":"#ffffff","secondary_button_background":"#222021","secondary_button_text_color":"#ffffff","header_background":"#222021","header_text_color":"#ffffff","header_light_text_color":"#e8e8e8","header_accent_color":"#cb1836","footer_background_color":"#222021","footer_heading_text_color":"#ffffff","footer_body_text_color":"#ffffff","footer_accent_color":"#cb1836","product_on_sale_accent":"#cf0e0e","product_in_stock_color":"#1c7b36","product_low_stock_color":"#cf0e0e","product_sold_out_color":"#8a9297","product_label_1_background":"#3f6ab1","product_label_2_background":"#8a44ae","product_star_color":"#ffbd00","base_text_font_size":16,"heading_font":"avenir_next_n7","text_font":"avenir_next_n5","underline_links":true,"animation_image_zoom":true,"search_mode":"product,article","show_vendor":true,"show_secondary_image":true,"show_discount":true,"discount_mode":"percentage","product_price_position":"before_title","product_image_size":"square","show_color_swatch":true,"show_inventory_quantity":true,"low_inventory_threshold":2,"show_reviews_badge":true,"cart_type":"drawer","cart_empty_button_link":"shopify:\/\/collections\/all","cart_show_checkout_button":true,"cart_show_free_shipping_threshold":true,"cart_free_shipping_threshold":"49","social_facebook":"","social_twitter":"","social_pinterest":"","social_instagram":"","social_vimeo":"","social_tumblr":"","social_youtube":"","social_linkedin":"","social_snapchat":"","social_fancy":"","favicon":"","checkout_header_image":"","checkout_logo_image":"","checkout_logo_position":"left","checkout_logo_size":"medium","checkout_body_background_image":"","checkout_body_background_color":"#fff","checkout_input_background_color_mode":"white","checkout_sidebar_background_image":"","checkout_sidebar_background_color":"#f5f5f5","checkout_heading_font":"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'","checkout_body_font":"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'","checkout_accent_color":"#cb1836","checkout_button_color":"#cb1836","checkout_error_color":"#ff0000","sections":{"header":{"type":"header","settings":{"logo":"","logo_max_width":140,"mobile_logo_max_width":100,"navigation_menu":"main-menu","desktop_navigation_layout":"inline","desktop_navigation_open_trigger":"hover","navigation_phone_number":"Call us 000-000-0000","navigation_email":"info@yourwebsite.com","search_menu":""}},"footer":{"type":"footer","blocks":{"footer-0":{"type":"text","settings":{"title":"About the shop","content":"<p>Use this text area to tell your customers about your brand and vision. You can change it in the theme settings.<\/p>"}},"footer-1":{"type":"links","settings":{"menu":"footer"}},"footer-2":{"type":"newsletter","settings":{"title":"Newsletter","subheading":"<p>A short sentence describing what someone will receive by subscribing<\/p>"}}},"block_order":["footer-0","footer-1","footer-2"],"settings":{"show_social_media":true,"show_payment_icons":true}},"announcement-bar":{"type":"announcement-bar","settings":{"background":"#222021","text_color":"#ffffff","text":"Announce something here","link":"","newsletter_button":"Subscribe & Save","newsletter_title":"Newsletter","newsletter_content":"<p>A short sentence describing what someone will receive by subscribing<\/p>"}}}}},"platform_customizations":{"custom_css":[]}}